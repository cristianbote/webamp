webpackJsonp([1],{133:function(t,e,i){!function(e,i){t.exports=i()}("undefined"!=typeof self&&self,function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=25)}([function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){"use strict";e.__esModule=!0;var r,s=(r=i(12))&&r.__esModule?r:{default:r};e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,s.default)(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),s=n(i(1));function n(t){return t&&t.__esModule?t:{default:t}}var a=/uniform sampler2D sampler_(?:.+?);/g,o=/uniform sampler2D sampler_(.+?);/,h=function(){function t(){(0,r.default)(this,t)}return(0,s.default)(t,null,[{key:"getShaderParts",value:function(t){var e=t.indexOf("shader_body");if(t&&e>-1){var i=t.substring(0,e),r=t.substring(e),s=r.indexOf("{"),n=r.lastIndexOf("}");return[i,r.substring(s+1,n)]}return["",t]}},{key:"getFragmentFloatPrecision",value:function(t){return t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0?"highp":t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}},{key:"getUserSamplers",value:function(t){var e=[],i=t.match(a);if(i&&i.length>0)for(var r=0;r<i.length;r++){var s=i[r].match(o);if(s&&s.length>0){var n=s[1];e.push({sampler:n})}}return e}}]),t}();e.default=h,t.exports=e.default},function(t,e,i){(function(t,r){var s;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
(function(){var n,a=200,o="Expected a function",h="__lodash_hash_undefined__",u="__lodash_placeholder__",l=1,f=2,c=4,m=1,g=2,d=1,A=2,v=4,p=8,_=16,x=32,b=64,T=128,E=256,y=512,P=800,L=16,R=1/0,S=9007199254740991,w=1.7976931348623157e308,M=NaN,U=4294967295,q=U-1,F=U>>>1,z=[["ary",T],["bind",d],["bindKey",A],["curry",p],["curryRight",_],["flip",y],["partial",x],["partialRight",b],["rearg",E]],B="[object Arguments]",V="[object Array]",I="[object AsyncFunction]",D="[object Boolean]",C="[object Date]",X="[object DOMException]",k="[object Error]",N="[object Function]",W="[object GeneratorFunction]",O="[object Map]",Q="[object Number]",j="[object Null]",Y="[object Object]",K="[object Proxy]",G="[object RegExp]",H="[object Set]",J="[object String]",Z="[object Symbol]",$="[object Undefined]",tt="[object WeakMap]",et="[object ArrayBuffer]",it="[object DataView]",rt="[object Float32Array]",st="[object Float64Array]",nt="[object Int8Array]",at="[object Int16Array]",ot="[object Int32Array]",ht="[object Uint8Array]",ut="[object Uint8ClampedArray]",lt="[object Uint16Array]",ft="[object Uint32Array]",ct=/\b__p \+= '';/g,mt=/\b(__p \+=) '' \+/g,gt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,dt=/&(?:amp|lt|gt|quot|#39);/g,At=/[&<>"']/g,vt=RegExp(dt.source),pt=RegExp(At.source),_t=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,Tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Et=/^\w*$/,yt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pt=/[\\^$.*+?()[\]{}|]/g,Lt=RegExp(Pt.source),Rt=/^\s+|\s+$/g,St=/^\s+/,wt=/\s+$/,Mt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ut=/\{\n\/\* \[wrapped with (.+)\] \*/,qt=/,? & /,Ft=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zt=/\\(\\)?/g,Bt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Vt=/\w*$/,It=/^[-+]0x[0-9a-f]+$/i,Dt=/^0b[01]+$/i,Ct=/^\[object .+?Constructor\]$/,Xt=/^0o[0-7]+$/i,kt=/^(?:0|[1-9]\d*)$/,Nt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wt=/($^)/,Ot=/['\n\r\u2028\u2029\\]/g,Qt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",jt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yt="["+jt+"]",Kt="["+Qt+"]",Gt="\\d+",Ht="[a-z\\xdf-\\xf6\\xf8-\\xff]",Jt="[^\\ud800-\\udfff"+jt+Gt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Zt="\\ud83c[\\udffb-\\udfff]",$t="[^\\ud800-\\udfff]",te="(?:\\ud83c[\\udde6-\\uddff]){2}",ee="[\\ud800-\\udbff][\\udc00-\\udfff]",ie="[A-Z\\xc0-\\xd6\\xd8-\\xde]",re="(?:"+Ht+"|"+Jt+")",se="(?:"+ie+"|"+Jt+")",ne="(?:"+Kt+"|"+Zt+")?",ae="[\\ufe0e\\ufe0f]?"+ne+"(?:\\u200d(?:"+[$t,te,ee].join("|")+")[\\ufe0e\\ufe0f]?"+ne+")*",oe="(?:"+["[\\u2700-\\u27bf]",te,ee].join("|")+")"+ae,he="(?:"+[$t+Kt+"?",Kt,te,ee,"[\\ud800-\\udfff]"].join("|")+")",ue=RegExp("['’]","g"),le=RegExp(Kt,"g"),fe=RegExp(Zt+"(?="+Zt+")|"+he+ae,"g"),ce=RegExp([ie+"?"+Ht+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Yt,ie,"$"].join("|")+")",se+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Yt,ie+re,"$"].join("|")+")",ie+"?"+re+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ie+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Gt,oe].join("|"),"g"),me=RegExp("[\\u200d\\ud800-\\udfff"+Qt+"\\ufe0e\\ufe0f]"),ge=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,de=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ae=-1,ve={};ve[rt]=ve[st]=ve[nt]=ve[at]=ve[ot]=ve[ht]=ve[ut]=ve[lt]=ve[ft]=!0,ve[B]=ve[V]=ve[et]=ve[D]=ve[it]=ve[C]=ve[k]=ve[N]=ve[O]=ve[Q]=ve[Y]=ve[G]=ve[H]=ve[J]=ve[tt]=!1;var pe={};pe[B]=pe[V]=pe[et]=pe[it]=pe[D]=pe[C]=pe[rt]=pe[st]=pe[nt]=pe[at]=pe[ot]=pe[O]=pe[Q]=pe[Y]=pe[G]=pe[H]=pe[J]=pe[Z]=pe[ht]=pe[ut]=pe[lt]=pe[ft]=!0,pe[k]=pe[N]=pe[tt]=!1;var _e={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xe=parseFloat,be=parseInt,Te="object"==typeof t&&t&&t.Object===Object&&t,Ee="object"==typeof self&&self&&self.Object===Object&&self,ye=Te||Ee||Function("return this")(),Pe="object"==typeof e&&e&&!e.nodeType&&e,Le=Pe&&"object"==typeof r&&r&&!r.nodeType&&r,Re=Le&&Le.exports===Pe,Se=Re&&Te.process,we=function(){try{return Se&&Se.binding&&Se.binding("util")}catch(t){}}(),Me=we&&we.isArrayBuffer,Ue=we&&we.isDate,qe=we&&we.isMap,Fe=we&&we.isRegExp,ze=we&&we.isSet,Be=we&&we.isTypedArray;function Ve(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function Ie(t,e,i,r){for(var s=-1,n=null==t?0:t.length;++s<n;){var a=t[s];e(r,a,i(a),t)}return r}function De(t,e){for(var i=-1,r=null==t?0:t.length;++i<r&&!1!==e(t[i],i,t););return t}function Ce(t,e){for(var i=-1,r=null==t?0:t.length;++i<r;)if(!e(t[i],i,t))return!1;return!0}function Xe(t,e){for(var i=-1,r=null==t?0:t.length,s=0,n=[];++i<r;){var a=t[i];e(a,i,t)&&(n[s++]=a)}return n}function ke(t,e){return!(null==t||!t.length)&&Je(t,e,0)>-1}function Ne(t,e,i){for(var r=-1,s=null==t?0:t.length;++r<s;)if(i(e,t[r]))return!0;return!1}function We(t,e){for(var i=-1,r=null==t?0:t.length,s=Array(r);++i<r;)s[i]=e(t[i],i,t);return s}function Oe(t,e){for(var i=-1,r=e.length,s=t.length;++i<r;)t[s+i]=e[i];return t}function Qe(t,e,i,r){var s=-1,n=null==t?0:t.length;for(r&&n&&(i=t[++s]);++s<n;)i=e(i,t[s],s,t);return i}function je(t,e,i,r){var s=null==t?0:t.length;for(r&&s&&(i=t[--s]);s--;)i=e(i,t[s],s,t);return i}function Ye(t,e){for(var i=-1,r=null==t?0:t.length;++i<r;)if(e(t[i],i,t))return!0;return!1}var Ke=ei("length");function Ge(t,e,i){var r;return i(t,function(t,i,s){if(e(t,i,s))return r=i,!1}),r}function He(t,e,i,r){for(var s=t.length,n=i+(r?1:-1);r?n--:++n<s;)if(e(t[n],n,t))return n;return-1}function Je(t,e,i){return e==e?function(t,e,i){for(var r=i-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}(t,e,i):He(t,$e,i)}function Ze(t,e,i,r){for(var s=i-1,n=t.length;++s<n;)if(r(t[s],e))return s;return-1}function $e(t){return t!=t}function ti(t,e){var i=null==t?0:t.length;return i?si(t,e)/i:M}function ei(t){return function(e){return null==e?n:e[t]}}function ii(t){return function(e){return null==t?n:t[e]}}function ri(t,e,i,r,s){return s(t,function(t,s,n){i=r?(r=!1,t):e(i,t,s,n)}),i}function si(t,e){for(var i,r=-1,s=t.length;++r<s;){var a=e(t[r]);a!==n&&(i=i===n?a:i+a)}return i}function ni(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}function ai(t){return function(e){return t(e)}}function oi(t,e){return We(e,function(e){return t[e]})}function hi(t,e){return t.has(e)}function ui(t,e){for(var i=-1,r=t.length;++i<r&&Je(e,t[i],0)>-1;);return i}function li(t,e){for(var i=t.length;i--&&Je(e,t[i],0)>-1;);return i}var fi=ii({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),ci=ii({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function mi(t){return"\\"+_e[t]}function gi(t){return me.test(t)}function di(t){var e=-1,i=Array(t.size);return t.forEach(function(t,r){i[++e]=[r,t]}),i}function Ai(t,e){return function(i){return t(e(i))}}function vi(t,e){for(var i=-1,r=t.length,s=0,n=[];++i<r;){var a=t[i];a!==e&&a!==u||(t[i]=u,n[s++]=i)}return n}function pi(t,e){return"__proto__"==e?n:t[e]}function _i(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t}),i}function xi(t){return gi(t)?function(t){for(var e=fe.lastIndex=0;fe.test(t);)++e;return e}(t):Ke(t)}function bi(t){return gi(t)?function(t){return t.match(fe)||[]}(t):function(t){return t.split("")}(t)}var Ti=ii({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ei=function t(e){var i,r=(e=null==e?ye:Ei.defaults(ye.Object(),e,Ei.pick(ye,de))).Array,s=e.Date,Qt=e.Error,jt=e.Function,Yt=e.Math,Kt=e.Object,Gt=e.RegExp,Ht=e.String,Jt=e.TypeError,Zt=r.prototype,$t=jt.prototype,te=Kt.prototype,ee=e["__core-js_shared__"],ie=$t.toString,re=te.hasOwnProperty,se=0,ne=(i=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",ae=te.toString,oe=ie.call(Kt),he=ye._,fe=Gt("^"+ie.call(re).replace(Pt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=Re?e.Buffer:n,_e=e.Symbol,Te=e.Uint8Array,Ee=me?me.allocUnsafe:n,Pe=Ai(Kt.getPrototypeOf,Kt),Le=Kt.create,Se=te.propertyIsEnumerable,we=Zt.splice,Ke=_e?_e.isConcatSpreadable:n,ii=_e?_e.iterator:n,yi=_e?_e.toStringTag:n,Pi=function(){try{var t=yn(Kt,"defineProperty");return t({},"",{}),t}catch(t){}}(),Li=e.clearTimeout!==ye.clearTimeout&&e.clearTimeout,Ri=s&&s.now!==ye.Date.now&&s.now,Si=e.setTimeout!==ye.setTimeout&&e.setTimeout,wi=Yt.ceil,Mi=Yt.floor,Ui=Kt.getOwnPropertySymbols,qi=me?me.isBuffer:n,Fi=e.isFinite,zi=Zt.join,Bi=Ai(Kt.keys,Kt),Vi=Yt.max,Ii=Yt.min,Di=s.now,Ci=e.parseInt,Xi=Yt.random,ki=Zt.reverse,Ni=yn(e,"DataView"),Wi=yn(e,"Map"),Oi=yn(e,"Promise"),Qi=yn(e,"Set"),ji=yn(e,"WeakMap"),Yi=yn(Kt,"create"),Ki=ji&&new ji,Gi={},Hi=Gn(Ni),Ji=Gn(Wi),Zi=Gn(Oi),$i=Gn(Qi),tr=Gn(ji),er=_e?_e.prototype:n,ir=er?er.valueOf:n,rr=er?er.toString:n;function sr(t){if(co(t)&&!eo(t)&&!(t instanceof hr)){if(t instanceof or)return t;if(re.call(t,"__wrapped__"))return Hn(t)}return new or(t)}var nr=function(){function t(){}return function(e){if(!fo(e))return{};if(Le)return Le(e);t.prototype=e;var i=new t;return t.prototype=n,i}}();function ar(){}function or(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function hr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function ur(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function lr(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function fr(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function cr(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new fr;++e<i;)this.add(t[e])}function mr(t){var e=this.__data__=new lr(t);this.size=e.size}function gr(t,e){var i=eo(t),r=!i&&to(t),s=!i&&!r&&no(t),n=!i&&!r&&!s&&bo(t),a=i||r||s||n,o=a?ni(t.length,Ht):[],h=o.length;for(var u in t)!e&&!re.call(t,u)||a&&("length"==u||s&&("offset"==u||"parent"==u)||n&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Un(u,h))||o.push(u);return o}function dr(t){var e=t.length;return e?t[us(0,e-1)]:n}function Ar(t,e,i){(i===n||Ja(t[e],i))&&(i!==n||e in t)||br(t,e,i)}function vr(t,e,i){var r=t[e];re.call(t,e)&&Ja(r,i)&&(i!==n||e in t)||br(t,e,i)}function pr(t,e){for(var i=t.length;i--;)if(Ja(t[i][0],e))return i;return-1}function _r(t,e,i,r){return Sr(t,function(t,s,n){e(r,t,i(t),n)}),r}function xr(t,e){return t&&Ns(e,Wo(e),t)}function br(t,e,i){"__proto__"==e&&Pi?Pi(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function Tr(t,e){for(var i=-1,s=e.length,a=r(s),o=null==t;++i<s;)a[i]=o?n:Do(t,e[i]);return a}function Er(t,e,i){return t==t&&(i!==n&&(t=t<=i?t:i),e!==n&&(t=t>=e?t:e)),t}function yr(t,e,i,r,s,a){var o,h=e&l,u=e&f,m=e&c;if(i&&(o=s?i(t,r,s,a):i(t)),o!==n)return o;if(!fo(t))return t;var g=eo(t);if(g){if(o=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&re.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!h)return ks(t,o)}else{var d=Rn(t),A=d==N||d==W;if(no(t))return Bs(t,h);if(d==Y||d==B||A&&!s){if(o=u||A?{}:wn(t),!h)return u?function(t,e){return Ns(t,Ln(t),e)}(t,function(t,e){return t&&Ns(e,Oo(e),t)}(o,t)):function(t,e){return Ns(t,Pn(t),e)}(t,xr(o,t))}else{if(!pe[d])return s?t:{};o=function(t,e,i){var r,s,n,a=t.constructor;switch(e){case et:return Vs(t);case D:case C:return new a(+t);case it:return function(t,e){var i=e?Vs(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case rt:case st:case nt:case at:case ot:case ht:case ut:case lt:case ft:return Is(t,i);case O:return new a;case Q:case J:return new a(t);case G:return(n=new(s=t).constructor(s.source,Vt.exec(s))).lastIndex=s.lastIndex,n;case H:return new a;case Z:return r=t,ir?Kt(ir.call(r)):{}}}(t,d,h)}}a||(a=new mr);var v=a.get(t);if(v)return v;if(a.set(t,o),po(t))return t.forEach(function(r){o.add(yr(r,e,i,r,t,a))}),o;if(mo(t))return t.forEach(function(r,s){o.set(s,yr(r,e,i,s,t,a))}),o;var p=g?n:(m?u?vn:An:u?Oo:Wo)(t);return De(p||t,function(r,s){p&&(r=t[s=r]),vr(o,s,yr(r,e,i,s,t,a))}),o}function Pr(t,e,i){var r=i.length;if(null==t)return!r;for(t=Kt(t);r--;){var s=i[r],a=e[s],o=t[s];if(o===n&&!(s in t)||!a(o))return!1}return!0}function Lr(t,e,i){if("function"!=typeof t)throw new Jt(o);return Nn(function(){t.apply(n,i)},e)}function Rr(t,e,i,r){var s=-1,n=ke,o=!0,h=t.length,u=[],l=e.length;if(!h)return u;i&&(e=We(e,ai(i))),r?(n=Ne,o=!1):e.length>=a&&(n=hi,o=!1,e=new cr(e));t:for(;++s<h;){var f=t[s],c=null==i?f:i(f);if(f=r||0!==f?f:0,o&&c==c){for(var m=l;m--;)if(e[m]===c)continue t;u.push(f)}else n(e,c,r)||u.push(f)}return u}sr.templateSettings={escape:_t,evaluate:xt,interpolate:bt,variable:"",imports:{_:sr}},sr.prototype=ar.prototype,sr.prototype.constructor=sr,or.prototype=nr(ar.prototype),or.prototype.constructor=or,hr.prototype=nr(ar.prototype),hr.prototype.constructor=hr,ur.prototype.clear=function(){this.__data__=Yi?Yi(null):{},this.size=0},ur.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ur.prototype.get=function(t){var e=this.__data__;if(Yi){var i=e[t];return i===h?n:i}return re.call(e,t)?e[t]:n},ur.prototype.has=function(t){var e=this.__data__;return Yi?e[t]!==n:re.call(e,t)},ur.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Yi&&e===n?h:e,this},lr.prototype.clear=function(){this.__data__=[],this.size=0},lr.prototype.delete=function(t){var e=this.__data__,i=pr(e,t);return!(i<0||(i==e.length-1?e.pop():we.call(e,i,1),--this.size,0))},lr.prototype.get=function(t){var e=this.__data__,i=pr(e,t);return i<0?n:e[i][1]},lr.prototype.has=function(t){return pr(this.__data__,t)>-1},lr.prototype.set=function(t,e){var i=this.__data__,r=pr(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this},fr.prototype.clear=function(){this.size=0,this.__data__={hash:new ur,map:new(Wi||lr),string:new ur}},fr.prototype.delete=function(t){var e=Tn(this,t).delete(t);return this.size-=e?1:0,e},fr.prototype.get=function(t){return Tn(this,t).get(t)},fr.prototype.has=function(t){return Tn(this,t).has(t)},fr.prototype.set=function(t,e){var i=Tn(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this},cr.prototype.add=cr.prototype.push=function(t){return this.__data__.set(t,h),this},cr.prototype.has=function(t){return this.__data__.has(t)},mr.prototype.clear=function(){this.__data__=new lr,this.size=0},mr.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},mr.prototype.get=function(t){return this.__data__.get(t)},mr.prototype.has=function(t){return this.__data__.has(t)},mr.prototype.set=function(t,e){var i=this.__data__;if(i instanceof lr){var r=i.__data__;if(!Wi||r.length<a-1)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new fr(r)}return i.set(t,e),this.size=i.size,this};var Sr=Qs(Vr),wr=Qs(Ir,!0);function Mr(t,e){var i=!0;return Sr(t,function(t,r,s){return i=!!e(t,r,s)}),i}function Ur(t,e,i){for(var r=-1,s=t.length;++r<s;){var a=t[r],o=e(a);if(null!=o&&(h===n?o==o&&!xo(o):i(o,h)))var h=o,u=a}return u}function qr(t,e){var i=[];return Sr(t,function(t,r,s){e(t,r,s)&&i.push(t)}),i}function Fr(t,e,i,r,s){var n=-1,a=t.length;for(i||(i=Mn),s||(s=[]);++n<a;){var o=t[n];e>0&&i(o)?e>1?Fr(o,e-1,i,r,s):Oe(s,o):r||(s[s.length]=o)}return s}var zr=js(),Br=js(!0);function Vr(t,e){return t&&zr(t,e,Wo)}function Ir(t,e){return t&&Br(t,e,Wo)}function Dr(t,e){return Xe(e,function(e){return ho(t[e])})}function Cr(t,e){for(var i=0,r=(e=Us(e,t)).length;null!=t&&i<r;)t=t[Kn(e[i++])];return i&&i==r?t:n}function Xr(t,e,i){var r=e(t);return eo(t)?r:Oe(r,i(t))}function kr(t){return null==t?t===n?$:j:yi&&yi in Kt(t)?function(t){var e=re.call(t,yi),i=t[yi];try{t[yi]=n;var r=!0}catch(t){}var s=ae.call(t);return r&&(e?t[yi]=i:delete t[yi]),s}(t):function(t){return ae.call(t)}(t)}function Nr(t,e){return t>e}function Wr(t,e){return null!=t&&re.call(t,e)}function Or(t,e){return null!=t&&e in Kt(t)}function Qr(t,e,i){for(var s=i?Ne:ke,a=t[0].length,o=t.length,h=o,u=r(o),l=1/0,f=[];h--;){var c=t[h];h&&e&&(c=We(c,ai(e))),l=Ii(c.length,l),u[h]=!i&&(e||a>=120&&c.length>=120)?new cr(h&&c):n}c=t[0];var m=-1,g=u[0];t:for(;++m<a&&f.length<l;){var d=c[m],A=e?e(d):d;if(d=i||0!==d?d:0,!(g?hi(g,A):s(f,A,i))){for(h=o;--h;){var v=u[h];if(!(v?hi(v,A):s(t[h],A,i)))continue t}g&&g.push(A),f.push(d)}}return f}function jr(t,e,i){var r=null==(t=Xn(t,e=Us(e,t)))?t:t[Kn(oa(e))];return null==r?n:Ve(r,t,i)}function Yr(t){return co(t)&&kr(t)==B}function Kr(t,e,i,r,s){return t===e||(null==t||null==e||!co(t)&&!co(e)?t!=t&&e!=e:function(t,e,i,r,s,a){var o=eo(t),h=eo(e),u=o?V:Rn(t),l=h?V:Rn(e),f=(u=u==B?Y:u)==Y,c=(l=l==B?Y:l)==Y,d=u==l;if(d&&no(t)){if(!no(e))return!1;o=!0,f=!1}if(d&&!f)return a||(a=new mr),o||bo(t)?gn(t,e,i,r,s,a):function(t,e,i,r,s,n,a){switch(i){case it:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case et:return!(t.byteLength!=e.byteLength||!n(new Te(t),new Te(e)));case D:case C:case Q:return Ja(+t,+e);case k:return t.name==e.name&&t.message==e.message;case G:case J:return t==e+"";case O:var o=di;case H:var h=r&m;if(o||(o=_i),t.size!=e.size&&!h)return!1;var u=a.get(t);if(u)return u==e;r|=g,a.set(t,e);var l=gn(o(t),o(e),r,s,n,a);return a.delete(t),l;case Z:if(ir)return ir.call(t)==ir.call(e)}return!1}(t,e,u,i,r,s,a);if(!(i&m)){var A=f&&re.call(t,"__wrapped__"),v=c&&re.call(e,"__wrapped__");if(A||v){var p=A?t.value():t,_=v?e.value():e;return a||(a=new mr),s(p,_,i,r,a)}}return!!d&&(a||(a=new mr),function(t,e,i,r,s,a){var o=i&m,h=An(t),u=h.length;if(u!=An(e).length&&!o)return!1;for(var l=u;l--;){var f=h[l];if(!(o?f in e:re.call(e,f)))return!1}var c=a.get(t);if(c&&a.get(e))return c==e;var g=!0;a.set(t,e),a.set(e,t);for(var d=o;++l<u;){var A=t[f=h[l]],v=e[f];if(r)var p=o?r(v,A,f,e,t,a):r(A,v,f,t,e,a);if(!(p===n?A===v||s(A,v,i,r,a):p)){g=!1;break}d||(d="constructor"==f)}if(g&&!d){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x)&&(g=!1)}return a.delete(t),a.delete(e),g}(t,e,i,r,s,a))}(t,e,i,r,Kr,s))}function Gr(t,e,i,r){var s=i.length,a=s,o=!r;if(null==t)return!a;for(t=Kt(t);s--;){var h=i[s];if(o&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++s<a;){var u=(h=i[s])[0],l=t[u],f=h[1];if(o&&h[2]){if(l===n&&!(u in t))return!1}else{var c=new mr;if(r)var d=r(l,f,u,t,e,c);if(!(d===n?Kr(f,l,m|g,r,c):d))return!1}}return!0}function Hr(t){return!(!fo(t)||ne&&ne in t)&&(ho(t)?fe:Ct).test(Gn(t))}function Jr(t){return"function"==typeof t?t:null==t?dh:"object"==typeof t?eo(t)?is(t[0],t[1]):es(t):yh(t)}function Zr(t){if(!Vn(t))return Bi(t);var e=[];for(var i in Kt(t))re.call(t,i)&&"constructor"!=i&&e.push(i);return e}function $r(t,e){return t<e}function ts(t,e){var i=-1,s=ro(t)?r(t.length):[];return Sr(t,function(t,r,n){s[++i]=e(t,r,n)}),s}function es(t){var e=En(t);return 1==e.length&&e[0][2]?Dn(e[0][0],e[0][1]):function(i){return i===t||Gr(i,t,e)}}function is(t,e){return Fn(t)&&In(e)?Dn(Kn(t),e):function(i){var r=Do(i,t);return r===n&&r===e?Co(i,t):Kr(e,r,m|g)}}function rs(t,e,i,r,s){t!==e&&zr(e,function(a,o){if(fo(a))s||(s=new mr),function(t,e,i,r,s,a,o){var h=pi(t,i),u=pi(e,i),l=o.get(u);if(l)Ar(t,i,l);else{var f=a?a(h,u,i+"",t,e,o):n,c=f===n;if(c){var m=eo(u),g=!m&&no(u),d=!m&&!g&&bo(u);f=u,m||g||d?eo(h)?f=h:so(h)?f=ks(h):g?(c=!1,f=Bs(u,!0)):d?(c=!1,f=Is(u,!0)):f=[]:Ao(u)||to(u)?(f=h,to(h)?f=wo(h):(!fo(h)||r&&ho(h))&&(f=wn(u))):c=!1}c&&(o.set(u,f),s(f,u,r,a,o),o.delete(u)),Ar(t,i,f)}}(t,e,o,i,rs,r,s);else{var h=r?r(pi(t,o),a,o+"",t,e,s):n;h===n&&(h=a),Ar(t,o,h)}},Oo)}function ss(t,e){var i=t.length;if(i)return Un(e+=e<0?i:0,i)?t[e]:n}function ns(t,e,i){var r=-1;return e=We(e.length?e:[dh],ai(bn())),function(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}(ts(t,function(t,i,s){return{criteria:We(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,i){for(var r=-1,s=t.criteria,n=e.criteria,a=s.length,o=i.length;++r<a;){var h=Ds(s[r],n[r]);if(h)return r>=o?h:h*("desc"==i[r]?-1:1)}return t.index-e.index}(t,e,i)})}function as(t,e,i){for(var r=-1,s=e.length,n={};++r<s;){var a=e[r],o=Cr(t,a);i(o,a)&&cs(n,Us(a,t),o)}return n}function os(t,e,i,r){var s=r?Ze:Je,n=-1,a=e.length,o=t;for(t===e&&(e=ks(e)),i&&(o=We(t,ai(i)));++n<a;)for(var h=0,u=e[n],l=i?i(u):u;(h=s(o,l,h,r))>-1;)o!==t&&we.call(o,h,1),we.call(t,h,1);return t}function hs(t,e){for(var i=t?e.length:0,r=i-1;i--;){var s=e[i];if(i==r||s!==n){var n=s;Un(s)?we.call(t,s,1):Es(t,s)}}return t}function us(t,e){return t+Mi(Xi()*(e-t+1))}function ls(t,e){var i="";if(!t||e<1||e>S)return i;do{e%2&&(i+=t),(e=Mi(e/2))&&(t+=t)}while(e);return i}function fs(t,e){return Wn(Cn(t,e,dh),t+"")}function cs(t,e,i,r){if(!fo(t))return t;for(var s=-1,a=(e=Us(e,t)).length,o=a-1,h=t;null!=h&&++s<a;){var u=Kn(e[s]),l=i;if(s!=o){var f=h[u];(l=r?r(f,u,h):n)===n&&(l=fo(f)?f:Un(e[s+1])?[]:{})}vr(h,u,l),h=h[u]}return t}var ms=Ki?function(t,e){return Ki.set(t,e),t}:dh,gs=Pi?function(t,e){return Pi(t,"toString",{configurable:!0,enumerable:!1,value:ch(e),writable:!0})}:dh;function ds(t,e,i){var s=-1,n=t.length;e<0&&(e=-e>n?0:n+e),(i=i>n?n:i)<0&&(i+=n),n=e>i?0:i-e>>>0,e>>>=0;for(var a=r(n);++s<n;)a[s]=t[s+e];return a}function As(t,e){var i;return Sr(t,function(t,r,s){return!(i=e(t,r,s))}),!!i}function vs(t,e,i){var r=0,s=null==t?r:t.length;if("number"==typeof e&&e==e&&s<=F){for(;r<s;){var n=r+s>>>1,a=t[n];null!==a&&!xo(a)&&(i?a<=e:a<e)?r=n+1:s=n}return s}return ps(t,e,dh,i)}function ps(t,e,i,r){e=i(e);for(var s=0,a=null==t?0:t.length,o=e!=e,h=null===e,u=xo(e),l=e===n;s<a;){var f=Mi((s+a)/2),c=i(t[f]),m=c!==n,g=null===c,d=c==c,A=xo(c);if(o)var v=r||d;else v=l?d&&(r||m):h?d&&m&&(r||!g):u?d&&m&&!g&&(r||!A):!g&&!A&&(r?c<=e:c<e);v?s=f+1:a=f}return Ii(a,q)}function _s(t,e){for(var i=-1,r=t.length,s=0,n=[];++i<r;){var a=t[i],o=e?e(a):a;if(!i||!Ja(o,h)){var h=o;n[s++]=0===a?0:a}}return n}function xs(t){return"number"==typeof t?t:xo(t)?M:+t}function bs(t){if("string"==typeof t)return t;if(eo(t))return We(t,bs)+"";if(xo(t))return rr?rr.call(t):"";var e=t+"";return"0"==e&&1/t==-R?"-0":e}function Ts(t,e,i){var r=-1,s=ke,n=t.length,o=!0,h=[],u=h;if(i)o=!1,s=Ne;else if(n>=a){var l=e?null:hn(t);if(l)return _i(l);o=!1,s=hi,u=new cr}else u=e?[]:h;t:for(;++r<n;){var f=t[r],c=e?e(f):f;if(f=i||0!==f?f:0,o&&c==c){for(var m=u.length;m--;)if(u[m]===c)continue t;e&&u.push(c),h.push(f)}else s(u,c,i)||(u!==h&&u.push(c),h.push(f))}return h}function Es(t,e){return null==(t=Xn(t,e=Us(e,t)))||delete t[Kn(oa(e))]}function ys(t,e,i,r){return cs(t,e,i(Cr(t,e)),r)}function Ps(t,e,i,r){for(var s=t.length,n=r?s:-1;(r?n--:++n<s)&&e(t[n],n,t););return i?ds(t,r?0:n,r?n+1:s):ds(t,r?n+1:0,r?s:n)}function Ls(t,e){var i=t;return i instanceof hr&&(i=i.value()),Qe(e,function(t,e){return e.func.apply(e.thisArg,Oe([t],e.args))},i)}function Rs(t,e,i){var s=t.length;if(s<2)return s?Ts(t[0]):[];for(var n=-1,a=r(s);++n<s;)for(var o=t[n],h=-1;++h<s;)h!=n&&(a[n]=Rr(a[n]||o,t[h],e,i));return Ts(Fr(a,1),e,i)}function Ss(t,e,i){for(var r=-1,s=t.length,a=e.length,o={};++r<s;){var h=r<a?e[r]:n;i(o,t[r],h)}return o}function ws(t){return so(t)?t:[]}function Ms(t){return"function"==typeof t?t:dh}function Us(t,e){return eo(t)?t:Fn(t,e)?[t]:Yn(Mo(t))}var qs=fs;function Fs(t,e,i){var r=t.length;return i=i===n?r:i,!e&&i>=r?t:ds(t,e,i)}var zs=Li||function(t){return ye.clearTimeout(t)};function Bs(t,e){if(e)return t.slice();var i=t.length,r=Ee?Ee(i):new t.constructor(i);return t.copy(r),r}function Vs(t){var e=new t.constructor(t.byteLength);return new Te(e).set(new Te(t)),e}function Is(t,e){var i=e?Vs(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Ds(t,e){if(t!==e){var i=t!==n,r=null===t,s=t==t,a=xo(t),o=e!==n,h=null===e,u=e==e,l=xo(e);if(!h&&!l&&!a&&t>e||a&&o&&u&&!h&&!l||r&&o&&u||!i&&u||!s)return 1;if(!r&&!a&&!l&&t<e||l&&i&&s&&!r&&!a||h&&i&&s||!o&&s||!u)return-1}return 0}function Cs(t,e,i,s){for(var n=-1,a=t.length,o=i.length,h=-1,u=e.length,l=Vi(a-o,0),f=r(u+l),c=!s;++h<u;)f[h]=e[h];for(;++n<o;)(c||n<a)&&(f[i[n]]=t[n]);for(;l--;)f[h++]=t[n++];return f}function Xs(t,e,i,s){for(var n=-1,a=t.length,o=-1,h=i.length,u=-1,l=e.length,f=Vi(a-h,0),c=r(f+l),m=!s;++n<f;)c[n]=t[n];for(var g=n;++u<l;)c[g+u]=e[u];for(;++o<h;)(m||n<a)&&(c[g+i[o]]=t[n++]);return c}function ks(t,e){var i=-1,s=t.length;for(e||(e=r(s));++i<s;)e[i]=t[i];return e}function Ns(t,e,i,r){var s=!i;i||(i={});for(var a=-1,o=e.length;++a<o;){var h=e[a],u=r?r(i[h],t[h],h,i,t):n;u===n&&(u=t[h]),s?br(i,h,u):vr(i,h,u)}return i}function Ws(t,e){return function(i,r){var s=eo(i)?Ie:_r,n=e?e():{};return s(i,t,bn(r,2),n)}}function Os(t){return fs(function(e,i){var r=-1,s=i.length,a=s>1?i[s-1]:n,o=s>2?i[2]:n;for(a=t.length>3&&"function"==typeof a?(s--,a):n,o&&qn(i[0],i[1],o)&&(a=s<3?n:a,s=1),e=Kt(e);++r<s;){var h=i[r];h&&t(e,h,r,a)}return e})}function Qs(t,e){return function(i,r){if(null==i)return i;if(!ro(i))return t(i,r);for(var s=i.length,n=e?s:-1,a=Kt(i);(e?n--:++n<s)&&!1!==r(a[n],n,a););return i}}function js(t){return function(e,i,r){for(var s=-1,n=Kt(e),a=r(e),o=a.length;o--;){var h=a[t?o:++s];if(!1===i(n[h],h,n))break}return e}}function Ys(t){return function(e){var i=gi(e=Mo(e))?bi(e):n,r=i?i[0]:e.charAt(0),s=i?Fs(i,1).join(""):e.slice(1);return r[t]()+s}}function Ks(t){return function(e){return Qe(uh(eh(e).replace(ue,"")),t,"")}}function Gs(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=nr(t.prototype),r=t.apply(i,e);return fo(r)?r:i}}function Hs(t){return function(e,i,r){var s=Kt(e);if(!ro(e)){var a=bn(i,3);e=Wo(e),i=function(t){return a(s[t],t,s)}}var o=t(e,i,r);return o>-1?s[a?e[o]:o]:n}}function Js(t){return dn(function(e){var i=e.length,r=i,s=or.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new Jt(o);if(s&&!h&&"wrapper"==_n(a))var h=new or([],!0)}for(r=h?r:i;++r<i;){var u=_n(a=e[r]),l="wrapper"==u?pn(a):n;h=l&&zn(l[0])&&l[1]==(T|p|x|E)&&!l[4].length&&1==l[9]?h[_n(l[0])].apply(h,l[3]):1==a.length&&zn(a)?h[u]():h.thru(a)}return function(){var t=arguments,r=t[0];if(h&&1==t.length&&eo(r))return h.plant(r).value();for(var s=0,n=i?e[s].apply(this,t):r;++s<i;)n=e[s].call(this,n);return n}})}function Zs(t,e,i,s,a,o,h,u,l,f){var c=e&T,m=e&d,g=e&A,v=e&(p|_),x=e&y,b=g?n:Gs(t);return function d(){for(var A=arguments.length,p=r(A),_=A;_--;)p[_]=arguments[_];if(v)var T=xn(d),E=function(t,e){for(var i=t.length,r=0;i--;)t[i]===e&&++r;return r}(p,T);if(s&&(p=Cs(p,s,a,v)),o&&(p=Xs(p,o,h,v)),A-=E,v&&A<f){var y=vi(p,T);return an(t,e,Zs,d.placeholder,i,p,y,u,l,f-A)}var P=m?i:this,L=g?P[t]:t;return A=p.length,u?p=function(t,e){for(var i=t.length,r=Ii(e.length,i),s=ks(t);r--;){var a=e[r];t[r]=Un(a,i)?s[a]:n}return t}(p,u):x&&A>1&&p.reverse(),c&&l<A&&(p.length=l),this&&this!==ye&&this instanceof d&&(L=b||Gs(L)),L.apply(P,p)}}function $s(t,e){return function(i,r){return function(t,e,i,r){return Vr(t,function(t,s,n){e(r,i(t),s,n)}),r}(i,t,e(r),{})}}function tn(t,e){return function(i,r){var s;if(i===n&&r===n)return e;if(i!==n&&(s=i),r!==n){if(s===n)return r;"string"==typeof i||"string"==typeof r?(i=bs(i),r=bs(r)):(i=xs(i),r=xs(r)),s=t(i,r)}return s}}function en(t){return dn(function(e){return e=We(e,ai(bn())),fs(function(i){var r=this;return t(e,function(t){return Ve(t,r,i)})})})}function rn(t,e){var i=(e=e===n?" ":bs(e)).length;if(i<2)return i?ls(e,t):e;var r=ls(e,wi(t/xi(e)));return gi(e)?Fs(bi(r),0,t).join(""):r.slice(0,t)}function sn(t){return function(e,i,s){return s&&"number"!=typeof s&&qn(e,i,s)&&(i=s=n),e=Po(e),i===n?(i=e,e=0):i=Po(i),function(t,e,i,s){for(var n=-1,a=Vi(wi((e-t)/(i||1)),0),o=r(a);a--;)o[s?a:++n]=t,t+=i;return o}(e,i,s=s===n?e<i?1:-1:Po(s),t)}}function nn(t){return function(e,i){return"string"==typeof e&&"string"==typeof i||(e=So(e),i=So(i)),t(e,i)}}function an(t,e,i,r,s,a,o,h,u,l){var f=e&p;e|=f?x:b,(e&=~(f?b:x))&v||(e&=~(d|A));var c=[t,e,s,f?a:n,f?o:n,f?n:a,f?n:o,h,u,l],m=i.apply(n,c);return zn(t)&&kn(m,c),m.placeholder=r,On(m,t,e)}function on(t){var e=Yt[t];return function(t,i){if(t=So(t),i=null==i?0:Ii(Lo(i),292)){var r=(Mo(t)+"e").split("e");return+((r=(Mo(e(r[0]+"e"+(+r[1]+i)))+"e").split("e"))[0]+"e"+(+r[1]-i))}return e(t)}}var hn=Qi&&1/_i(new Qi([,-0]))[1]==R?function(t){return new Qi(t)}:xh;function un(t){return function(e){var i=Rn(e);return i==O?di(e):i==H?function(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=[t,t]}),i}(e):function(t,e){return We(e,function(e){return[e,t[e]]})}(e,t(e))}}function ln(t,e,i,s,a,h,l,f){var c=e&A;if(!c&&"function"!=typeof t)throw new Jt(o);var m=s?s.length:0;if(m||(e&=~(x|b),s=a=n),l=l===n?l:Vi(Lo(l),0),f=f===n?f:Lo(f),m-=a?a.length:0,e&b){var g=s,y=a;s=a=n}var P=c?n:pn(t),L=[t,e,i,s,a,g,y,h,l,f];if(P&&function(t,e){var i=t[1],r=e[1],s=i|r,n=s<(d|A|T),a=r==T&&i==p||r==T&&i==E&&t[7].length<=e[8]||r==(T|E)&&e[7].length<=e[8]&&i==p;if(!n&&!a)return t;r&d&&(t[2]=e[2],s|=i&d?0:v);var o=e[3];if(o){var h=t[3];t[3]=h?Cs(h,o,e[4]):o,t[4]=h?vi(t[3],u):e[4]}(o=e[5])&&(h=t[5],t[5]=h?Xs(h,o,e[6]):o,t[6]=h?vi(t[5],u):e[6]),(o=e[7])&&(t[7]=o),r&T&&(t[8]=null==t[8]?e[8]:Ii(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=s}(L,P),t=L[0],e=L[1],i=L[2],s=L[3],a=L[4],!(f=L[9]=L[9]===n?c?0:t.length:Vi(L[9]-m,0))&&e&(p|_)&&(e&=~(p|_)),e&&e!=d)R=e==p||e==_?function(t,e,i){var s=Gs(t);return function a(){for(var o=arguments.length,h=r(o),u=o,l=xn(a);u--;)h[u]=arguments[u];var f=o<3&&h[0]!==l&&h[o-1]!==l?[]:vi(h,l);return(o-=f.length)<i?an(t,e,Zs,a.placeholder,n,h,f,n,n,i-o):Ve(this&&this!==ye&&this instanceof a?s:t,this,h)}}(t,e,f):e!=x&&e!=(d|x)||a.length?Zs.apply(n,L):function(t,e,i,s){var n=e&d,a=Gs(t);return function e(){for(var o=-1,h=arguments.length,u=-1,l=s.length,f=r(l+h),c=this&&this!==ye&&this instanceof e?a:t;++u<l;)f[u]=s[u];for(;h--;)f[u++]=arguments[++o];return Ve(c,n?i:this,f)}}(t,e,i,s);else var R=function(t,e,i){var r=e&d,s=Gs(t);return function e(){return(this&&this!==ye&&this instanceof e?s:t).apply(r?i:this,arguments)}}(t,e,i);return On((P?ms:kn)(R,L),t,e)}function fn(t,e,i,r){return t===n||Ja(t,te[i])&&!re.call(r,i)?e:t}function cn(t,e,i,r,s,a){return fo(t)&&fo(e)&&(a.set(e,t),rs(t,e,n,cn,a),a.delete(e)),t}function mn(t){return Ao(t)?n:t}function gn(t,e,i,r,s,a){var o=i&m,h=t.length,u=e.length;if(h!=u&&!(o&&u>h))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var f=-1,c=!0,d=i&g?new cr:n;for(a.set(t,e),a.set(e,t);++f<h;){var A=t[f],v=e[f];if(r)var p=o?r(v,A,f,e,t,a):r(A,v,f,t,e,a);if(p!==n){if(p)continue;c=!1;break}if(d){if(!Ye(e,function(t,e){if(!hi(d,e)&&(A===t||s(A,t,i,r,a)))return d.push(e)})){c=!1;break}}else if(A!==v&&!s(A,v,i,r,a)){c=!1;break}}return a.delete(t),a.delete(e),c}function dn(t){return Wn(Cn(t,n,ia),t+"")}function An(t){return Xr(t,Wo,Pn)}function vn(t){return Xr(t,Oo,Ln)}var pn=Ki?function(t){return Ki.get(t)}:xh;function _n(t){for(var e=t.name+"",i=Gi[e],r=re.call(Gi,e)?i.length:0;r--;){var s=i[r],n=s.func;if(null==n||n==t)return s.name}return e}function xn(t){return(re.call(sr,"placeholder")?sr:t).placeholder}function bn(){var t=sr.iteratee||Ah;return t=t===Ah?Jr:t,arguments.length?t(arguments[0],arguments[1]):t}function Tn(t,e){var i,r,s=t.__data__;return("string"==(r=typeof(i=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i)?s["string"==typeof e?"string":"hash"]:s.map}function En(t){for(var e=Wo(t),i=e.length;i--;){var r=e[i],s=t[r];e[i]=[r,s,In(s)]}return e}function yn(t,e){var i=function(t,e){return null==t?n:t[e]}(t,e);return Hr(i)?i:n}var Pn=Ui?function(t){return null==t?[]:(t=Kt(t),Xe(Ui(t),function(e){return Se.call(t,e)}))}:Rh,Ln=Ui?function(t){for(var e=[];t;)Oe(e,Pn(t)),t=Pe(t);return e}:Rh,Rn=kr;function Sn(t,e,i){for(var r=-1,s=(e=Us(e,t)).length,n=!1;++r<s;){var a=Kn(e[r]);if(!(n=null!=t&&i(t,a)))break;t=t[a]}return n||++r!=s?n:!!(s=null==t?0:t.length)&&lo(s)&&Un(a,s)&&(eo(t)||to(t))}function wn(t){return"function"!=typeof t.constructor||Vn(t)?{}:nr(Pe(t))}function Mn(t){return eo(t)||to(t)||!!(Ke&&t&&t[Ke])}function Un(t,e){var i=typeof t;return!!(e=null==e?S:e)&&("number"==i||"symbol"!=i&&kt.test(t))&&t>-1&&t%1==0&&t<e}function qn(t,e,i){if(!fo(i))return!1;var r=typeof e;return!!("number"==r?ro(i)&&Un(e,i.length):"string"==r&&e in i)&&Ja(i[e],t)}function Fn(t,e){if(eo(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!xo(t))||Et.test(t)||!Tt.test(t)||null!=e&&t in Kt(e)}function zn(t){var e=_n(t),i=sr[e];if("function"!=typeof i||!(e in hr.prototype))return!1;if(t===i)return!0;var r=pn(i);return!!r&&t===r[0]}(Ni&&Rn(new Ni(new ArrayBuffer(1)))!=it||Wi&&Rn(new Wi)!=O||Oi&&"[object Promise]"!=Rn(Oi.resolve())||Qi&&Rn(new Qi)!=H||ji&&Rn(new ji)!=tt)&&(Rn=function(t){var e=kr(t),i=e==Y?t.constructor:n,r=i?Gn(i):"";if(r)switch(r){case Hi:return it;case Ji:return O;case Zi:return"[object Promise]";case $i:return H;case tr:return tt}return e});var Bn=ee?ho:Sh;function Vn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||te)}function In(t){return t==t&&!fo(t)}function Dn(t,e){return function(i){return null!=i&&i[t]===e&&(e!==n||t in Kt(i))}}function Cn(t,e,i){return e=Vi(e===n?t.length-1:e,0),function(){for(var s=arguments,n=-1,a=Vi(s.length-e,0),o=r(a);++n<a;)o[n]=s[e+n];n=-1;for(var h=r(e+1);++n<e;)h[n]=s[n];return h[e]=i(o),Ve(t,this,h)}}function Xn(t,e){return e.length<2?t:Cr(t,ds(e,0,-1))}var kn=Qn(ms),Nn=Si||function(t,e){return ye.setTimeout(t,e)},Wn=Qn(gs);function On(t,e,i){var r=e+"";return Wn(t,function(t,e){var i=e.length;if(!i)return t;var r=i-1;return e[r]=(i>1?"& ":"")+e[r],e=e.join(i>2?", ":" "),t.replace(Mt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return De(z,function(i){var r="_."+i[0];e&i[1]&&!ke(t,r)&&t.push(r)}),t.sort()}(function(t){var e=r.match(Ut);return e?e[1].split(qt):[]}(),i)))}function Qn(t){var e=0,i=0;return function(){var r=Di(),s=L-(r-i);if(i=r,s>0){if(++e>=P)return arguments[0]}else e=0;return t.apply(n,arguments)}}function jn(t,e){var i=-1,r=t.length,s=r-1;for(e=e===n?r:e;++i<e;){var a=us(i,s),o=t[a];t[a]=t[i],t[i]=o}return t.length=e,t}var Yn=function(t){var e=Qa(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(yt,function(t,i,r,s){e.push(r?s.replace(zt,"$1"):i||t)}),e},function(t){return 500===i.size&&i.clear(),t}),i=e.cache;return e}();function Kn(t){if("string"==typeof t||xo(t))return t;var e=t+"";return"0"==e&&1/t==-R?"-0":e}function Gn(t){if(null!=t){try{return ie.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Hn(t){if(t instanceof hr)return t.clone();var e=new or(t.__wrapped__,t.__chain__);return e.__actions__=ks(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Jn=fs(function(t,e){return so(t)?Rr(t,Fr(e,1,so,!0)):[]}),Zn=fs(function(t,e){var i=oa(e);return so(i)&&(i=n),so(t)?Rr(t,Fr(e,1,so,!0),bn(i,2)):[]}),$n=fs(function(t,e){var i=oa(e);return so(i)&&(i=n),so(t)?Rr(t,Fr(e,1,so,!0),n,i):[]});function ta(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var s=null==i?0:Lo(i);return s<0&&(s=Vi(r+s,0)),He(t,bn(e,3),s)}function ea(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var s=r-1;return i!==n&&(s=Lo(i),s=i<0?Vi(r+s,0):Ii(s,r-1)),He(t,bn(e,3),s,!0)}function ia(t){return null!=t&&t.length?Fr(t,1):[]}function ra(t){return t&&t.length?t[0]:n}var sa=fs(function(t){var e=We(t,ws);return e.length&&e[0]===t[0]?Qr(e):[]}),na=fs(function(t){var e=oa(t),i=We(t,ws);return e===oa(i)?e=n:i.pop(),i.length&&i[0]===t[0]?Qr(i,bn(e,2)):[]}),aa=fs(function(t){var e=oa(t),i=We(t,ws);return(e="function"==typeof e?e:n)&&i.pop(),i.length&&i[0]===t[0]?Qr(i,n,e):[]});function oa(t){var e=null==t?0:t.length;return e?t[e-1]:n}var ha=fs(ua);function ua(t,e){return t&&t.length&&e&&e.length?os(t,e):t}var la=dn(function(t,e){var i=null==t?0:t.length,r=Tr(t,e);return hs(t,We(e,function(t){return Un(t,i)?+t:t}).sort(Ds)),r});function fa(t){return null==t?t:ki.call(t)}var ca=fs(function(t){return Ts(Fr(t,1,so,!0))}),ma=fs(function(t){var e=oa(t);return so(e)&&(e=n),Ts(Fr(t,1,so,!0),bn(e,2))}),ga=fs(function(t){var e=oa(t);return e="function"==typeof e?e:n,Ts(Fr(t,1,so,!0),n,e)});function da(t){if(!t||!t.length)return[];var e=0;return t=Xe(t,function(t){if(so(t))return e=Vi(t.length,e),!0}),ni(e,function(e){return We(t,ei(e))})}function Aa(t,e){if(!t||!t.length)return[];var i=da(t);return null==e?i:We(i,function(t){return Ve(e,n,t)})}var va=fs(function(t,e){return so(t)?Rr(t,e):[]}),pa=fs(function(t){return Rs(Xe(t,so))}),_a=fs(function(t){var e=oa(t);return so(e)&&(e=n),Rs(Xe(t,so),bn(e,2))}),xa=fs(function(t){var e=oa(t);return e="function"==typeof e?e:n,Rs(Xe(t,so),n,e)}),ba=fs(da),Ta=fs(function(t){var e=t.length,i=e>1?t[e-1]:n;return Aa(t,i="function"==typeof i?(t.pop(),i):n)});function Ea(t){var e=sr(t);return e.__chain__=!0,e}function ya(t,e){return e(t)}var Pa=dn(function(t){var e=t.length,i=e?t[0]:0,r=this.__wrapped__,s=function(e){return Tr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof hr&&Un(i)?((r=r.slice(i,+i+(e?1:0))).__actions__.push({func:ya,args:[s],thisArg:n}),new or(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(n),t})):this.thru(s)}),La=Ws(function(t,e,i){re.call(t,i)?++t[i]:br(t,i,1)}),Ra=Hs(ta),Sa=Hs(ea);function wa(t,e){return(eo(t)?De:Sr)(t,bn(e,3))}function Ma(t,e){return(eo(t)?function(t,e){for(var i=null==t?0:t.length;i--&&!1!==e(t[i],i,t););return t}:wr)(t,bn(e,3))}var Ua=Ws(function(t,e,i){re.call(t,i)?t[i].push(e):br(t,i,[e])}),qa=fs(function(t,e,i){var s=-1,n="function"==typeof e,a=ro(t)?r(t.length):[];return Sr(t,function(t){a[++s]=n?Ve(e,t,i):jr(t,e,i)}),a}),Fa=Ws(function(t,e,i){br(t,i,e)});function za(t,e){return(eo(t)?We:ts)(t,bn(e,3))}var Ba=Ws(function(t,e,i){t[i?0:1].push(e)},function(){return[[],[]]}),Va=fs(function(t,e){if(null==t)return[];var i=e.length;return i>1&&qn(t,e[0],e[1])?e=[]:i>2&&qn(e[0],e[1],e[2])&&(e=[e[0]]),ns(t,Fr(e,1),[])}),Ia=Ri||function(){return ye.Date.now()};function Da(t,e,i){return e=i?n:e,e=t&&null==e?t.length:e,ln(t,T,n,n,n,n,e)}function Ca(t,e){var i;if("function"!=typeof e)throw new Jt(o);return t=Lo(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=n),i}}var Xa=fs(function(t,e,i){var r=d;if(i.length){var s=vi(i,xn(Xa));r|=x}return ln(t,r,e,i,s)}),ka=fs(function(t,e,i){var r=d|A;if(i.length){var s=vi(i,xn(ka));r|=x}return ln(e,r,t,i,s)});function Na(t,e,i){var r,s,a,h,u,l,f=0,c=!1,m=!1,g=!0;if("function"!=typeof t)throw new Jt(o);function d(e){var i=r,a=s;return r=s=n,f=e,h=t.apply(a,i)}function A(t){var i=t-l;return l===n||i>=e||i<0||m&&t-f>=a}function v(){var t=Ia();if(A(t))return p(t);u=Nn(v,function(t){var i=e-(t-l);return m?Ii(i,a-(t-f)):i}(t))}function p(t){return u=n,g&&r?d(t):(r=s=n,h)}function _(){var t=Ia(),i=A(t);if(r=arguments,s=this,l=t,i){if(u===n)return function(t){return f=t,u=Nn(v,e),c?d(t):h}(l);if(m)return u=Nn(v,e),d(l)}return u===n&&(u=Nn(v,e)),h}return e=So(e)||0,fo(i)&&(c=!!i.leading,a=(m="maxWait"in i)?Vi(So(i.maxWait)||0,e):a,g="trailing"in i?!!i.trailing:g),_.cancel=function(){u!==n&&zs(u),f=0,r=l=s=u=n},_.flush=function(){return u===n?h:p(Ia())},_}var Wa=fs(function(t,e){return Lr(t,1,e)}),Oa=fs(function(t,e,i){return Lr(t,So(e)||0,i)});function Qa(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Jt(o);var i=function(){var r=arguments,s=e?e.apply(this,r):r[0],n=i.cache;if(n.has(s))return n.get(s);var a=t.apply(this,r);return i.cache=n.set(s,a)||n,a};return i.cache=new(Qa.Cache||fr),i}function ja(t){if("function"!=typeof t)throw new Jt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Qa.Cache=fr;var Ya=qs(function(t,e){var i=(e=1==e.length&&eo(e[0])?We(e[0],ai(bn())):We(Fr(e,1),ai(bn()))).length;return fs(function(r){for(var s=-1,n=Ii(r.length,i);++s<n;)r[s]=e[s].call(this,r[s]);return Ve(t,this,r)})}),Ka=fs(function(t,e){var i=vi(e,xn(Ka));return ln(t,x,n,e,i)}),Ga=fs(function(t,e){var i=vi(e,xn(Ga));return ln(t,b,n,e,i)}),Ha=dn(function(t,e){return ln(t,E,n,n,n,e)});function Ja(t,e){return t===e||t!=t&&e!=e}var Za=nn(Nr),$a=nn(function(t,e){return t>=e}),to=Yr(function(){return arguments}())?Yr:function(t){return co(t)&&re.call(t,"callee")&&!Se.call(t,"callee")},eo=r.isArray,io=Me?ai(Me):function(t){return co(t)&&kr(t)==et};function ro(t){return null!=t&&lo(t.length)&&!ho(t)}function so(t){return co(t)&&ro(t)}var no=qi||Sh,ao=Ue?ai(Ue):function(t){return co(t)&&kr(t)==C};function oo(t){if(!co(t))return!1;var e=kr(t);return e==k||e==X||"string"==typeof t.message&&"string"==typeof t.name&&!Ao(t)}function ho(t){if(!fo(t))return!1;var e=kr(t);return e==N||e==W||e==I||e==K}function uo(t){return"number"==typeof t&&t==Lo(t)}function lo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=S}function fo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function co(t){return null!=t&&"object"==typeof t}var mo=qe?ai(qe):function(t){return co(t)&&Rn(t)==O};function go(t){return"number"==typeof t||co(t)&&kr(t)==Q}function Ao(t){if(!co(t)||kr(t)!=Y)return!1;var e=Pe(t);if(null===e)return!0;var i=re.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&ie.call(i)==oe}var vo=Fe?ai(Fe):function(t){return co(t)&&kr(t)==G},po=ze?ai(ze):function(t){return co(t)&&Rn(t)==H};function _o(t){return"string"==typeof t||!eo(t)&&co(t)&&kr(t)==J}function xo(t){return"symbol"==typeof t||co(t)&&kr(t)==Z}var bo=Be?ai(Be):function(t){return co(t)&&lo(t.length)&&!!ve[kr(t)]},To=nn($r),Eo=nn(function(t,e){return t<=e});function yo(t){if(!t)return[];if(ro(t))return _o(t)?bi(t):ks(t);if(ii&&t[ii])return function(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}(t[ii]());var e=Rn(t);return(e==O?di:e==H?_i:Zo)(t)}function Po(t){return t?(t=So(t))===R||t===-R?(t<0?-1:1)*w:t==t?t:0:0===t?t:0}function Lo(t){var e=Po(t),i=e%1;return e==e?i?e-i:e:0}function Ro(t){return t?Er(Lo(t),0,U):0}function So(t){if("number"==typeof t)return t;if(xo(t))return M;if(fo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=fo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Rt,"");var i=Dt.test(t);return i||Xt.test(t)?be(t.slice(2),i?2:8):It.test(t)?M:+t}function wo(t){return Ns(t,Oo(t))}function Mo(t){return null==t?"":bs(t)}var Uo=Os(function(t,e){if(Vn(e)||ro(e))Ns(e,Wo(e),t);else for(var i in e)re.call(e,i)&&vr(t,i,e[i])}),qo=Os(function(t,e){Ns(e,Oo(e),t)}),Fo=Os(function(t,e,i,r){Ns(e,Oo(e),t,r)}),zo=Os(function(t,e,i,r){Ns(e,Wo(e),t,r)}),Bo=dn(Tr),Vo=fs(function(t,e){t=Kt(t);var i=-1,r=e.length,s=r>2?e[2]:n;for(s&&qn(e[0],e[1],s)&&(r=1);++i<r;)for(var a=e[i],o=Oo(a),h=-1,u=o.length;++h<u;){var l=o[h],f=t[l];(f===n||Ja(f,te[l])&&!re.call(t,l))&&(t[l]=a[l])}return t}),Io=fs(function(t){return t.push(n,cn),Ve(jo,n,t)});function Do(t,e,i){var r=null==t?n:Cr(t,e);return r===n?i:r}function Co(t,e){return null!=t&&Sn(t,e,Or)}var Xo=$s(function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=ae.call(e)),t[e]=i},ch(dh)),ko=$s(function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=ae.call(e)),re.call(t,e)?t[e].push(i):t[e]=[i]},bn),No=fs(jr);function Wo(t){return ro(t)?gr(t):Zr(t)}function Oo(t){return ro(t)?gr(t,!0):function(t){if(!fo(t))return function(t){var e=[];if(null!=t)for(var i in Kt(t))e.push(i);return e}(t);var e=Vn(t),i=[];for(var r in t)("constructor"!=r||!e&&re.call(t,r))&&i.push(r);return i}(t)}var Qo=Os(function(t,e,i){rs(t,e,i)}),jo=Os(function(t,e,i,r){rs(t,e,i,r)}),Yo=dn(function(t,e){var i={};if(null==t)return i;var r=!1;e=We(e,function(e){return e=Us(e,t),r||(r=e.length>1),e}),Ns(t,vn(t),i),r&&(i=yr(i,l|f|c,mn));for(var s=e.length;s--;)Es(i,e[s]);return i}),Ko=dn(function(t,e){return null==t?{}:function(t,e){return as(t,e,function(e,i){return Co(t,i)})}(t,e)});function Go(t,e){if(null==t)return{};var i=We(vn(t),function(t){return[t]});return e=bn(e),as(t,i,function(t,i){return e(t,i[0])})}var Ho=un(Wo),Jo=un(Oo);function Zo(t){return null==t?[]:oi(t,Wo(t))}var $o=Ks(function(t,e,i){return e=e.toLowerCase(),t+(i?th(e):e)});function th(t){return hh(Mo(t).toLowerCase())}function eh(t){return(t=Mo(t))&&t.replace(Nt,fi).replace(le,"")}var ih=Ks(function(t,e,i){return t+(i?"-":"")+e.toLowerCase()}),rh=Ks(function(t,e,i){return t+(i?" ":"")+e.toLowerCase()}),sh=Ys("toLowerCase"),nh=Ks(function(t,e,i){return t+(i?"_":"")+e.toLowerCase()}),ah=Ks(function(t,e,i){return t+(i?" ":"")+hh(e)}),oh=Ks(function(t,e,i){return t+(i?" ":"")+e.toUpperCase()}),hh=Ys("toUpperCase");function uh(t,e,i){return t=Mo(t),(e=i?n:e)===n?function(t){return ge.test(t)}(t)?function(t){return t.match(ce)||[]}(t):function(t){return t.match(Ft)||[]}(t):t.match(e)||[]}var lh=fs(function(t,e){try{return Ve(t,n,e)}catch(t){return oo(t)?t:new Qt(t)}}),fh=dn(function(t,e){return De(e,function(e){e=Kn(e),br(t,e,Xa(t[e],t))}),t});function ch(t){return function(){return t}}var mh=Js(),gh=Js(!0);function dh(t){return t}function Ah(t){return Jr("function"==typeof t?t:yr(t,l))}var vh=fs(function(t,e){return function(i){return jr(i,t,e)}}),ph=fs(function(t,e){return function(i){return jr(t,i,e)}});function _h(t,e,i){var r=Wo(e),s=Dr(e,r);null!=i||fo(e)&&(s.length||!r.length)||(i=e,e=t,t=this,s=Dr(e,Wo(e)));var n=!(fo(i)&&"chain"in i&&!i.chain),a=ho(t);return De(s,function(i){var r=e[i];t[i]=r,a&&(t.prototype[i]=function(){var e=this.__chain__;if(n||e){var i=t(this.__wrapped__);return(i.__actions__=ks(this.__actions__)).push({func:r,args:arguments,thisArg:t}),i.__chain__=e,i}return r.apply(t,Oe([this.value()],arguments))})}),t}function xh(){}var bh=en(We),Th=en(Ce),Eh=en(Ye);function yh(t){return Fn(t)?ei(Kn(t)):function(t){return function(e){return Cr(e,t)}}(t)}var Ph=sn(),Lh=sn(!0);function Rh(){return[]}function Sh(){return!1}var wh,Mh=tn(function(t,e){return t+e},0),Uh=on("ceil"),qh=tn(function(t,e){return t/e},1),Fh=on("floor"),zh=tn(function(t,e){return t*e},1),Bh=on("round"),Vh=tn(function(t,e){return t-e},0);return sr.after=function(t,e){if("function"!=typeof e)throw new Jt(o);return t=Lo(t),function(){if(--t<1)return e.apply(this,arguments)}},sr.ary=Da,sr.assign=Uo,sr.assignIn=qo,sr.assignInWith=Fo,sr.assignWith=zo,sr.at=Bo,sr.before=Ca,sr.bind=Xa,sr.bindAll=fh,sr.bindKey=ka,sr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return eo(t)?t:[t]},sr.chain=Ea,sr.chunk=function(t,e,i){e=(i?qn(t,e,i):e===n)?1:Vi(Lo(e),0);var s=null==t?0:t.length;if(!s||e<1)return[];for(var a=0,o=0,h=r(wi(s/e));a<s;)h[o++]=ds(t,a,a+=e);return h},sr.compact=function(t){for(var e=-1,i=null==t?0:t.length,r=0,s=[];++e<i;){var n=t[e];n&&(s[r++]=n)}return s},sr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),i=arguments[0],s=t;s--;)e[s-1]=arguments[s];return Oe(eo(i)?ks(i):[i],Fr(e,1))},sr.cond=function(t){var e=null==t?0:t.length,i=bn();return t=e?We(t,function(t){if("function"!=typeof t[1])throw new Jt(o);return[i(t[0]),t[1]]}):[],fs(function(i){for(var r=-1;++r<e;){var s=t[r];if(Ve(s[0],this,i))return Ve(s[1],this,i)}})},sr.conforms=function(t){return function(t){var e=Wo(t);return function(i){return Pr(i,t,e)}}(yr(t,l))},sr.constant=ch,sr.countBy=La,sr.create=function(t,e){var i=nr(t);return null==e?i:xr(i,e)},sr.curry=function t(e,i,r){var s=ln(e,p,n,n,n,n,n,i=r?n:i);return s.placeholder=t.placeholder,s},sr.curryRight=function t(e,i,r){var s=ln(e,_,n,n,n,n,n,i=r?n:i);return s.placeholder=t.placeholder,s},sr.debounce=Na,sr.defaults=Vo,sr.defaultsDeep=Io,sr.defer=Wa,sr.delay=Oa,sr.difference=Jn,sr.differenceBy=Zn,sr.differenceWith=$n,sr.drop=function(t,e,i){var r=null==t?0:t.length;return r?ds(t,(e=i||e===n?1:Lo(e))<0?0:e,r):[]},sr.dropRight=function(t,e,i){var r=null==t?0:t.length;return r?ds(t,0,(e=r-(e=i||e===n?1:Lo(e)))<0?0:e):[]},sr.dropRightWhile=function(t,e){return t&&t.length?Ps(t,bn(e,3),!0,!0):[]},sr.dropWhile=function(t,e){return t&&t.length?Ps(t,bn(e,3),!0):[]},sr.fill=function(t,e,i,r){var s=null==t?0:t.length;return s?(i&&"number"!=typeof i&&qn(t,e,i)&&(i=0,r=s),function(t,e,i,r){var s=t.length;for((i=Lo(i))<0&&(i=-i>s?0:s+i),(r=r===n||r>s?s:Lo(r))<0&&(r+=s),r=i>r?0:Ro(r);i<r;)t[i++]=e;return t}(t,e,i,r)):[]},sr.filter=function(t,e){return(eo(t)?Xe:qr)(t,bn(e,3))},sr.flatMap=function(t,e){return Fr(za(t,e),1)},sr.flatMapDeep=function(t,e){return Fr(za(t,e),R)},sr.flatMapDepth=function(t,e,i){return i=i===n?1:Lo(i),Fr(za(t,e),i)},sr.flatten=ia,sr.flattenDeep=function(t){return null!=t&&t.length?Fr(t,R):[]},sr.flattenDepth=function(t,e){return null!=t&&t.length?Fr(t,e=e===n?1:Lo(e)):[]},sr.flip=function(t){return ln(t,y)},sr.flow=mh,sr.flowRight=gh,sr.fromPairs=function(t){for(var e=-1,i=null==t?0:t.length,r={};++e<i;){var s=t[e];r[s[0]]=s[1]}return r},sr.functions=function(t){return null==t?[]:Dr(t,Wo(t))},sr.functionsIn=function(t){return null==t?[]:Dr(t,Oo(t))},sr.groupBy=Ua,sr.initial=function(t){return null!=t&&t.length?ds(t,0,-1):[]},sr.intersection=sa,sr.intersectionBy=na,sr.intersectionWith=aa,sr.invert=Xo,sr.invertBy=ko,sr.invokeMap=qa,sr.iteratee=Ah,sr.keyBy=Fa,sr.keys=Wo,sr.keysIn=Oo,sr.map=za,sr.mapKeys=function(t,e){var i={};return e=bn(e,3),Vr(t,function(t,r,s){br(i,e(t,r,s),t)}),i},sr.mapValues=function(t,e){var i={};return e=bn(e,3),Vr(t,function(t,r,s){br(i,r,e(t,r,s))}),i},sr.matches=function(t){return es(yr(t,l))},sr.matchesProperty=function(t,e){return is(t,yr(e,l))},sr.memoize=Qa,sr.merge=Qo,sr.mergeWith=jo,sr.method=vh,sr.methodOf=ph,sr.mixin=_h,sr.negate=ja,sr.nthArg=function(t){return t=Lo(t),fs(function(e){return ss(e,t)})},sr.omit=Yo,sr.omitBy=function(t,e){return Go(t,ja(bn(e)))},sr.once=function(t){return Ca(2,t)},sr.orderBy=function(t,e,i,r){return null==t?[]:(eo(e)||(e=null==e?[]:[e]),eo(i=r?n:i)||(i=null==i?[]:[i]),ns(t,e,i))},sr.over=bh,sr.overArgs=Ya,sr.overEvery=Th,sr.overSome=Eh,sr.partial=Ka,sr.partialRight=Ga,sr.partition=Ba,sr.pick=Ko,sr.pickBy=Go,sr.property=yh,sr.propertyOf=function(t){return function(e){return null==t?n:Cr(t,e)}},sr.pull=ha,sr.pullAll=ua,sr.pullAllBy=function(t,e,i){return t&&t.length&&e&&e.length?os(t,e,bn(i,2)):t},sr.pullAllWith=function(t,e,i){return t&&t.length&&e&&e.length?os(t,e,n,i):t},sr.pullAt=la,sr.range=Ph,sr.rangeRight=Lh,sr.rearg=Ha,sr.reject=function(t,e){return(eo(t)?Xe:qr)(t,ja(bn(e,3)))},sr.remove=function(t,e){var i=[];if(!t||!t.length)return i;var r=-1,s=[],n=t.length;for(e=bn(e,3);++r<n;){var a=t[r];e(a,r,t)&&(i.push(a),s.push(r))}return hs(t,s),i},sr.rest=function(t,e){if("function"!=typeof t)throw new Jt(o);return fs(t,e=e===n?e:Lo(e))},sr.reverse=fa,sr.sampleSize=function(t,e,i){return e=(i?qn(t,e,i):e===n)?1:Lo(e),(eo(t)?function(t,e){return jn(ks(t),Er(e,0,t.length))}:function(t,e){var i=Zo(t);return jn(i,Er(e,0,i.length))})(t,e)},sr.set=function(t,e,i){return null==t?t:cs(t,e,i)},sr.setWith=function(t,e,i,r){return r="function"==typeof r?r:n,null==t?t:cs(t,e,i,r)},sr.shuffle=function(t){return(eo(t)?function(t){return jn(ks(t))}:function(t){return jn(Zo(t))})(t)},sr.slice=function(t,e,i){var r=null==t?0:t.length;return r?(i&&"number"!=typeof i&&qn(t,e,i)?(e=0,i=r):(e=null==e?0:Lo(e),i=i===n?r:Lo(i)),ds(t,e,i)):[]},sr.sortBy=Va,sr.sortedUniq=function(t){return t&&t.length?_s(t):[]},sr.sortedUniqBy=function(t,e){return t&&t.length?_s(t,bn(e,2)):[]},sr.split=function(t,e,i){return i&&"number"!=typeof i&&qn(t,e,i)&&(e=i=n),(i=i===n?U:i>>>0)?(t=Mo(t))&&("string"==typeof e||null!=e&&!vo(e))&&!(e=bs(e))&&gi(t)?Fs(bi(t),0,i):t.split(e,i):[]},sr.spread=function(t,e){if("function"!=typeof t)throw new Jt(o);return e=null==e?0:Vi(Lo(e),0),fs(function(i){var r=i[e],s=Fs(i,0,e);return r&&Oe(s,r),Ve(t,this,s)})},sr.tail=function(t){var e=null==t?0:t.length;return e?ds(t,1,e):[]},sr.take=function(t,e,i){return t&&t.length?ds(t,0,(e=i||e===n?1:Lo(e))<0?0:e):[]},sr.takeRight=function(t,e,i){var r=null==t?0:t.length;return r?ds(t,(e=r-(e=i||e===n?1:Lo(e)))<0?0:e,r):[]},sr.takeRightWhile=function(t,e){return t&&t.length?Ps(t,bn(e,3),!1,!0):[]},sr.takeWhile=function(t,e){return t&&t.length?Ps(t,bn(e,3)):[]},sr.tap=function(t,e){return e(t),t},sr.throttle=function(t,e,i){var r=!0,s=!0;if("function"!=typeof t)throw new Jt(o);return fo(i)&&(r="leading"in i?!!i.leading:r,s="trailing"in i?!!i.trailing:s),Na(t,e,{leading:r,maxWait:e,trailing:s})},sr.thru=ya,sr.toArray=yo,sr.toPairs=Ho,sr.toPairsIn=Jo,sr.toPath=function(t){return eo(t)?We(t,Kn):xo(t)?[t]:ks(Yn(Mo(t)))},sr.toPlainObject=wo,sr.transform=function(t,e,i){var r=eo(t),s=r||no(t)||bo(t);if(e=bn(e,4),null==i){var n=t&&t.constructor;i=s?r?new n:[]:fo(t)&&ho(n)?nr(Pe(t)):{}}return(s?De:Vr)(t,function(t,r,s){return e(i,t,r,s)}),i},sr.unary=function(t){return Da(t,1)},sr.union=ca,sr.unionBy=ma,sr.unionWith=ga,sr.uniq=function(t){return t&&t.length?Ts(t):[]},sr.uniqBy=function(t,e){return t&&t.length?Ts(t,bn(e,2)):[]},sr.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?Ts(t,n,e):[]},sr.unset=function(t,e){return null==t||Es(t,e)},sr.unzip=da,sr.unzipWith=Aa,sr.update=function(t,e,i){return null==t?t:ys(t,e,Ms(i))},sr.updateWith=function(t,e,i,r){return r="function"==typeof r?r:n,null==t?t:ys(t,e,Ms(i),r)},sr.values=Zo,sr.valuesIn=function(t){return null==t?[]:oi(t,Oo(t))},sr.without=va,sr.words=uh,sr.wrap=function(t,e){return Ka(Ms(e),t)},sr.xor=pa,sr.xorBy=_a,sr.xorWith=xa,sr.zip=ba,sr.zipObject=function(t,e){return Ss(t||[],e||[],vr)},sr.zipObjectDeep=function(t,e){return Ss(t||[],e||[],cs)},sr.zipWith=Ta,sr.entries=Ho,sr.entriesIn=Jo,sr.extend=qo,sr.extendWith=Fo,_h(sr,sr),sr.add=Mh,sr.attempt=lh,sr.camelCase=$o,sr.capitalize=th,sr.ceil=Uh,sr.clamp=function(t,e,i){return i===n&&(i=e,e=n),i!==n&&(i=(i=So(i))==i?i:0),e!==n&&(e=(e=So(e))==e?e:0),Er(So(t),e,i)},sr.clone=function(t){return yr(t,c)},sr.cloneDeep=function(t){return yr(t,l|c)},sr.cloneDeepWith=function(t,e){return yr(t,l|c,e="function"==typeof e?e:n)},sr.cloneWith=function(t,e){return yr(t,c,e="function"==typeof e?e:n)},sr.conformsTo=function(t,e){return null==e||Pr(t,e,Wo(e))},sr.deburr=eh,sr.defaultTo=function(t,e){return null==t||t!=t?e:t},sr.divide=qh,sr.endsWith=function(t,e,i){t=Mo(t),e=bs(e);var r=t.length,s=i=i===n?r:Er(Lo(i),0,r);return(i-=e.length)>=0&&t.slice(i,s)==e},sr.eq=Ja,sr.escape=function(t){return(t=Mo(t))&&pt.test(t)?t.replace(At,ci):t},sr.escapeRegExp=function(t){return(t=Mo(t))&&Lt.test(t)?t.replace(Pt,"\\$&"):t},sr.every=function(t,e,i){var r=eo(t)?Ce:Mr;return i&&qn(t,e,i)&&(e=n),r(t,bn(e,3))},sr.find=Ra,sr.findIndex=ta,sr.findKey=function(t,e){return Ge(t,bn(e,3),Vr)},sr.findLast=Sa,sr.findLastIndex=ea,sr.findLastKey=function(t,e){return Ge(t,bn(e,3),Ir)},sr.floor=Fh,sr.forEach=wa,sr.forEachRight=Ma,sr.forIn=function(t,e){return null==t?t:zr(t,bn(e,3),Oo)},sr.forInRight=function(t,e){return null==t?t:Br(t,bn(e,3),Oo)},sr.forOwn=function(t,e){return t&&Vr(t,bn(e,3))},sr.forOwnRight=function(t,e){return t&&Ir(t,bn(e,3))},sr.get=Do,sr.gt=Za,sr.gte=$a,sr.has=function(t,e){return null!=t&&Sn(t,e,Wr)},sr.hasIn=Co,sr.head=ra,sr.identity=dh,sr.includes=function(t,e,i,r){t=ro(t)?t:Zo(t),i=i&&!r?Lo(i):0;var s=t.length;return i<0&&(i=Vi(s+i,0)),_o(t)?i<=s&&t.indexOf(e,i)>-1:!!s&&Je(t,e,i)>-1},sr.indexOf=function(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var s=null==i?0:Lo(i);return s<0&&(s=Vi(r+s,0)),Je(t,e,s)},sr.inRange=function(t,e,i){return e=Po(e),i===n?(i=e,e=0):i=Po(i),function(t,e,i){return t>=Ii(e,i)&&t<Vi(e,i)}(t=So(t),e,i)},sr.invoke=No,sr.isArguments=to,sr.isArray=eo,sr.isArrayBuffer=io,sr.isArrayLike=ro,sr.isArrayLikeObject=so,sr.isBoolean=function(t){return!0===t||!1===t||co(t)&&kr(t)==D},sr.isBuffer=no,sr.isDate=ao,sr.isElement=function(t){return co(t)&&1===t.nodeType&&!Ao(t)},sr.isEmpty=function(t){if(null==t)return!0;if(ro(t)&&(eo(t)||"string"==typeof t||"function"==typeof t.splice||no(t)||bo(t)||to(t)))return!t.length;var e=Rn(t);if(e==O||e==H)return!t.size;if(Vn(t))return!Zr(t).length;for(var i in t)if(re.call(t,i))return!1;return!0},sr.isEqual=function(t,e){return Kr(t,e)},sr.isEqualWith=function(t,e,i){var r=(i="function"==typeof i?i:n)?i(t,e):n;return r===n?Kr(t,e,n,i):!!r},sr.isError=oo,sr.isFinite=function(t){return"number"==typeof t&&Fi(t)},sr.isFunction=ho,sr.isInteger=uo,sr.isLength=lo,sr.isMap=mo,sr.isMatch=function(t,e){return t===e||Gr(t,e,En(e))},sr.isMatchWith=function(t,e,i){return i="function"==typeof i?i:n,Gr(t,e,En(e),i)},sr.isNaN=function(t){return go(t)&&t!=+t},sr.isNative=function(t){if(Bn(t))throw new Qt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Hr(t)},sr.isNil=function(t){return null==t},sr.isNull=function(t){return null===t},sr.isNumber=go,sr.isObject=fo,sr.isObjectLike=co,sr.isPlainObject=Ao,sr.isRegExp=vo,sr.isSafeInteger=function(t){return uo(t)&&t>=-S&&t<=S},sr.isSet=po,sr.isString=_o,sr.isSymbol=xo,sr.isTypedArray=bo,sr.isUndefined=function(t){return t===n},sr.isWeakMap=function(t){return co(t)&&Rn(t)==tt},sr.isWeakSet=function(t){return co(t)&&"[object WeakSet]"==kr(t)},sr.join=function(t,e){return null==t?"":zi.call(t,e)},sr.kebabCase=ih,sr.last=oa,sr.lastIndexOf=function(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var s=r;return i!==n&&(s=(s=Lo(i))<0?Vi(r+s,0):Ii(s,r-1)),e==e?function(t,e,i){for(var r=s+1;r--;)if(t[r]===e)return r;return r}(t,e):He(t,$e,s,!0)},sr.lowerCase=rh,sr.lowerFirst=sh,sr.lt=To,sr.lte=Eo,sr.max=function(t){return t&&t.length?Ur(t,dh,Nr):n},sr.maxBy=function(t,e){return t&&t.length?Ur(t,bn(e,2),Nr):n},sr.mean=function(t){return ti(t,dh)},sr.meanBy=function(t,e){return ti(t,bn(e,2))},sr.min=function(t){return t&&t.length?Ur(t,dh,$r):n},sr.minBy=function(t,e){return t&&t.length?Ur(t,bn(e,2),$r):n},sr.stubArray=Rh,sr.stubFalse=Sh,sr.stubObject=function(){return{}},sr.stubString=function(){return""},sr.stubTrue=function(){return!0},sr.multiply=zh,sr.nth=function(t,e){return t&&t.length?ss(t,Lo(e)):n},sr.noConflict=function(){return ye._===this&&(ye._=he),this},sr.noop=xh,sr.now=Ia,sr.pad=function(t,e,i){t=Mo(t);var r=(e=Lo(e))?xi(t):0;if(!e||r>=e)return t;var s=(e-r)/2;return rn(Mi(s),i)+t+rn(wi(s),i)},sr.padEnd=function(t,e,i){t=Mo(t);var r=(e=Lo(e))?xi(t):0;return e&&r<e?t+rn(e-r,i):t},sr.padStart=function(t,e,i){t=Mo(t);var r=(e=Lo(e))?xi(t):0;return e&&r<e?rn(e-r,i)+t:t},sr.parseInt=function(t,e,i){return i||null==e?e=0:e&&(e=+e),Ci(Mo(t).replace(St,""),e||0)},sr.random=function(t,e,i){if(i&&"boolean"!=typeof i&&qn(t,e,i)&&(e=i=n),i===n&&("boolean"==typeof e?(i=e,e=n):"boolean"==typeof t&&(i=t,t=n)),t===n&&e===n?(t=0,e=1):(t=Po(t),e===n?(e=t,t=0):e=Po(e)),t>e){var r=t;t=e,e=r}if(i||t%1||e%1){var s=Xi();return Ii(t+s*(e-t+xe("1e-"+((s+"").length-1))),e)}return us(t,e)},sr.reduce=function(t,e,i){var r=eo(t)?Qe:ri,s=arguments.length<3;return r(t,bn(e,4),i,s,Sr)},sr.reduceRight=function(t,e,i){var r=eo(t)?je:ri,s=arguments.length<3;return r(t,bn(e,4),i,s,wr)},sr.repeat=function(t,e,i){return e=(i?qn(t,e,i):e===n)?1:Lo(e),ls(Mo(t),e)},sr.replace=function(){var t=arguments,e=Mo(t[0]);return t.length<3?e:e.replace(t[1],t[2])},sr.result=function(t,e,i){var r=-1,s=(e=Us(e,t)).length;for(s||(s=1,t=n);++r<s;){var a=null==t?n:t[Kn(e[r])];a===n&&(r=s,a=i),t=ho(a)?a.call(t):a}return t},sr.round=Bh,sr.runInContext=t,sr.sample=function(t){return(eo(t)?dr:function(t){return dr(Zo(t))})(t)},sr.size=function(t){if(null==t)return 0;if(ro(t))return _o(t)?xi(t):t.length;var e=Rn(t);return e==O||e==H?t.size:Zr(t).length},sr.snakeCase=nh,sr.some=function(t,e,i){var r=eo(t)?Ye:As;return i&&qn(t,e,i)&&(e=n),r(t,bn(e,3))},sr.sortedIndex=function(t,e){return vs(t,e)},sr.sortedIndexBy=function(t,e,i){return ps(t,e,bn(i,2))},sr.sortedIndexOf=function(t,e){var i=null==t?0:t.length;if(i){var r=vs(t,e);if(r<i&&Ja(t[r],e))return r}return-1},sr.sortedLastIndex=function(t,e){return vs(t,e,!0)},sr.sortedLastIndexBy=function(t,e,i){return ps(t,e,bn(i,2),!0)},sr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var i=vs(t,e,!0)-1;if(Ja(t[i],e))return i}return-1},sr.startCase=ah,sr.startsWith=function(t,e,i){return t=Mo(t),i=null==i?0:Er(Lo(i),0,t.length),e=bs(e),t.slice(i,i+e.length)==e},sr.subtract=Vh,sr.sum=function(t){return t&&t.length?si(t,dh):0},sr.sumBy=function(t,e){return t&&t.length?si(t,bn(e,2)):0},sr.template=function(t,e,i){var r=sr.templateSettings;i&&qn(t,e,i)&&(e=n),t=Mo(t),e=Fo({},e,r,fn);var s,a,o=Fo({},e.imports,r.imports,fn),h=Wo(o),u=oi(o,h),l=0,f=e.interpolate||Wt,c="__p += '",m=Gt((e.escape||Wt).source+"|"+f.source+"|"+(f===bt?Bt:Wt).source+"|"+(e.evaluate||Wt).source+"|$","g"),g="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Ae+"]")+"\n";t.replace(m,function(e,i,r,n,o,h){return r||(r=n),c+=t.slice(l,h).replace(Ot,mi),i&&(s=!0,c+="' +\n__e("+i+") +\n'"),o&&(a=!0,c+="';\n"+o+";\n__p += '"),r&&(c+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=h+e.length,e}),c+="';\n";var d=e.variable;d||(c="with (obj) {\n"+c+"\n}\n"),c=(a?c.replace(ct,""):c).replace(mt,"$1").replace(gt,"$1;"),c="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var A=lh(function(){return jt(h,g+"return "+c).apply(n,u)});if(A.source=c,oo(A))throw A;return A},sr.times=function(t,e){if((t=Lo(t))<1||t>S)return[];var i=U,r=Ii(t,U);e=bn(e),t-=U;for(var s=ni(r,e);++i<t;)e(i);return s},sr.toFinite=Po,sr.toInteger=Lo,sr.toLength=Ro,sr.toLower=function(t){return Mo(t).toLowerCase()},sr.toNumber=So,sr.toSafeInteger=function(t){return t?Er(Lo(t),-S,S):0===t?t:0},sr.toString=Mo,sr.toUpper=function(t){return Mo(t).toUpperCase()},sr.trim=function(t,e,i){if((t=Mo(t))&&(i||e===n))return t.replace(Rt,"");if(!t||!(e=bs(e)))return t;var r=bi(t),s=bi(e);return Fs(r,ui(r,s),li(r,s)+1).join("")},sr.trimEnd=function(t,e,i){if((t=Mo(t))&&(i||e===n))return t.replace(wt,"");if(!t||!(e=bs(e)))return t;var r=bi(t);return Fs(r,0,li(r,bi(e))+1).join("")},sr.trimStart=function(t,e,i){if((t=Mo(t))&&(i||e===n))return t.replace(St,"");if(!t||!(e=bs(e)))return t;var r=bi(t);return Fs(r,ui(r,bi(e))).join("")},sr.truncate=function(t,e){var i=30,r="...";if(fo(e)){var s="separator"in e?e.separator:s;i="length"in e?Lo(e.length):i,r="omission"in e?bs(e.omission):r}var a=(t=Mo(t)).length;if(gi(t)){var o=bi(t);a=o.length}if(i>=a)return t;var h=i-xi(r);if(h<1)return r;var u=o?Fs(o,0,h).join(""):t.slice(0,h);if(s===n)return u+r;if(o&&(h+=u.length-h),vo(s)){if(t.slice(h).search(s)){var l,f=u;for(s.global||(s=Gt(s.source,Mo(Vt.exec(s))+"g")),s.lastIndex=0;l=s.exec(f);)var c=l.index;u=u.slice(0,c===n?h:c)}}else if(t.indexOf(bs(s),h)!=h){var m=u.lastIndexOf(s);m>-1&&(u=u.slice(0,m))}return u+r},sr.unescape=function(t){return(t=Mo(t))&&vt.test(t)?t.replace(dt,Ti):t},sr.uniqueId=function(t){var e=++se;return Mo(t)+e},sr.upperCase=oh,sr.upperFirst=hh,sr.each=wa,sr.eachRight=Ma,sr.first=ra,_h(sr,(wh={},Vr(sr,function(t,e){re.call(sr.prototype,e)||(wh[e]=t)}),wh),{chain:!1}),sr.VERSION="4.17.5",De(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){sr[t].placeholder=sr}),De(["drop","take"],function(t,e){hr.prototype[t]=function(i){i=i===n?1:Vi(Lo(i),0);var r=this.__filtered__&&!e?new hr(this):this.clone();return r.__filtered__?r.__takeCount__=Ii(i,r.__takeCount__):r.__views__.push({size:Ii(i,U),type:t+(r.__dir__<0?"Right":"")}),r},hr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),De(["filter","map","takeWhile"],function(t,e){var i=e+1,r=1==i||3==i;hr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:bn(t,3),type:i}),e.__filtered__=e.__filtered__||r,e}}),De(["head","last"],function(t,e){var i="take"+(e?"Right":"");hr.prototype[t]=function(){return this[i](1).value()[0]}}),De(["initial","tail"],function(t,e){var i="drop"+(e?"":"Right");hr.prototype[t]=function(){return this.__filtered__?new hr(this):this[i](1)}}),hr.prototype.compact=function(){return this.filter(dh)},hr.prototype.find=function(t){return this.filter(t).head()},hr.prototype.findLast=function(t){return this.reverse().find(t)},hr.prototype.invokeMap=fs(function(t,e){return"function"==typeof t?new hr(this):this.map(function(i){return jr(i,t,e)})}),hr.prototype.reject=function(t){return this.filter(ja(bn(t)))},hr.prototype.slice=function(t,e){t=Lo(t);var i=this;return i.__filtered__&&(t>0||e<0)?new hr(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==n&&(i=(e=Lo(e))<0?i.dropRight(-e):i.take(e-t)),i)},hr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},hr.prototype.toArray=function(){return this.take(U)},Vr(hr.prototype,function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),s=sr[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);s&&(sr.prototype[e]=function(){var e=this.__wrapped__,o=r?[1]:arguments,h=e instanceof hr,u=o[0],l=h||eo(e),f=function(t){var e=s.apply(sr,Oe([t],o));return r&&c?e[0]:e};l&&i&&"function"==typeof u&&1!=u.length&&(h=l=!1);var c=this.__chain__,m=!!this.__actions__.length,g=a&&!c,d=h&&!m;if(!a&&l){e=d?e:new hr(this);var A=t.apply(e,o);return A.__actions__.push({func:ya,args:[f],thisArg:n}),new or(A,c)}return g&&d?t.apply(this,o):(A=this.thru(f),g?r?A.value()[0]:A.value():A)})}),De(["pop","push","shift","sort","splice","unshift"],function(t){var e=Zt[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);sr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var s=this.value();return e.apply(eo(s)?s:[],t)}return this[i](function(i){return e.apply(eo(i)?i:[],t)})}}),Vr(hr.prototype,function(t,e){var i=sr[e];if(i){var r=i.name+"";(Gi[r]||(Gi[r]=[])).push({name:e,func:i})}}),Gi[Zs(n,A).name]=[{name:"wrapper",func:n}],hr.prototype.clone=function(){var t=new hr(this.__wrapped__);return t.__actions__=ks(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ks(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ks(this.__views__),t},hr.prototype.reverse=function(){if(this.__filtered__){var t=new hr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},hr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,i=eo(t),r=e<0,s=i?t.length:0,n=function(t,e,i){for(var r=-1,s=i.length;++r<s;){var n=i[r],a=n.size;switch(n.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Ii(e,t+a);break;case"takeRight":t=Vi(t,e-a)}}return{start:t,end:e}}(0,s,this.__views__),a=n.start,o=n.end,h=o-a,u=r?o:a-1,l=this.__iteratees__,f=l.length,c=0,m=Ii(h,this.__takeCount__);if(!i||!r&&s==h&&m==h)return Ls(t,this.__actions__);var g=[];t:for(;h--&&c<m;){for(var d=-1,A=t[u+=e];++d<f;){var v=l[d],p=v.iteratee,_=v.type,x=p(A);if(2==_)A=x;else if(!x){if(1==_)continue t;break t}}g[c++]=A}return g},sr.prototype.at=Pa,sr.prototype.chain=function(){return Ea(this)},sr.prototype.commit=function(){return new or(this.value(),this.__chain__)},sr.prototype.next=function(){this.__values__===n&&(this.__values__=yo(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},sr.prototype.plant=function(t){for(var e,i=this;i instanceof ar;){var r=Hn(i);r.__index__=0,r.__values__=n,e?s.__wrapped__=r:e=r;var s=r;i=i.__wrapped__}return s.__wrapped__=t,e},sr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof hr){var e=t;return this.__actions__.length&&(e=new hr(this)),(e=e.reverse()).__actions__.push({func:ya,args:[fa],thisArg:n}),new or(e,this.__chain__)}return this.thru(fa)},sr.prototype.toJSON=sr.prototype.valueOf=sr.prototype.value=function(){return Ls(this.__wrapped__,this.__actions__)},sr.prototype.first=sr.prototype.head,ii&&(sr.prototype[ii]=function(){return this}),sr}();ye._=Ei,(s=function(){return Ei}.call(e,i,e,r))===n||(r.exports=s)}).call(this)}).call(e,i(29),i(30)(t))},function(t,e,i){t.exports=!i(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var i=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=i)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){var r=i(7),s=i(5),n=i(15),a=i(17),o=i(23),h=function(t,e,i){var u,l,f,c=t&h.F,m=t&h.G,g=t&h.S,d=t&h.P,A=t&h.B,v=t&h.W,p=m?s:s[e]||(s[e]={}),_=p.prototype,x=m?r:g?r[e]:(r[e]||{}).prototype;for(u in m&&(i=e),i)(l=!c&&x&&void 0!==x[u])&&o(p,u)||(f=l?x[u]:i[u],p[u]=m&&"function"!=typeof x[u]?i[u]:A&&l?n(f,r):v&&x[u]==f?function(t){var e=function(e,i,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):d&&"function"==typeof f?n(Function.call,f):f,d&&((p.virtual||(p.virtual={}))[u]=f,t&h.R&&_&&!_[u]&&a(_,u,f)))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,t.exports=h},function(t,e,i){var r=i(18),s=i(19),n=i(21),a=Object.defineProperty;e.f=i(4)?Object.defineProperty:function(t,e,i){if(r(t),e=n(e,!0),r(i),s)try{return a(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(3));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(){(0,r.default)(this,t)}return(0,s.default)(t,null,[{key:"repairPerVertexEQs",value:function(t,e){return n.default.isEmpty(e)||n.default.forEach(e,function(e,i){t[i]=e}),t}},{key:"atan2",value:function(t,e){var i=Math.atan2(t,e);return i<0&&(i+=2*Math.PI),i}},{key:"cloneVars",value:function(t){return n.default.clone(t)}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){t.exports={default:i(13),__esModule:!0}},function(t,e,i){i(14);var r=i(5).Object;t.exports=function(t,e,i){return r.defineProperty(t,e,i)}},function(t,e,i){var r=i(8);r(r.S+r.F*!i(4),"Object",{defineProperty:i(9).f})},function(t,e,i){var r=i(16);t.exports=function(t,e,i){if(r(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,r){return t.call(e,i,r)};case 3:return function(i,r,s){return t.call(e,i,r,s)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var r=i(9),s=i(22);t.exports=i(4)?function(t,e,i){return r.f(t,e,s(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var r=i(6);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){t.exports=!i(4)&&!i(10)(function(){return 7!=Object.defineProperty(i(20)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){var r=i(6),s=i(7).document,n=r(s)&&r(s.createElement);t.exports=function(t){return n?s.createElement(t):{}}},function(t,e,i){var r=i(6);t.exports=function(t,e){if(!r(t))return t;var i,s;if(e&&"function"==typeof(i=t.toString)&&!r(s=i.call(t)))return s;if("function"==typeof(i=t.valueOf)&&!r(s=i.call(t)))return s;if(!e&&"function"==typeof(i=t.toString)&&!r(s=i.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),s=n(i(1));function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,r.default)(this,t)}return(0,s.default)(t,null,[{key:"smoothWave",value:function(t,e,i){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=0,n=0,a=void 0,o=1,h=0;h<i-1;h++){a=o,o=Math.min(i-1,h+2);for(var u=0;u<3;u++)e[3*s+u]=t[3*h+u];if(r)for(var l=0;l<3;l++)e[3*(s+1)+l]=.5*(-.15*t[3*n+l]+1.15*t[3*h+l]+1.15*t[3*a+l]+-.15*t[3*o+l]);else{for(var f=0;f<2;f++)e[3*(s+1)+f]=.5*(-.15*t[3*n+f]+1.15*t[3*h+f]+1.15*t[3*a+f]+-.15*t[3*o+f]);e[3*(s+1)+2]=0}n=h,s+=2}for(var c=0;c<3;c++)e[3*s+c]=t[3*(i-1)+c]}},{key:"smoothWaveAndColor",value:function(t,e,i,r,s){for(var n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=0,o=0,h=void 0,u=1,l=0;l<s-1;l++){h=u,u=Math.min(s-1,l+2);for(var f=0;f<3;f++)i[3*a+f]=t[3*l+f];if(n)for(var c=0;c<3;c++)i[3*(a+1)+c]=.5*(-.15*t[3*o+c]+1.15*t[3*l+c]+1.15*t[3*h+c]+-.15*t[3*u+c]);else{for(var m=0;m<2;m++)i[3*(a+1)+m]=.5*(-.15*t[3*o+m]+1.15*t[3*l+m]+1.15*t[3*h+m]+-.15*t[3*u+m]);i[3*(a+1)+2]=0}for(var g=0;g<4;g++)r[4*a+g]=e[4*l+g],r[4*(a+1)+g]=e[4*l+g];o=l,a+=2}for(var d=0;d<3;d++)i[3*a+d]=t[3*(s-1)+d];for(var A=0;A<4;A++)r[4*a+A]=e[4*(s-1)+A]}}]),t}();e.default=a,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1));i(26),i(27);var n=a(i(28));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(){(0,r.default)(this,t)}return(0,s.default)(t,null,[{key:"createVisualizer",value:function(t,e,i){return new n.default(t,e,i)}}]),t}();e.default=o,t.exports=o,t.exports=e.default},function(t,e,i){"use strict";{const t=(t,e)=>{var i="function"==typeof e,r="function"==typeof e,s="function"==typeof e;Object.defineProperty(Math,t,{configurable:i,enumerable:s,writable:r,value:e})};t("DEG_PER_RAD",Math.PI/180),t("RAD_PER_DEG",180/Math.PI);const e=new Float32Array(1);t("scale",function(t,e,i,r,s){return 0===arguments.length?NaN:Number.isNaN(t)||Number.isNaN(e)||Number.isNaN(i)||Number.isNaN(r)||Number.isNaN(s)?NaN:t===1/0||t===-1/0?t:(t-e)*(s-r)/(i-e)+r}),t("fscale",function(t,i,r,s,n){return e[0]=Math.scale(t,i,r,s,n),e[0]}),t("clamp",function(t,e,i){return Math.min(i,Math.max(e,t))}),t("radians",function(t){return t*Math.DEG_PER_RAD}),t("degrees",function(t){return t*Math.RAD_PER_DEG})}},function(t,e,i){"use strict";window.sqr=function(t){return t*t},window.sqrt=function(t){return Math.sqrt(Math.abs(t))},window.log10=function(t){return Math.log(t)*Math.LOG10E},window.sign=function(t){return t>0?1:t<0?-1:0},window.rand=function(t){return Math.floor(Math.random()*t)},window.bnot=function(t){return 0==t?1:0},window.pow=function(t,e){var i,r=Math.pow(t,e);return i=r,!isFinite(i)||isNaN(i)?0:r},window.div=function(t,e){return 0===e?0:t/e},window.mod=function(t,e){return 0===e?0:Math.floor(t)%Math.floor(e)},window.bitor=function(t,e){return Math.floor(t)|Math.floor(e)},window.bitand=function(t,e){return Math.floor(t)&Math.floor(e)},window.sigmoid=function(t,e){var i=1+Math.exp(-t*e);return Math.abs(i)>1e-5?1/i:0},window.bor=function(t,e){return 0!=t||0!=e?1:0},window.band=function(t,e){return 0!=t&&0!=e?1:0},window.equal=function(t,e){return Math.abs(t-e)<1e-5?1:0},window.above=function(t,e){return t>e?1:0},window.below=function(t,e){return t<e?1:0},window.ifcond=function(t,e,i){return 0!=t?e:i}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=h(i(0)),s=h(i(1)),n=h(i(3)),a=h(i(31)),o=h(i(33));function h(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i,s){(0,r.default)(this,t),this.audio=new a.default(e);var n=i.getContext("webgl2",{alpha:!1,antialias:!1,depth:!1,stencil:!1,premultipliedAlpha:!1});this.baseValsDefaults={decay:.98,gammaadj:2,echo_zoom:2,echo_alpha:0,echo_orient:0,red_blue:0,brighten:0,darken:0,wrap:1,darken_center:0,solarize:0,invert:0,fshader:0,b1n:0,b2n:0,b3n:0,b1x:1,b2x:1,b3x:1,b1ed:.25,wave_mode:0,additivewave:0,wave_dots:0,wave_thick:0,wave_a:.8,wave_scale:1,wave_smoothing:.75,wave_mystery:0,modwavealphabyvolume:0,modwavealphastart:.75,modwavealphaend:.95,wave_r:1,wave_g:1,wave_b:1,wave_x:.5,wave_y:.5,wave_brighten:1,mv_x:12,mv_y:9,mv_dx:0,mv_dy:0,mv_l:.9,mv_r:1,mv_g:1,mv_b:1,mv_a:1,warpanimspeed:1,warpscale:1,zoomexp:1,zoom:1,rot:0,cx:.5,cy:.5,dx:0,dy:0,warp:1,sx:1,sy:1,ob_size:.01,ob_r:0,ob_g:0,ob_b:0,ob_a:0,ib_size:.01,ib_r:.25,ib_g:.25,ib_b:.25,ib_a:0},this.shapeBaseValsDefaults={enabled:0,sides:4,additive:0,thickoutline:0,textured:0,num_inst:1,tex_zoom:1,tex_ang:0,x:.5,y:.5,rad:.1,ang:0,r:1,g:0,b:0,a:1,r2:0,g2:1,b2:0,a2:0,border_r:1,border_g:1,border_b:1,border_a:.1},this.waveBaseValsDefaults={enabled:0,samples:512,sep:0,scaling:1,smoothing:.5,r:1,g:1,b:1,a:1,spectrum:0,usedots:0,thick:0,additive:0},this.renderer=new o.default(n,this.audio,s)}return(0,s.default)(t,[{key:"connectAudio",value:function(t){this.audioNode=t,this.audio.connectAudio(t)}},{key:"disconnectAudio",value:function(t){this.audio.disconnectAudio(t)}},{key:"loadPreset",value:function(t,e){var i=n.default.cloneDeep(t);i.baseVals=n.default.assign({},this.baseValsDefaults,i.baseVals);for(var r=0;r<i.shapes.length;r++)i.shapes[r].baseVals=n.default.assign({},this.shapeBaseValsDefaults,i.shapes[r].baseVals);for(var s=0;s<i.waves.length;s++)i.waves[s].baseVals=n.default.assign({},this.waveBaseValsDefaults,i.waves[s].baseVals);if(!n.default.isFunction(i.init_eqs)){i.init_eqs=new Function("m",i.init_eqs_str+" return m;"),i.frame_eqs=new Function("m",i.frame_eqs_str+" return m;"),i.pixel_eqs_str&&""!==i.pixel_eqs_str?i.pixel_eqs=new Function("m",i.pixel_eqs_str+" return m;"):i.pixel_eqs="";for(var a=0;a<i.shapes.length;a++)0!==i.shapes[a].baseVals.enabled&&(i.shapes[a]=n.default.assign(i.shapes[a],{init_eqs:new Function("m",i.shapes[a].init_eqs_str+" return m;"),frame_eqs:new Function("m",i.shapes[a].frame_eqs_str+" return m;")}));for(var o=0;o<i.waves.length;o++)if(0!==i.waves[o].baseVals.enabled){var h={init_eqs:new Function("m",i.waves[o].init_eqs_str+" return m;"),frame_eqs:new Function("m",i.waves[o].frame_eqs_str+" return m;")};i.waves[o].point_eqs_str&&""!==i.waves[o].point_eqs_str?h.point_eqs=new Function("m",i.waves[o].point_eqs_str+" return m;"):h.point_eqs="",i.waves[o]=n.default.assign(i.waves[o],h)}}this.renderer.loadPreset(i,e)}},{key:"loadExtraImages",value:function(t){this.renderer.loadExtraImages(t)}},{key:"setRendererSize",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.renderer.setRendererSize(t,e,i)}},{key:"render",value:function(){this.renderer.render()}}]),t}();e.default=u,t.exports=e.default},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(32));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){(0,r.default)(this,t),this.numSamps=512,this.fft=new n.default(this.numSamps,512),this.audioContext=e,this.audible=e.createDelay(),this.analyser=e.createAnalyser(),this.analyser.smoothingTimeConstant=0,this.analyser.fftSize=2*this.numSamps,this.audible.connect(this.analyser),this.analyserL=e.createAnalyser(),this.analyserL.smoothingTimeConstant=0,this.analyserL.fftSize=2*this.numSamps,this.analyserR=e.createAnalyser(),this.analyserR.smoothingTimeConstant=0,this.analyserR.fftSize=2*this.numSamps,this.splitter=e.createChannelSplitter(2),this.audible.connect(this.splitter),this.splitter.connect(this.analyserL,0),this.splitter.connect(this.analyserR,1)}return(0,s.default)(t,[{key:"sampleAudio",value:function(){this.timeByteArray=new Uint8Array(this.numSamps),this.timeByteArrayL=new Uint8Array(this.numSamps),this.timeByteArrayR=new Uint8Array(this.numSamps),this.analyser.getByteTimeDomainData(this.timeByteArray),this.analyserL.getByteTimeDomainData(this.timeByteArrayL),this.analyserR.getByteTimeDomainData(this.timeByteArrayR),this.timeArray=[],this.timeArrayL=[],this.timeArrayR=[];for(var t=[],e=[],i=0,r=0;r<this.numSamps;r++)this.timeArray.push(this.timeByteArray[r]-128),this.timeArrayL.push(this.timeByteArrayL[r]-128),this.timeArrayR.push(this.timeByteArrayR[r]-128),t[r]=.5*(this.timeArrayL[r]+this.timeArrayL[i]),e[r]=.5*(this.timeArrayR[r]+this.timeArrayR[i]),i=r;this.freqArray=this.fft.timeToFrequencyDomain(this.timeByteArray),this.freqArrayL=this.fft.timeToFrequencyDomain(t),this.freqArrayR=this.fft.timeToFrequencyDomain(e);for(var s=0;s<this.numSamps;s++)this.freqArray[s]/=128,this.freqArrayL[s]/=128,this.freqArrayR[s]/=128}},{key:"connectAudio",value:function(t){t.connect(this.audible)}},{key:"disconnectAudio",value:function(t){t.disconnect(this.audible)}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),s=n(i(1));function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,i){(0,r.default)(this,t),this.samplesIn=e,this.samplesOut=i,this.NFREQ=2*i,this.initBitRevTable(),this.initCosSinTable()}return(0,s.default)(t,[{key:"initBitRevTable",value:function(){this.bitrevtable=new Uint16Array(this.NFREQ);for(var t=0;t<this.NFREQ;t++)this.bitrevtable[t]=t;for(var e=0,i=0;i<this.NFREQ;i++){if(e>i){var r=this.bitrevtable[i];this.bitrevtable[i]=this.bitrevtable[e],this.bitrevtable[e]=r}for(var s=this.NFREQ>>1;s>=1&&e>=s;)e-=s,s>>=1;e+=s}}},{key:"initCosSinTable",value:function(){for(var t=2,e=0;t<=this.NFREQ;)e+=1,t<<=1;this.cossintable=[new Float32Array(e),new Float32Array(e)],t=2;for(var i=0;t<=this.NFREQ;){var r=-2*Math.PI/t;this.cossintable[0][i]=Math.cos(r),this.cossintable[1][i]=Math.sin(r),i+=1,t<<=1}}},{key:"timeToFrequencyDomain",value:function(t){for(var e=new Float32Array(this.NFREQ),i=new Float32Array(this.NFREQ),r=0;r<this.NFREQ;r++){var s=this.bitrevtable[r];s<this.samplesIn?e[r]=t[s]:e[r]=0,i[r]=0}for(var n=2,a=0;n<=this.NFREQ;){for(var o=this.cossintable[0][a],h=this.cossintable[1][a],u=1,l=0,f=n>>1,c=0;c<f;c++){for(var m=c;m<this.NFREQ;m+=n){var g=m+f,d=u*e[g]-l*i[g],A=u*i[g]+l*e[g];e[g]=e[m]-d,i[g]=i[m]-A,e[m]+=d,i[m]+=A}var v=u;u=v*o-l*h,l=l*o+v*h}n<<=1,a+=1}for(var p=new Float32Array(this.samplesOut),_=0;_<this.samplesOut;_++)p[_]=Math.sqrt(e[_]*e[_]+i[_]*i[_]);return p}}]),t}();e.default=a,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=T(i(0)),s=T(i(1)),n=T(i(3)),a=T(i(34)),o=T(i(41)),h=T(i(42)),u=T(i(43)),l=T(i(44)),f=T(i(45)),c=T(i(46)),m=T(i(47)),g=T(i(48)),d=T(i(49)),A=T(i(50)),v=T(i(51)),p=T(i(52)),_=T(i(55)),x=T(i(56)),b=T(i(11));function T(t){return t&&t.__esModule?t:{default:t}}var E=function(){function t(e,i,s){(0,r.default)(this,t),this.gl=e,this.audio=i,this.frameNum=0,this.fps=30,this.time=0,this.presetTime=0,this.lastTime=performance.now(),this.timeHist=[0],this.timeHistMax=120,this.blending=!1,this.blendStartTime=0,this.blendProgress=0,this.blendDuration=0,this.width=s.width||1200,this.height=s.height||900,this.mesh_width=s.mesh_width||32,this.mesh_height=s.mesh_height||24,this.pixelRatio=s.pixelRatio||1,this.textureRatio=s.textureRatio||1,this.texsizeX=this.width*this.pixelRatio*this.textureRatio,this.texsizeY=this.height*this.pixelRatio*this.textureRatio,this.aspectx=this.texsizeY>this.texsizeX?this.texsizeX/this.texsizeY:1,this.aspecty=this.texsizeX>this.texsizeY?this.texsizeY/this.texsizeX:1,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.qs=n.default.map(n.default.range(1,33),function(t){return"q"+t}),this.ts=n.default.map(n.default.range(1,9),function(t){return"t"+t}),this.regs=n.default.map(n.default.range(0,100),function(t){return t<10?"reg0"+t:"reg"+t}),this.regVars={},this.blurRatios=[[.5,.25],[.125,.125],[.0625,.0625]],this.lastAudioTime=performance.now(),this.audioLevels=new a.default(this.audio),this.prevFrameBuffer=this.gl.createFramebuffer(),this.targetFrameBuffer=this.gl.createFramebuffer(),this.prevTexture=this.gl.createTexture(),this.targetTexture=this.gl.createTexture(),this.compFrameBuffer=this.gl.createFramebuffer(),this.compTexture=this.gl.createTexture(),this.anisoExt=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.bindFrameBufferTexture(this.prevFrameBuffer,this.prevTexture),this.bindFrameBufferTexture(this.targetFrameBuffer,this.targetTexture),this.bindFrameBufferTexture(this.compFrameBuffer,this.compTexture);var b={pixelRatio:this.pixelRatio,textureRatio:this.textureRatio,texsizeX:this.texsizeX,texsizeY:this.texsizeY,mesh_width:this.mesh_width,mesh_height:this.mesh_height,aspectx:this.aspectx,aspecty:this.aspecty};this.noise=new _.default(e),this.image=new x.default(e),this.warpShader=new d.default(e,this.noise,this.image,b),this.compShader=new A.default(e,this.noise,this.image,b),this.outputShader=new v.default(e,b),this.prevWarpShader=new d.default(e,this.noise,this.image,b),this.prevCompShader=new A.default(e,this.noise,this.image,b),this.numBlurPasses=0,this.blurShader1=new p.default(0,this.blurRatios,e,b),this.blurShader2=new p.default(1,this.blurRatios,e,b),this.blurShader3=new p.default(2,this.blurRatios,e,b),this.blurTexture1=this.blurShader1.blurVerticalTexture,this.blurTexture2=this.blurShader2.blurVerticalTexture,this.blurTexture3=this.blurShader3.blurVerticalTexture,this.basicWaveform=new u.default(e,b),this.customWaveforms=n.default.map(n.default.range(4),function(t){return new l.default(t,e,b)}),this.customShapes=n.default.map(n.default.range(4),function(t){return new f.default(t,e,b)}),this.darkenCenter=new m.default(e,b),this.innerBorder=new c.default(e,b),this.outerBorder=new c.default(e,b),this.motionVectors=new g.default(e,b),this.warpUVs=new Float32Array((this.mesh_width+1)*(this.mesh_height+1)*2),this.warpColor=new Float32Array((this.mesh_width+1)*(this.mesh_height+1)*4),this.gl.clearColor(0,0,0,1),this.blankPreset=o.default,this.preset=o.default,this.prevPreset=this.preset,this.presetEquationRunner=new h.default(this.preset,b),this.prevPresetEquationRunner=new h.default(this.prevPreset,b)}return(0,s.default)(t,[{key:"genPlasma",value:function(t,e,i,r,s){var n=Math.floor((t+e)/2),a=Math.floor((i+r)/2),o=this.vertInfoC[i*(this.mesh_width+1)+t],h=this.vertInfoC[i*(this.mesh_width+1)+e],u=this.vertInfoC[r*(this.mesh_width+1)+t],l=this.vertInfoC[r*(this.mesh_width+1)+e];r-i>=2&&(0===t&&(this.vertInfoC[a*(this.mesh_width+1)+t]=.5*(o+u)+(2*Math.random()-1)*s*this.aspecty),this.vertInfoC[a*(this.mesh_width+1)+e]=.5*(h+l)+(2*Math.random()-1)*s*this.aspecty),e-t>=2&&(0===i&&(this.vertInfoC[i*(this.mesh_width+1)+n]=.5*(o+h)+(2*Math.random()-1)*s*this.aspectx),this.vertInfoC[r*(this.mesh_width+1)+n]=.5*(u+l)+(2*Math.random()-1)*s*this.aspectx),r-i>=2&&e-t>=2&&(o=this.vertInfoC[a*(this.mesh_width+1)+t],h=this.vertInfoC[a*(this.mesh_width+1)+e],u=this.vertInfoC[i*(this.mesh_width+1)+n],l=this.vertInfoC[r*(this.mesh_width+1)+n],this.vertInfoC[a*(this.mesh_width+1)+n]=.25*(u+l+o+h)+(2*Math.random()-1)*s,this.genPlasma(t,n,i,a,.5*s),this.genPlasma(n,e,i,a,.5*s),this.genPlasma(t,n,a,r,.5*s),this.genPlasma(n,e,a,r,.5*s))}},{key:"randomizeBlendPattern",value:function(){this.vertInfoA=new Float32Array((this.mesh_width+1)*(this.mesh_height+1)),this.vertInfoC=new Float32Array((this.mesh_width+1)*(this.mesh_height+1));var t=1+Math.floor(3*Math.random());if(0===t)for(var e=0,i=0;i<=this.mesh_height;i++)for(var r=0;r<=this.mesh_width;r++)this.vertInfoA[e]=1,this.vertInfoC[e]=0,e+=1;else if(1===t)for(var s=6.28*Math.random(),n=Math.cos(s),a=Math.sin(s),o=.1+.2*Math.random(),h=1/o,u=0,l=0;l<=this.mesh_height;l++)for(var f=l/this.mesh_height*this.aspecty,c=0;c<=this.mesh_width;c++){var m=(c/this.mesh_width*this.aspectx-.5)*n+(f-.5)*a+.5;m=(m-.5)/Math.sqrt(2)+.5,this.vertInfoA[u]=h*(1+o),this.vertInfoC[u]=h*m-h,u+=1}else if(2===t){var g=.12+.13*Math.random(),d=1/g;this.vertInfoC[0]=Math.random(),this.vertInfoC[this.mesh_width]=Math.random(),this.vertInfoC[this.mesh_height*(this.mesh_width+1)]=Math.random(),this.vertInfoC[this.mesh_height*(this.mesh_width+1)+this.mesh_width]=Math.random(),this.genPlasma(0,this.mesh_width,0,this.mesh_height,.25);for(var A=this.vertInfoC[0],v=this.vertInfoC[0],p=0,_=0;_<=this.mesh_height;_++)for(var x=0;x<=this.mesh_width;x++)A>this.vertInfoC[p]&&(A=this.vertInfoC[p]),v<this.vertInfoC[p]&&(v=this.vertInfoC[p]),p+=1;var b=1/(v-A);p=0;for(var T=0;T<=this.mesh_height;T++)for(var E=0;E<=this.mesh_width;E++){var y=(this.vertInfoC[p]-A)*b;this.vertInfoA[p]=d*(1+g),this.vertInfoC[p]=d*y-d,p+=1}}else if(3===t)for(var P=.02+.14*Math.random()+.34*Math.random(),L=1/P,R=2*Math.floor(2*Math.random())-1,S=0,w=0;w<=this.mesh_height;w++)for(var M=(w/this.mesh_height-.5)*this.aspecty,U=0;U<=this.mesh_width;U++){var q=(U/this.mesh_width-.5)*this.aspectx,F=1.41421*Math.sqrt(q*q+M*M);-1===R&&(F=1-F),this.vertInfoA[S]=L*(1+P),this.vertInfoC[S]=L*F-L,S+=1}}},{key:"loadPreset",value:function(e,i){this.randomizeBlendPattern(),this.blending=!0,this.blendStartTime=this.time,this.blendDuration=i,this.blendProgress=0;var r=this.prevPresetEquationRunner;this.prevPresetEquationRunner=this.presetEquationRunner,this.presetEquationRunner=r,this.prevPreset=this.preset,this.preset=e,this.preset.baseVals.old_wave_mode=this.prevPreset.baseVals.wave_mode,this.presetTime=this.time,this.presetEquationRunner.updatePreset(this.preset);var s=this.prevWarpShader;this.prevWarpShader=this.warpShader,this.warpShader=s;var n=this.prevCompShader;this.prevCompShader=this.compShader,this.compShader=n;var a=this.preset.warp.trim(),o=this.preset.comp.trim();this.warpShader.updateShader(a),this.compShader.updateShader(o),0===a.length?this.numBlurPasses=0:this.numBlurPasses=t.getHighestBlur(a),0!==o.length&&(this.numBlurPasses=Math.max(this.numBlurPasses,t.getHighestBlur(o)))}},{key:"loadExtraImages",value:function(t){this.image.loadExtraImages(t)}},{key:"setRendererSize",value:function(t,e,i){this.width=t,this.height=e,this.mesh_width=i.mesh_width||this.mesh_width,this.mesh_height=i.mesh_height||this.mesh_height,this.pixelRatio=i.pixelRatio||this.pixelRatio,this.textureRatio=i.textureRatio||this.textureRatio,this.texsizeX=t*this.pixelRatio*this.textureRatio,this.texsizeY=e*this.pixelRatio*this.textureRatio,this.aspectx=this.texsizeY>this.texsizeX?this.texsizeX/this.texsizeY:1,this.aspecty=this.texsizeX>this.texsizeY?this.texsizeY/this.texsizeX:1,this.bindFrameBufferTexture(this.prevFrameBuffer,this.prevTexture),this.bindFrameBufferTexture(this.targetFrameBuffer,this.targetTexture),this.bindFrameBufferTexture(this.compFrameBuffer,this.compTexture),this.updateGlobals()}},{key:"updateGlobals",value:function(){var t={pixelRatio:this.pixelRatio,textureRatio:this.textureRatio,texsizeX:this.texsizeX,texsizeY:this.texsizeY,mesh_width:this.mesh_width,mesh_height:this.mesh_height,aspectx:this.aspectx,aspecty:this.aspecty};this.presetEquationRunner.updateGlobals(t),this.prevPresetEquationRunner.updateGlobals(t),this.warpShader.updateGlobals(t),this.prevWarpShader.updateGlobals(t),this.compShader.updateGlobals(t),this.prevCompShader.updateGlobals(t),this.outputShader.updateGlobals(t),this.blurShader1.updateGlobals(t),this.blurShader2.updateGlobals(t),this.blurShader3.updateGlobals(t),this.basicWaveform.updateGlobals(t),n.default.forEach(this.customWaveforms,function(e){return e.updateGlobals(t)}),n.default.forEach(this.customShapes,function(e){return e.updateGlobals(t)}),this.darkenCenter.updateGlobals(t),this.innerBorder.updateGlobals(t),this.outerBorder.updateGlobals(t),this.motionVectors.updateGlobals(t),this.warpUVs=new Float32Array((this.mesh_width+1)*(this.mesh_height+1)*2),this.warpColor=new Float32Array((this.mesh_width+1)*(this.mesh_height+1)*4)}},{key:"calcTimeAndFPS",value:function(){var t=performance.now(),e=(t-this.lastTime)/1e3;(e>1||e<0||this.frame<2)&&(e=1/30),this.lastTime=t,this.time+=1/this.fps,this.blending&&(this.blendProgress=(this.time-this.blendStartTime)/this.blendDuration,this.blendProgress>1&&(this.blending=!1));var i=this.timeHist[this.timeHist.length-1]+e;this.timeHist.push(i),this.timeHist.length>this.timeHistMax&&this.timeHist.shift();var r=this.timeHist.length/(i-this.timeHist[0]);Math.abs(r-this.fps)>3&&this.frame>this.timeHistMax?this.fps=r:this.fps=.93*this.fps+(1-.93)*r}},{key:"runPixelEquations",value:function(t,e,i,r,s){for(var a=this.mesh_width,o=this.mesh_height,h=a+1,u=o+1,l=this.time*e.warpanimspeed,f=1/e.warpscale,c=11.68+4*Math.cos(1.413*l+10),m=8.77+3*Math.cos(1.113*l+7),g=10.54+3*Math.cos(1.233*l+3),d=11.49+4*Math.cos(.933*l+5),A=0/this.texsizeX,v=0/this.texsizeY,p=this.aspectx,_=this.aspecty,x=b.default.cloneVars(e),T=x.rkeys||[],E={},y=0;y<T.length;y++){var P=T[y];n.default.includes(i,P)||n.default.includes(this.qs,P)||(E[P]=x[P])}for(var L=0,R=0,S=0;S<u;S++)for(var w=0;w<h;w++){var M=w/a*2-1,U=S/o*2-1,q=Math.sqrt(M*M*p*p+U*U*_*_);if(r){var F;F=S===o/2&&w===a/2?0:b.default.atan2(U*_,M*p),x.x=.5*M*p+.5,x.y=-.5*U*_+.5,x.rad=q,x.ang=F,x=b.default.repairPerVertexEQs(x,E),x=t.pixel_eqs(x)}var z=x.warp,B=x.zoom,V=x.zoomexp,I=x.cx,D=x.cy,C=x.sx,X=x.sy,k=x.dx,N=x.dy,W=x.rot,O=1/Math.pow(B,Math.pow(V,2*q-1)),Q=.5*M*p*O+.5,j=.5*-U*_*O+.5;Q=(Q-I)/C+I,j=(j-D)/X+D,0!==z&&(Q+=.0035*z*Math.sin(.333*l+f*(M*c-U*d)),j+=.0035*z*Math.cos(.375*l-f*(M*g+U*m)),Q+=.0035*z*Math.cos(.753*l-f*(M*m-U*g)),j+=.0035*z*Math.sin(.825*l+f*(M*c+U*d)));var Y=Q-I,K=j-D,G=Math.cos(W),H=Math.sin(W);if(Q=Y*G-K*H+I,j=Y*H+K*G+D,Q=((Q-=k)-.5)/p+.5,j=((j-=N)-.5)/_+.5,Q+=A,j+=v,s){var J=this.vertInfoA[L/2]*this.blendProgress+this.vertInfoC[L/2];J=Math.clamp(J,0,1),this.warpUVs[L]=this.warpUVs[L]*J+Q*(1-J),this.warpUVs[L+1]=this.warpUVs[L+1]*J+j*(1-J),this.warpColor[R+0]=1,this.warpColor[R+1]=1,this.warpColor[R+2]=1,this.warpColor[R+3]=J}else this.warpUVs[L]=Q,this.warpUVs[L+1]=j,this.warpColor[R+0]=1,this.warpColor[R+1]=1,this.warpColor[R+2]=1,this.warpColor[R+3]=1;L+=2,R+=4}}},{key:"bindFrambufferAndSetViewport",value:function(t,e,i){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),this.gl.viewport(0,0,e,i)}},{key:"bindFrameBufferTexture",value:function(t,e){if(this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.texsizeX,this.texsizeY,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array(this.texsizeX*this.texsizeY*4)),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.anisoExt){var i=this.gl.getParameter(this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.gl.texParameterf(this.gl.TEXTURE_2D,this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,i)}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,e,0)}},{key:"render",value:function(){var e=this;this.audio.sampleAudio();var i=performance.now(),r=i-this.lastAudioTime;r>30&&(this.audioLevels.updateAudioLevels(r,this.frameNum),this.lastAudioTime=i),this.calcTimeAndFPS(),this.frameNum+=1;var s={frame:this.frameNum,time:this.time,fps:this.fps,bass:this.audioLevels.bass,bass_att:this.audioLevels.bass_att,mid:this.audioLevels.mid,mid_att:this.audioLevels.mid_att,treb:this.audioLevels.treb,treb_att:this.audioLevels.treb_att,meshx:this.mesh_width,meshy:this.mesh_height,aspectx:this.invAspectx,aspecty:this.invAspecty,pixelsx:this.texsizeX,pixelsy:this.texsizeY,megabuf:this.presetEquationRunner.megabuf,gmegabuf:this.presetEquationRunner.gmegabuf};s=n.default.assign(s,this.regVars),this.presetEquationRunner.runFrameEquations(s);var a=this.presetEquationRunner.mdVSFrame,o=this.presetEquationRunner.mdVSUserKeys;this.runPixelEquations(this.presetEquationRunner.preset,a,o,this.presetEquationRunner.runVertEQs,!1),this.regVars=n.default.assign(this.regVars,n.default.pick(a,this.regs)),s=n.default.assign(s,this.regVars);var h=void 0;this.blending?(this.prevPresetEquationRunner.runFrameEquations(s),this.runPixelEquations(this.prevPresetEquationRunner.preset,this.prevPresetEquationRunner.mdVSFrame,this.prevPresetEquationRunner.mdVSUserKeys,this.prevPresetEquationRunner.runVertEQs,!0),h=t.mixFrameEquations(this.blendProgress,a,this.prevPresetEquationRunner.mdVSFrame)):h=a;var u=this.targetTexture;this.targetTexture=this.prevTexture,this.prevTexture=u;var l=this.targetFrameBuffer;this.targetFrameBuffer=this.prevFrameBuffer,this.prevFrameBuffer=l,this.gl.bindTexture(this.gl.TEXTURE_2D,this.prevTexture),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.bindFrambufferAndSetViewport(this.targetFrameBuffer,this.texsizeX,this.texsizeY),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.enable(this.gl.BLEND),this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);var f=t.getBlurValues(h),c=f.blurMins,m=f.blurMaxs;this.blending?(this.prevWarpShader.renderQuadTexture(!1,this.prevTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,c,m,this.prevPresetEquationRunner.mdVSFrame,this.warpUVs,this.warpColor),this.warpShader.renderQuadTexture(!0,this.prevTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,c,m,h,this.warpUVs,this.warpColor)):this.warpShader.renderQuadTexture(!1,this.prevTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,c,m,a,this.warpUVs,this.warpColor),this.numBlurPasses>0&&(this.blurShader1.renderBlurTexture(this.targetTexture,a,c,m),this.numBlurPasses>1&&(this.blurShader2.renderBlurTexture(this.blurTexture1,a,c,m),this.numBlurPasses>2&&this.blurShader3.renderBlurTexture(this.blurTexture2,a,c,m)),this.bindFrambufferAndSetViewport(this.targetFrameBuffer,this.texsizeX,this.texsizeY)),this.motionVectors.drawMotionVectors(h,this.warpUVs),this.preset.shapes&&this.preset.shapes.length>0&&n.default.forEach(this.customShapes,function(t,i){t.drawCustomShape(e.blending,e.blendProgress,s,e.presetEquationRunner,e.preset.shapes[i],e.prevPresetEquationRunner,n.default.get(e.prevPreset,"shapes["+i+"]"),e.prevTexture),e.regVars=n.default.assign(e.regVars,n.default.pick(t.mdVSShapeFrame,e.regs)),s=n.default.assign(s,e.regVars)}),this.preset.waves&&this.preset.waves.length>0&&n.default.forEach(this.customWaveforms,function(t,i){t.drawCustomWaveform(e.blending,e.blendProgress,e.audio.timeArrayL,e.audio.timeArrayR,e.audio.freqArrayL,e.audio.freqArrayR,s,e.presetEquationRunner,e.preset.waves[i],e.prevPresetEquationRunner,n.default.get(e.prevPreset,"waves["+i+"]")),e.regVars=n.default.assign(e.regVars,n.default.pick(t.mdVSWaveFrame,e.regs)),s=n.default.assign(s,e.regVars)}),this.basicWaveform.drawBasicWaveform(this.blending,this.blendProgress,this.audio.timeArrayL,this.audio.timeArrayR,h),this.darkenCenter.drawDarkenCenter(h);var g=[h.ob_r,h.ob_g,h.ob_b,h.ob_a];this.outerBorder.drawBorder(g,h.ob_size,0);var d=[h.ib_r,h.ib_g,h.ib_b,h.ib_a];this.innerBorder.drawBorder(d,h.ib_size,h.ob_size),this.bindFrambufferAndSetViewport(this.compFrameBuffer,this.texsizeX,this.texsizeY),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.enable(this.gl.BLEND),this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.blending?(this.prevCompShader.renderQuadTexture(!1,this.targetTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,c,m,this.prevPresetEquationRunner.mdVSFrame,this.warpColor),this.compShader.renderQuadTexture(!0,this.targetTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,c,m,h,this.warpColor)):this.compShader.renderQuadTexture(!1,this.targetTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,c,m,a,this.warpColor),this.gl.bindTexture(this.gl.TEXTURE_2D,this.compTexture),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.bindFrambufferAndSetViewport(null,this.width,this.height),this.outputShader.renderQuadTexture(this.compTexture)}}],[{key:"getHighestBlur",value:function(t){return/sampler_blur3/.test(t)?3:/sampler_blur2/.test(t)?2:/sampler_blur1/.test(t)?1:0}},{key:"mixFrameEquations",value:function(t,e,i){var r=.5-.5*Math.cos(3.1415926535898*t),s=1-r,a=b.default.cloneVars(e);return a.decay=r*e.decay+s*i.decay,a.wave_a=r*e.wave_a+s*i.wave_a,a.wave_r=r*e.wave_r+s*i.wave_r,a.wave_g=r*e.wave_g+s*i.wave_g,a.wave_b=r*e.wave_b+s*i.wave_b,a.wave_x=r*e.wave_x+s*i.wave_x,a.wave_y=r*e.wave_y+s*i.wave_y,a.wave_mystery=r*e.wave_mystery+s*i.wave_mystery,a.ob_size=r*e.ob_size+s*i.ob_size,a.ob_r=r*e.ob_r+s*i.ob_r,a.ob_g=r*e.ob_g+s*i.ob_g,a.ob_b=r*e.ob_b+s*i.ob_b,a.ob_a=r*e.ob_a+s*i.ob_a,a.ib_size=r*e.ib_size+s*i.ib_size,a.ib_r=r*e.ib_r+s*i.ib_r,a.ib_g=r*e.ib_g+s*i.ib_g,a.ib_b=r*e.ib_b+s*i.ib_b,a.ib_a=r*e.ib_a+s*i.ib_a,a.mv_x=r*e.mv_x+s*i.mv_x,a.mv_y=r*e.mv_y+s*i.mv_y,a.mv_dx=r*e.mv_dx+s*i.mv_dx,a.mv_dy=r*e.mv_dy+s*i.mv_dy,a.mv_l=r*e.mv_l+s*i.mv_l,a.mv_r=r*e.mv_r+s*i.mv_r,a.mv_g=r*e.mv_g+s*i.mv_g,a.mv_b=r*e.mv_b+s*i.mv_b,a.mv_a=r*e.mv_a+s*i.mv_a,a.echo_zoom=r*e.echo_zoom+s*i.echo_zoom,a.echo_alpha=r*e.echo_alpha+s*i.echo_alpha,a.echo_orient=r*e.echo_orient+s*i.echo_orient,a.wave_dots=r<.5?i.wave_dots:e.wave_dots,a.wave_thick=r<.5?i.wave_thick:e.wave_thick,a.additivewave=r<.5?i.additivewave:e.additivewave,a.wave_brighten=r<.5?i.wave_brighten:e.wave_brighten,a.darken_center=r<.5?i.darken_center:e.darken_center,a.gammaadj=r<.5?i.gammaadj:e.gammaadj,a.wrap=r<.5?i.wrap:e.wrap,a.invert=r<.5?i.invert:e.invert,a.brighten=r<.5?i.brighten:e.brighten,a.darken=r<.5?i.darken:e.darken,a.solarize=r<.5?i.brighten:e.solarize,a.b1n=r*(e.b1n||0)+s*(i.b1n||0),a.b2n=r*(e.b2n||0)+s*(i.b2n||0),a.b3n=r*(e.b3n||0)+s*(i.b3n||0),a.b1x=r*n.default.get(e,"b1x",1)+s*n.default.get(i,"b1x",1),a.b2x=r*n.default.get(e,"b2x",1)+s*n.default.get(i,"b2x",1),a.b3x=r*n.default.get(e,"b3x",1)+s*n.default.get(i,"b3x",1),a.b1ed=r*n.default.get(e,"b1ed",.25)+s*n.default.get(i,"b1ed",.25),a}},{key:"getBlurValues",value:function(t){var e=t.b1n||0,i=t.b2n||0,r=t.b3n||0,s=n.default.get(t,"b1x",1),a=n.default.get(t,"b2x",1),o=n.default.get(t,"b3x",1);if(s-e<.1){var h=.5*(e+s);e=h-.05,s=h-.05}if((a=Math.min(s,a))-(i=Math.max(e,i))<.1){var u=.5*(i+a);i=u-.05,a=u-.05}if((o=Math.min(a,o))-(r=Math.max(i,r))<.1){var l=.5*(r+o);r=l-.05,o=l-.05}return{blurMins:[e,i,r],blurMaxs:[s,a,o]}}}]),t}();e.default=E,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(i(35)),s=o(i(38)),n=o(i(0)),a=o(i(1));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e){(0,n.default)(this,t),this.audio=e,this.bass=1,this.bass_att=1,this.bass_imm=0,this.bass_avg=1,this.bass_long_avg=1,this.mid=1,this.mid_att=1,this.mid_imm=0,this.mid_avg=1,this.mid_long_avg=1,this.treb=1,this.treb_att=1,this.treb_imm=0,this.treb_avg=1,this.treb_long_avg=1}return(0,a.default)(t,[{key:"updateAudioLevels",value:function(e,i){if(this.audio.freqArray.length>0){var r=1e3/e;!t.isFiniteNumber(r)||r<15?r=15:r>120&&(r=120);for(var s=[0,0,0],n=[0,0,0],a=0;a<3;a++)for(var o=Math.floor(this.audio.numSamps*(a/6)),h=Math.floor(this.audio.numSamps*((a+1)/6)),u=o;u<h;u++)n[a]+=this.audio.freqArray[u];for(var l=[this.bass_att,this.mid_att,this.treb_att],f=[this.bass_avg,this.mid_avg,this.treb_avg],c=[this.bass_long_avg,this.mid_long_avg,this.treb_long_avg],m=0;m<3;m++){var g=void 0;g=n[m]>f[m]?.2:.5,g=t.adjustRateToFPS(g,30,r),f[m]=f[m]*g+n[m]*(1-g),g=i<50?.9:.992,g=t.adjustRateToFPS(g,30,r),c[m]=c[m]*g+n[m]*(1-g),Math.abs(c[m])<.001?(s[m]=1,l[m]=1):(s[m]=n[m]/c[m],l[m]=f[m]/c[m])}this.bass=s[0],this.mid=s[1],this.treb=s[2],this.bass_att=l[0],this.mid_att=l[1],this.treb_att=l[2],this.bass_imm=n[0],this.mid_imm=n[1],this.treb_imm=n[2],this.bass_avg=f[0],this.mid_avg=f[1],this.treb_avg=f[2],this.bass_long_avg=c[0],this.mid_long_avg=c[1],this.treb_long_avg=c[2]}}}],[{key:"isFiniteNumber",value:function(t){return(0,s.default)(t)&&!(0,r.default)(t)}},{key:"adjustRateToFPS",value:function(t,e,i){var r=Math.pow(t,e);return Math.pow(r,1/i)}}]),t}();e.default=h,t.exports=e.default},function(t,e,i){t.exports={default:i(36),__esModule:!0}},function(t,e,i){i(37),t.exports=i(5).Number.isNaN},function(t,e,i){var r=i(8);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,i){t.exports={default:i(39),__esModule:!0}},function(t,e,i){i(40),t.exports=i(5).Number.isFinite},function(t,e,i){var r=i(8),s=i(7).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&s(t)}})},function(t,e,i){"use strict";var r;void 0===(r=function(){"use strict;";return{baseVals:{gammaadj:1.25,wave_g:.5,mv_x:12,warpscale:1,brighten:0,mv_y:9,wave_scale:1,echo_alpha:0,additivewave:0,sx:1,sy:1,warp:.01,red_blue:0,wave_mode:0,wave_brighten:0,wrap:0,zoomexp:1,fshader:0,wave_r:.5,echo_zoom:1,wave_smoothing:.75,warpanimspeed:1,wave_dots:0,wave_x:.5,wave_y:.5,zoom:1,solarize:0,modwavealphabyvolume:0,dx:0,cx:.5,dy:0,darken_center:0,cy:.5,invert:0,bmotionvectorson:0,rot:0,modwavealphaend:.95,wave_mystery:-.2,decay:.9,wave_a:1,wave_b:.5,rating:5,modwavealphastart:.75,darken:0,echo_orient:0,ib_r:.5,ib_g:.5,ib_b:.5,ib_a:0,ib_size:0,ob_r:.5,ob_g:.5,ob_b:.5,ob_a:0,ob_size:0,mv_dx:0,mv_dy:0,mv_a:0,mv_r:.5,mv_g:.5,mv_b:.5,mv_l:0},init_eqs:function(){return{}},frame_eqs:function(t){return t.rkeys=["warp"],t.zoom=1.01+.02*t.treb_att,t.warp=.15+.25*t.bass_att,t},pixel_eqs:function(t){return t.warp=t.warp+.15*t.rad,t},waves:[{baseVals:{a:1,enabled:0,b:1,g:1,scaling:1,samples:512,additive:0,usedots:0,spectrum:0,r:1,smoothing:.5,thick:0,sep:0},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},point_eqs:""},{baseVals:{a:1,enabled:0,b:1,g:1,scaling:1,samples:512,additive:0,usedots:0,spectrum:0,r:1,smoothing:.5,thick:0,sep:0},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},point_eqs:""},{baseVals:{a:1,enabled:0,b:1,g:1,scaling:1,samples:512,additive:0,usedots:0,spectrum:0,r:1,smoothing:.5,thick:0,sep:0},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},point_eqs:""},{baseVals:{a:1,enabled:0,b:1,g:1,scaling:1,samples:512,additive:0,usedots:0,spectrum:0,r:1,smoothing:.5,thick:0,sep:0},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},point_eqs:""}],shapes:[{baseVals:{r2:0,a:1,enabled:0,b:0,tex_ang:0,thickoutline:0,g:0,textured:0,g2:1,tex_zoom:1,additive:0,border_a:.1,border_b:1,b2:0,a2:0,r:1,border_g:1,rad:.1,x:.5,y:.5,ang:0,sides:4,border_r:1},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t}},{baseVals:{r2:0,a:1,enabled:0,b:0,tex_ang:0,thickoutline:0,g:0,textured:0,g2:1,tex_zoom:1,additive:0,border_a:.1,border_b:1,b2:0,a2:0,r:1,border_g:1,rad:.1,x:.5,y:.5,ang:0,sides:4,border_r:1},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t}},{baseVals:{r2:0,a:1,enabled:0,b:0,tex_ang:0,thickoutline:0,g:0,textured:0,g2:1,tex_zoom:1,additive:0,border_a:.1,border_b:1,b2:0,a2:0,r:1,border_g:1,rad:.1,x:.5,y:.5,ang:0,sides:4,border_r:1},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t}},{baseVals:{r2:0,a:1,enabled:0,b:0,tex_ang:0,thickoutline:0,g:0,textured:0,g2:1,tex_zoom:1,additive:0,border_a:.1,border_b:1,b2:0,a2:0,r:1,border_g:1,rad:.1,x:.5,y:.5,ang:0,sides:4,border_r:1},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t}}],warp:"shader_body {\nret = texture2D(sampler_main, uv).rgb;\nret -= 0.004;\n}\n",comp:"shader_body {\nret = texture2D(sampler_main, uv).rgb;\nret *= hue_shader;\n}\n"}}.apply(e,[]))||(t.exports=r)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(i(0)),s=o(i(1)),n=o(i(3)),a=o(i(11));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,i){(0,r.default)(this,t),this.preset=e,this.texsizeX=i.texsizeX,this.texsizeY=i.texsizeY,this.mesh_width=i.mesh_width,this.mesh_height=i.mesh_height,this.aspectx=i.aspectx,this.aspecty=i.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.qs=n.default.map(n.default.range(1,33),function(t){return"q"+t}),this.ts=n.default.map(n.default.range(1,9),function(t){return"t"+t}),this.regs=n.default.map(n.default.range(0,100),function(t){return t<10?"reg0"+t:"reg"+t}),this.megabuf=new Array(1048576).fill(0),this.gmegabuf=new Array(1048576).fill(0),this.frameNum=0,this.time=0,this.initializeEquations()}return(0,s.default)(t,[{key:"initializeEquations",value:function(){this.runVertEQs=""!==this.preset.pixel_eqs,this.mdVSQInit=null,this.mdVSFrame=null,this.mdVSUserKeys=null,this.mdVSFrameMap=null,this.mdVSShapes=null,this.mdVSUserKeysShapes=null,this.mdVSFrameMapShapes=null,this.mdVSWaves=null,this.mdVSUserKeysWaves=null,this.mdVSFrameMapWaves=null,this.mdVSQAfterFrame=null,this.mdVS=n.default.clone(this.preset.baseVals);var t={bass:1,bass_att:1,mid:1,mid_att:1,treb:1,treb_att:1,megabuf:this.megabuf,gmegabuf:this.gmegabuf};this.mdVSBaseKeys=n.default.keys(t),this.mdVS=n.default.extend(this.mdVS,t),this.mdVS.rand_start=new Float32Array([Math.random(),Math.random(),Math.random(),Math.random()]),this.mdVS.frame=this.frameNum,this.mdVS.fps=45,this.mdVS.time=this.time,this.mdVS.rand_preset=new Float32Array([Math.random(),Math.random(),Math.random(),Math.random()]),this.mdVS.meshx=this.mesh_width,this.mdVS.meshy=this.mesh_height,this.mdVS.aspectx=this.invAspectx,this.mdVS.aspecty=this.invAspecty,this.mdVS.pixelsx=this.texsizeX,this.mdVS.pixelsy=this.texsizeY;var e=n.default.concat(this.qs,this.ts,this.regs,n.default.keys(this.mdVS),["megabuf","gmegabuf"]),i=n.default.omit(a.default.cloneVars(this.mdVS),n.default.concat(this.qs,this.regs,["megabuf","gmegabuf"]));this.mdVS=this.preset.init_eqs(a.default.cloneVars(this.mdVS)),this.mdVS=n.default.extend(this.mdVS,i),this.mdVSQInit=n.default.pick(this.mdVS,this.qs),this.mdVSFrame=this.preset.frame_eqs(a.default.cloneVars(this.mdVS)),this.mdVSUserKeys=n.default.keys(n.default.omit(this.mdVS,e)),this.mdVSFrameMap=n.default.pick(this.mdVS,this.mdVSUserKeys),this.mdVSQAfterFrame=n.default.pick(this.mdVSFrame,this.qs);var r=n.default.pick(this.mdVSFrame,this.mdVSBaseKeys);if(this.mdVSShapes=[],this.mdVSTShapeInits=[],this.mdVSUserKeysShapes=[],this.mdVSFrameMapShapes=[],this.preset.shapes&&this.preset.shapes.length>0)for(var s=0;s<this.preset.shapes.length;s++){var o=this.preset.shapes[s],h=o.baseVals;if(0!==n.default.get(h,"enabled",0)){var u=n.default.extend(n.default.clone(h),r);u.frame=this.frameNum,u.fps=45,u.time=this.time,u=n.default.extend(u,this.mdVSQAfterFrame);var l=n.default.concat(this.qs,this.ts,n.default.keys(u),["num_inst"]);o.init_eqs&&(u=o.init_eqs(u),u=n.default.extend(u,h)),this.mdVSShapes.push(u),this.mdVSTShapeInits.push(n.default.pick(u,this.ts)),this.mdVSUserKeysShapes.push(n.default.keys(n.default.omit(u,l))),this.mdVSFrameMapShapes.push(n.default.pick(u,this.mdVSUserKeysShapes[s]))}else this.mdVSShapes.push({}),this.mdVSTShapeInits.push({}),this.mdVSUserKeysShapes.push([]),this.mdVSFrameMapShapes.push({})}if(this.mdVSWaves=[],this.mdVSTWaveInits=[],this.mdVSUserKeysWaves=[],this.mdVSFrameMapWaves=[],this.preset.waves&&this.preset.waves.length>0)for(var f=0;f<this.preset.waves.length;f++){var c=this.preset.waves[f],m=c.baseVals;if(0!==n.default.get(m,"enabled",0)){var g=n.default.extend(n.default.clone(m),r);g.frame=this.frameNum,g.fps=45,g.time=this.time,g=n.default.extend(g,this.mdVSQAfterFrame);var d=n.default.concat(this.qs,this.ts,n.default.keys(g));c.init_eqs&&(g=c.init_eqs(g),g=n.default.extend(g,m)),this.mdVSWaves.push(g),this.mdVSTWaveInits.push(n.default.pick(g,this.ts)),this.mdVSUserKeysWaves.push(n.default.keys(n.default.omit(g,d))),this.mdVSFrameMapWaves.push(n.default.pick(g,this.mdVSUserKeysWaves[f]))}else this.mdVSWaves.push({}),this.mdVSTWaveInits.push({}),this.mdVSUserKeysWaves.push([]),this.mdVSFrameMapWaves.push({})}}},{key:"updatePreset",value:function(t){this.preset=t,this.initializeEquations()}},{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.mesh_width=t.mesh_width,this.mesh_height=t.mesh_height,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}},{key:"runFrameEquations",value:function(t){this.frameNum=t.frame,this.time=t.time,this.fps=t.fps,this.mdVS=n.default.extend(a.default.cloneVars(this.mdVS),t),this.mdVSFrame=a.default.cloneVars(this.mdVS),this.mdVSFrame.time=this.time,this.mdVSFrame.x=0,this.mdVSFrame.y=0,this.mdVSFrame.rad=0,this.mdVSFrame.ang=0,this.mdVSFrame=n.default.extend(this.mdVSFrame,this.mdVSQInit),this.mdVSFrame=n.default.extend(this.mdVSFrame,this.mdVSFrameMap),this.mdVSFrame=this.preset.frame_eqs(this.mdVSFrame),this.mdVSFrameMap=n.default.pick(this.mdVSFrame,this.mdVSUserKeys),this.mdVSQAfterFrame=n.default.pick(this.mdVSFrame,this.qs)}}]),t}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(i(0)),s=o(i(1)),n=o(i(2)),a=o(i(24));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.default)(this,t),this.gl=e,this.positions=new Float32Array(1536),this.positions2=new Float32Array(1536),this.oldPositions=new Float32Array(1536),this.oldPositions2=new Float32Array(1536),this.smoothedPositions=new Float32Array(3069),this.smoothedPositions2=new Float32Array(3069),this.color=[0,0,0,1],this.texsizeX=i.texsizeX,this.texsizeY=i.texsizeY,this.aspectx=i.aspectx,this.aspecty=i.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader(),this.vertexBuf=this.gl.createBuffer()}return(0,s.default)(t,[{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}},{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      in vec3 aPos;\n                                      uniform vec2 thickOffset;\n                                      void main(void) {\n                                        gl_Position = vec4(aPos + vec3(thickOffset, 0.0), 1.0);\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      out vec4 fragColor;\n                                      uniform vec4 u_color;\n                                      void main(void) {\n                                        fragColor = u_color;\n                                      }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.aPosLoc=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.colorLoc=this.gl.getUniformLocation(this.shaderProgram,"u_color"),this.thickOffsetLoc=this.gl.getUniformLocation(this.shaderProgram,"thickOffset")}},{key:"generateWaveform",value:function(e,i,r,s,n){var o=n.wave_a,h=(n.bass+n.mid+n.treb)/3;if(h>-.01&&o>.001&&r.length>0){var u=t.processWaveform(r,n),l=t.processWaveform(s,n),f=Math.floor(n.wave_mode)%8,c=Math.floor(n.old_wave_mode)%8,m=2*n.wave_x-1,g=2*n.wave_y-1;this.numVert=0,this.oldNumVert=0;for(var d=e&&f!==c?2:1,A=0;A<d;A++){var v=0===A?f:c,p=n.wave_mystery;0!==v&&1!==v&&4!==v||!(p<-1||p>1)||(p=.5*p+.5,p-=Math.floor(p),p=2*(p=Math.abs(p))-1);var _=void 0,x=void 0,b=void 0;if(0===A?(x=this.positions,b=this.positions2):(x=this.oldPositions,b=this.oldPositions2),o=n.wave_a,0===v){if(n.modwavealphabyvolume>0){var T=n.modwavealphaend-n.modwavealphastart;o*=(h-n.modwavealphastart)/T}o=Math.clamp(o,0,1);for(var E=1/((_=Math.floor(u.length/2)+1)-1),y=Math.floor((u.length-_)/2),P=0;P<_-1;P++){var L=.5+.4*l[P+y]+p,R=P*E*2*Math.PI+.2*n.time;if(P<_/10){var S=P/(.1*_);L=(1-(S=.5-.5*Math.cos(S*Math.PI)))*(.5+.4*l[P+_+y]+p)+L*S}x[3*P+0]=L*Math.cos(R)*this.aspecty+m,x[3*P+1]=L*Math.sin(R)*this.aspectx+g,x[3*P+2]=0}x[3*(_-1)+0]=x[0],x[3*(_-1)+1]=x[1],x[3*(_-1)+2]=0}else if(1===v){if(o*=1.25,n.modwavealphabyvolume>0){var w=n.modwavealphaend-n.modwavealphastart;o*=(h-n.modwavealphastart)/w}o=Math.clamp(o,0,1),_=Math.floor(u.length/2);for(var M=0;M<_;M++){var U=.53+.43*l[M]+p,q=.5*u[M+32]*Math.PI+2.3*n.time;x[3*M+0]=U*Math.cos(q)*this.aspecty+m,x[3*M+1]=U*Math.sin(q)*this.aspectx+g,x[3*M+2]=0}}else if(2===v){if(this.texsizeX<1024?o*=.09:this.texsizeX>=1024&&this.texsizeX<2048?o*=.11:o*=.13,n.modwavealphabyvolume>0){var F=n.modwavealphaend-n.modwavealphastart;o*=(h-n.modwavealphastart)/F}o=Math.clamp(o,0,1),_=u.length;for(var z=0;z<u.length;z++)x[3*z+0]=l[z]*this.aspecty+m,x[3*z+1]=u[(z+32)%u.length]*this.aspectx+g,x[3*z+2]=0}else if(3===v){if(this.texsizeX<1024?o*=.15:this.texsizeX>=1024&&this.texsizeX<2048?o*=.22:o*=.33,o*=1.3,o*=n.treb*n.treb,n.modwavealphabyvolume>0){var B=n.modwavealphaend-n.modwavealphastart;o*=(h-n.modwavealphastart)/B}o=Math.clamp(o,0,1),_=u.length;for(var V=0;V<u.length;V++)x[3*V+0]=l[V]*this.aspecty+m,x[3*V+1]=u[(V+32)%u.length]*this.aspectx+g,x[3*V+2]=0}else if(4===v){if(n.modwavealphabyvolume>0){var I=n.modwavealphaend-n.modwavealphastart;o*=(h-n.modwavealphastart)/I}o=Math.clamp(o,0,1),(_=u.length)>this.texsizeX/3&&(_=Math.floor(this.texsizeX/3));for(var D=1/_,C=Math.floor((u.length-_)/2),X=.45+.5*(.5*p+.5),k=1-X,N=0;N<_;N++){var W=2*N*D+(m-1)+.44*l[(N+25+C)%u.length],O=.47*u[N+C]+g;N>1&&(W=W*k+X*(2*x[3*(N-1)+0]-x[3*(N-2)+0]),O=O*k+X*(2*x[3*(N-1)+1]-x[3*(N-2)+1])),x[3*N+0]=W,x[3*N+1]=O,x[3*N+2]=0}}else if(5===v){if(this.texsizeX<1024?o*=.09:this.texsizeX>=1024&&this.texsizeX<2048?o*=.11:o*=.13,n.modwavealphabyvolume>0){var Q=n.modwavealphaend-n.modwavealphastart;o*=(h-n.modwavealphastart)/Q}o=Math.clamp(o,0,1);var j=Math.cos(.3*n.time),Y=Math.sin(.3*n.time);_=u.length;for(var K=0;K<u.length;K++){var G=(K+32)%u.length,H=l[K]*u[G]+u[K]*l[G],J=l[K]*l[K]-u[G]*u[G];x[3*K+0]=(H*j-J*Y)*(this.aspecty+m),x[3*K+1]=(H*Y+J*j)*(this.aspectx+g),x[3*K+2]=0}}else if(6===v||7===v){if(n.modwavealphabyvolume>0){var Z=n.modwavealphaend-n.modwavealphastart;o*=(h-n.modwavealphastart)/Z}o=Math.clamp(o,0,1),(_=Math.floor(u.length/2))>this.texsizeX/3&&(_=Math.floor(this.texsizeX/3));for(var $=Math.floor((u.length-_)/2),tt=.5*Math.PI*p,et=Math.cos(tt),it=Math.sin(tt),rt=[m*Math.cos(tt+.5*Math.PI)-3*et,m*Math.cos(tt+.5*Math.PI)+3*et],st=[m*Math.sin(tt+.5*Math.PI)-3*it,m*Math.sin(tt+.5*Math.PI)+3*it],nt=0;nt<2;nt++)for(var at=0;at<4;at++){var ot=void 0,ht=!1;switch(at){case 0:rt[nt]>1.1&&(ot=(1.1-rt[1-nt])/(rt[nt]-rt[1-nt]),ht=!0);break;case 1:rt[nt]<-1.1&&(ot=(-1.1-rt[1-nt])/(rt[nt]-rt[1-nt]),ht=!0);break;case 2:st[nt]>1.1&&(ot=(1.1-st[1-nt])/(st[nt]-st[1-nt]),ht=!0);break;case 3:st[nt]<-1.1&&(ot=(-1.1-st[1-nt])/(st[nt]-st[1-nt]),ht=!0)}if(ht){var ut=rt[nt]-rt[1-nt],lt=st[nt]-st[1-nt];rt[nt]=rt[1-nt]+ut*ot,st[nt]=st[1-nt]+lt*ot}}et=(rt[1]-rt[0])/_,it=(st[1]-st[0])/_;var ft=Math.atan2(it,et),ct=Math.cos(ft+.5*Math.PI),mt=Math.sin(ft+.5*Math.PI);if(6===v)for(var gt=0;gt<_;gt++){var dt=u[gt+$];x[3*gt+0]=rt[0]+et*gt+.25*ct*dt,x[3*gt+1]=st[0]+it*gt+.25*mt*dt,x[3*gt+2]=0}else if(7===v){for(var At=Math.pow(.5*g+.5,2),vt=0;vt<_;vt++){var pt=u[vt+$];x[3*vt+0]=rt[0]+et*vt+ct*(.25*pt+At),x[3*vt+1]=st[0]+it*vt+mt*(.25*pt+At),x[3*vt+2]=0}for(var _t=0;_t<_;_t++){var xt=l[_t+$];b[3*_t+0]=rt[0]+et*_t+ct*(.25*xt-At),b[3*_t+1]=st[0]+it*_t+mt*(.25*xt-At),b[3*_t+2]=0}}}0===A?(this.positions=x,this.positions2=b,this.numVert=_,this.alpha=o):(this.oldPositions=x,this.oldPositions2=b,this.oldNumVert=_,this.oldAlpha=o)}var bt=.5-.5*Math.cos(3.1415926535898*i),Tt=1-bt;this.oldNumVert>0&&(o=bt*this.alpha+Tt*this.oldAlpha);var Et=Math.clamp(n.wave_r,0,1),yt=Math.clamp(n.wave_g,0,1),Pt=Math.clamp(n.wave_b,0,1);if(0!==n.wave_brighten){var Lt=Math.max(Et,yt,Pt);Lt>.01&&(Et/=Lt,yt/=Lt,Pt/=Lt)}if(this.color=[Et,yt,Pt,o],this.oldNumVert>0)if(7===f){for(var Rt=(this.oldNumVert-1)/(2*this.numVert),St=0;St<this.numVert;St++){var wt=St*Rt,Mt=Math.floor(wt),Ut=wt-Mt,qt=this.oldPositions[3*Mt+0]*(1-Ut)+this.oldPositions[3*(Mt+1)+0]*Ut,Ft=this.oldPositions[3*Mt+1]*(1-Ut)+this.oldPositions[3*(Mt+1)+1]*Ut;this.positions[3*St+0]=this.positions[3*St+0]*bt+qt*Tt,this.positions[3*St+1]=this.positions[3*St+1]*bt+Ft*Tt,this.positions[3*St+2]=0}for(var zt=0;zt<this.numVert;zt++){var Bt=(zt+this.numVert)*Rt,Vt=Math.floor(Bt),It=Bt-Vt,Dt=this.oldPositions[3*Vt+0]*(1-It)+this.oldPositions[3*(Vt+1)+0]*It,Ct=this.oldPositions[3*Vt+1]*(1-It)+this.oldPositions[3*(Vt+1)+1]*It;this.positions2[3*zt+0]=this.positions2[3*zt+0]*bt+Dt*Tt,this.positions2[3*zt+1]=this.positions2[3*zt+1]*bt+Ct*Tt,this.positions2[3*zt+2]=0}}else if(7===c){for(var Xt=this.numVert/2,kt=(this.oldNumVert-1)/Xt,Nt=0;Nt<Xt;Nt++){var Wt=Nt*kt,Ot=Math.floor(Wt),Qt=Wt-Ot,jt=this.oldPositions[3*Ot+0]*(1-Qt)+this.oldPositions[3*(Ot+1)+0]*Qt,Yt=this.oldPositions[3*Ot+1]*(1-Qt)+this.oldPositions[3*(Ot+1)+1]*Qt;this.positions[3*Nt+0]=this.positions[3*Nt+0]*bt+jt*Tt,this.positions[3*Nt+1]=this.positions[3*Nt+1]*bt+Yt*Tt,this.positions[3*Nt+2]=0}for(var Kt=0;Kt<Xt;Kt++){var Gt=Kt*kt,Ht=Math.floor(Gt),Jt=Gt-Ht,Zt=this.oldPositions2[3*Ht+0]*(1-Jt)+this.oldPositions2[3*(Ht+1)+0]*Jt,$t=this.oldPositions2[3*Ht+1]*(1-Jt)+this.oldPositions2[3*(Ht+1)+1]*Jt;this.positions2[3*Kt+0]=this.positions[3*(Kt+Xt)+0]*bt+Zt*Tt,this.positions2[3*Kt+1]=this.positions[3*(Kt+Xt)+1]*bt+$t*Tt,this.positions2[3*Kt+2]=0}}else for(var te=(this.oldNumVert-1)/this.numVert,ee=0;ee<this.numVert;ee++){var ie=ee*te,re=Math.floor(ie),se=ie-re,ne=this.oldPositions[3*re+0]*(1-se)+this.oldPositions[3*(re+1)+0]*se,ae=this.oldPositions[3*re+1]*(1-se)+this.oldPositions[3*(re+1)+1]*se;this.positions[3*ee+0]=this.positions[3*ee+0]*bt+ne*Tt,this.positions[3*ee+1]=this.positions[3*ee+1]*bt+ae*Tt,this.positions[3*ee+2]=0}for(var oe=0;oe<this.numVert;oe++)this.positions[3*oe+1]=-this.positions[3*oe+1];if(this.smoothedNumVert=2*this.numVert-1,a.default.smoothWave(this.positions,this.smoothedPositions,this.numVert),7===f||7===c){for(var he=0;he<this.numVert;he++)this.positions2[3*he+1]=-this.positions2[3*he+1];a.default.smoothWave(this.positions2,this.smoothedPositions2,this.numVert)}return!0}return!1}},{key:"drawBasicWaveform",value:function(t,e,i,r,s){if(this.generateWaveform(t,e,i,r,s)){this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.smoothedPositions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLoc),this.gl.uniform4fv(this.colorLoc,this.color);var n=1;0===s.wave_thick&&0===s.wave_dots||(n=4),0!==s.additivewave?this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE):this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);for(var a=0!==s.wave_dots?this.gl.POINTS:this.gl.LINE_STRIP,o=0;o<n;o++)0===o?this.gl.uniform2fv(this.thickOffsetLoc,[0,0]):1===o?this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,0]):2===o?this.gl.uniform2fv(this.thickOffsetLoc,[0,2/this.texsizeY]):3===o&&this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,2/this.texsizeY]),this.gl.drawArrays(a,0,this.smoothedNumVert);if(7==Math.floor(s.wave_mode)%8){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.smoothedPositions2,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLoc);for(var h=0;h<n;h++)0===h?this.gl.uniform2fv(this.thickOffsetLoc,[0,0]):1===h?this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,0]):2===h?this.gl.uniform2fv(this.thickOffsetLoc,[0,2/this.texsizeY]):3===h&&this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,2/this.texsizeY]),this.gl.drawArrays(a,0,this.smoothedNumVert)}}}}],[{key:"processWaveform",value:function(t,e){var i=[],r=e.wave_scale/128,s=e.wave_smoothing,n=r*(1-s);i.push(t[0]*r);for(var a=1;a<t.length;a++)i.push(t[a]*n+i[a-1]*s);return i}}]),t}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(i(0)),s=u(i(1)),n=u(i(3)),a=u(i(11)),o=u(i(2)),h=u(i(24));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e,i,s){(0,r.default)(this,t),this.index=e,this.gl=i,this.pointsData=[new Float32Array(512),new Float32Array(512)],this.positions=new Float32Array(1536),this.colors=new Float32Array(2048),this.smoothedPositions=new Float32Array(3069),this.smoothedColors=new Float32Array(4092),this.texsizeX=s.texsizeX,this.texsizeY=s.texsizeY,this.mesh_width=s.mesh_width,this.mesh_height=s.mesh_height,this.aspectx=s.aspectx,this.aspecty=s.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.positionVertexBuf=this.gl.createBuffer(),this.colorVertexBuf=this.gl.createBuffer(),this.floatPrecision=o.default.getFragmentFloatPrecision(this.gl),this.createShader()}return(0,s.default)(t,[{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.mesh_width=t.mesh_width,this.mesh_height=t.mesh_height,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}},{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      uniform float uSize;\n                                      uniform vec2 thickOffset;\n                                      in vec3 aPos;\n                                      in vec4 aColor;\n                                      out vec4 vColor;\n                                      void main(void) {\n                                        vColor = aColor;\n                                        gl_PointSize = uSize;\n                                        gl_Position = vec4(aPos + vec3(thickOffset, 0.0), 1.0);\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      in vec4 vColor;\n                                      out vec4 fragColor;\n                                      void main(void) {\n                                        fragColor = vColor;\n                                      }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.aPosLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.aColorLocation=this.gl.getAttribLocation(this.shaderProgram,"aColor"),this.sizeLoc=this.gl.getUniformLocation(this.shaderProgram,"uSize"),this.thickOffsetLoc=this.gl.getUniformLocation(this.shaderProgram,"thickOffset")}},{key:"generateWaveform",value:function(e,i,r,s,o,u,l,f){if(0!==n.default.get(l,"baseVals.enabled",0)&&e.length>0){var c=a.default.cloneVars(u.mdVSWaves[this.index]),m=u.mdVSTWaveInits[this.index],g=c.rkeys||[];c=n.default.extend(c,u.mdVSQAfterFrame),c=n.default.extend(c,m),(c=n.default.extend(c,o)).time=u.time,c.frame=u.frameNum,c.meshx=this.mesh_width,c.meshy=this.mesh_height,c.aspectx=this.invAspectx,c.aspecty=this.invAspecty,c.pixelsx=this.texsizeX,c.pixelsy=this.texsizeY,c=n.default.extend(c,u.mdVSFrameMapWaves[this.index]);for(var d=l.frame_eqs(c),A={},v=0;v<g.length;v++){var p=g[v];n.default.includes(u.mdVSUserKeysWaves[this.index],p)||n.default.includes(u.qs,p)||n.default.includes(u.ts,p)||(A[p]=d[p])}Object.prototype.hasOwnProperty.call(d,"samples")?this.samples=d.samples:this.samples=512,this.samples>512&&(this.samples=512),this.samples=Math.floor(this.samples);var _=Math.floor(d.sep),x=d.scaling,b=d.spectrum,T=d.smoothing,E=d.usedots,y=d.r,P=d.g,L=d.b,R=d.a,S=u.mdVS.wave_scale;if(this.samples-=_,this.samples>=2||0!==E&&this.samples>=1){var w=0!==b,M=(w?.15:.004)*x*S,U=w?r:e,q=w?s:i,F=w?0:Math.floor((512-this.samples)/2-_/2),z=w?0:Math.floor((512-this.samples)/2+_/2),B=w?(512-_)/this.samples:1,V=Math.pow(.98*T,.5),I=1-V;this.pointsData[0][0]=U[F],this.pointsData[1][0]=q[z+64];for(var D=1;D<this.samples;D++){var C=U[Math.floor(D*B+F)],X=q[Math.floor(D*B+z+64)%q.length];this.pointsData[0][D]=C*I+this.pointsData[0][D-1]*V,this.pointsData[1][D]=X*I+this.pointsData[1][D-1]*V}for(var k=this.samples-2;k>=0;k--)this.pointsData[0][k]=this.pointsData[0][k]*I+this.pointsData[0][k+1]*V,this.pointsData[1][k]=this.pointsData[1][k]*I+this.pointsData[1][k+1]*V;for(var N=0;N<this.samples;N++)this.pointsData[0][N]*=M,this.pointsData[1][N]*=M;for(var W=0;W<this.samples;W++){d=t.repairPerVertexEQs(d,A);var O=this.pointsData[0][W],Q=this.pointsData[1][W];d.sample=W/(this.samples-1),d.value1=O,d.value2=Q,d.x=.5+O,d.y=.5+Q,d.r=y,d.g=P,d.b=L,d.a=R,""!==l.point_eqs&&(d=l.point_eqs(d));var j=(2*d.x-1)*this.invAspectx,Y=(-2*d.y+1)*this.invAspecty,K=d.r,G=d.g,H=d.b,J=d.a;this.positions[3*W+0]=j,this.positions[3*W+1]=Y,this.positions[3*W+2]=0,this.colors[4*W+0]=K,this.colors[4*W+1]=G,this.colors[4*W+2]=H,this.colors[4*W+3]=J*f}var Z=u.mdVSUserKeysWaves[this.index],$=n.default.pick(d,Z);return u.mdVSFrameMapWaves[this.index]=$,this.mdVSWaveFrame=d,0===E&&h.default.smoothWaveAndColor(this.positions,this.colors,this.smoothedPositions,this.smoothedColors,this.samples),!0}}return!1}},{key:"drawCustomWaveform",value:function(t,e,i,r,s,n,a,o,h,u,l){for(var f=t?2:1,c=0;c<f;c++){var m=1;2===f&&(m=0===c?e:1-e);var g=0===c?o:u,d=0===c?h:l;if(d&&this.generateWaveform(i,r,s,n,a,g,d,m)){this.gl.useProgram(this.shaderProgram);var A=0!==this.mdVSWaveFrame.usedots,v=0!==this.mdVSWaveFrame.thick,p=0!==this.mdVSWaveFrame.additive,_=void 0,x=void 0,b=void 0;A?(_=this.positions,x=this.colors,b=this.samples):(_=this.smoothedPositions,x=this.smoothedColors,b=2*this.samples-1),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,_,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,x,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aColorLocation);var T=1;A?v?this.gl.uniform1f(this.sizeLoc,2+(this.texsizeX>=1024?1:0)):this.gl.uniform1f(this.sizeLoc,1+(this.texsizeX>=1024?1:0)):(this.gl.uniform1f(this.sizeLoc,1),v&&(T=4)),p?this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE):this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);for(var E=A?this.gl.POINTS:this.gl.LINE_STRIP,y=0;y<T;y++)0===y?this.gl.uniform2fv(this.thickOffsetLoc,[0,0]):1===y?this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,0]):2===y?this.gl.uniform2fv(this.thickOffsetLoc,[0,2/this.texsizeY]):3===y&&this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,2/this.texsizeY]),this.gl.drawArrays(E,0,b)}}}}],[{key:"repairPerVertexEQs",value:function(t,e){return n.default.isEmpty(e)||n.default.forEach(e,function(e,i){t[i]=e}),t}}]),t}();e.default=l,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=h(i(0)),s=h(i(1)),n=h(i(3)),a=h(i(11)),o=h(i(2));function h(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i,s){(0,r.default)(this,t),this.index=e,this.gl=i,this.positions=new Float32Array(309),this.colors=new Float32Array(412),this.uvs=new Float32Array(206),this.borderPositions=new Float32Array(306),this.texsizeX=s.texsizeX,this.texsizeY=s.texsizeY,this.mesh_width=s.mesh_width,this.mesh_height=s.mesh_height,this.aspectx=s.aspectx,this.aspecty=s.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.positionVertexBuf=this.gl.createBuffer(),this.colorVertexBuf=this.gl.createBuffer(),this.uvVertexBuf=this.gl.createBuffer(),this.borderPositionVertexBuf=this.gl.createBuffer(),this.floatPrecision=o.default.getFragmentFloatPrecision(this.gl),this.createShader(),this.createBorderShader(),this.mainSampler=this.gl.createSampler(),i.samplerParameteri(this.mainSampler,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR),i.samplerParameteri(this.mainSampler,i.TEXTURE_MAG_FILTER,i.LINEAR),i.samplerParameteri(this.mainSampler,i.TEXTURE_WRAP_S,i.REPEAT),i.samplerParameteri(this.mainSampler,i.TEXTURE_WRAP_T,i.REPEAT)}return(0,s.default)(t,[{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.mesh_width=t.mesh_width,this.mesh_height=t.mesh_height,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}},{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      in vec3 aPos;\n                                      in vec4 aColor;\n                                      in vec2 aUv;\n                                      out vec4 vColor;\n                                      out vec2 vUv;\n                                      void main(void) {\n                                        vColor = aColor;\n                                        vUv = aUv;\n                                        gl_Position = vec4(aPos, 1.0);\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      uniform sampler2D uTexture;\n                                      uniform float uTextured;\n                                      in vec4 vColor;\n                                      in vec2 vUv;\n                                      out vec4 fragColor;\n                                      void main(void) {\n                                        if (uTextured != 0.0) {\n                                          fragColor = texture(uTexture, vUv) * vColor;\n                                        } else {\n                                          fragColor = vColor;\n                                        }\n                                      }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.aPosLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.aColorLocation=this.gl.getAttribLocation(this.shaderProgram,"aColor"),this.aUvLocation=this.gl.getAttribLocation(this.shaderProgram,"aUv"),this.texturedLoc=this.gl.getUniformLocation(this.shaderProgram,"uTextured"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"uTexture")}},{key:"createBorderShader",value:function(){this.borderShaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      in vec3 aBorderPos;\n                                      uniform vec2 thickOffset;\n                                      void main(void) {\n                                        gl_Position = vec4(aBorderPos +\n                                                           vec3(thickOffset, 0.0), 1.0);\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      out vec4 fragColor;\n                                      uniform vec4 uBorderColor;\n                                      void main(void) {\n                                        fragColor = uBorderColor;\n                                      }"),this.gl.compileShader(e),this.gl.attachShader(this.borderShaderProgram,t),this.gl.attachShader(this.borderShaderProgram,e),this.gl.linkProgram(this.borderShaderProgram),this.aBorderPosLoc=this.gl.getAttribLocation(this.borderShaderProgram,"aBorderPos"),this.uBorderColorLoc=this.gl.getUniformLocation(this.borderShaderProgram,"uBorderColor"),this.thickOffsetLoc=this.gl.getUniformLocation(this.shaderProgram,"thickOffset")}},{key:"drawCustomShape",value:function(e,i,r,s,o,h,u,l){for(var f=e?2:1,c=0;c<f;c++){var m=1;2===f&&(m=0===c?i:1-i);var g=0===c?s:h,d=0===c?o:u;if(0!==n.default.get(d,"baseVals.enabled",0)){this.setupShapeBuffers();var A=0!==g.mdVSFrame.wrap?this.gl.REPEAT:this.gl.CLAMP_TO_EDGE;this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_S,A),this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_T,A);var v=a.default.cloneVars(g.mdVSShapes[this.index]),p=g.mdVSTShapeInits[this.index],_=v.rkeys||[];v=n.default.extend(v,g.mdVSQAfterFrame),v=n.default.extend(v,p);for(var x={},b=0;b<_.length;b++){var T=_[b];n.default.includes(g.mdVSUserKeysShapes[this.index],T)||n.default.includes(g.qs,T)||n.default.includes(g.ts,T)||(x[T]=v[T])}(v=n.default.extend(v,r)).time=g.time,v.frame=g.frameNum,v.meshx=this.mesh_width,v.meshy=this.mesh_height,v.aspectx=this.invAspectx,v.aspecty=this.invAspecty,v.pixelsx=this.texsizeX,v.pixelsy=this.texsizeY,v=n.default.extend(v,g.mdVSFrameMapShapes[this.index]);var E=a.default.cloneVars(v),y=n.default.get(v,"num_inst",1);y=Math.clamp(y,1,1024);for(var P=0;P<y;P++){(v=t.repairPerVertexEQs(v,x)).instance=P,v.x=E.x,v.y=E.y,v.rad=E.rad,v.ang=E.ang,v.r=E.r,v.g=E.g,v.b=E.b,v.a=E.a,v.r2=E.r2,v.g2=E.g2,v.b2=E.b2,v.a2=E.a2,v.border_r=E.border_r,v.border_g=E.border_g,v.border_b=E.border_b,v.border_a=E.border_a,v.thickoutline=E.thickoutline,v.textured=E.textured,v.tex_zoom=E.tex_zoom,v.tex_ang=E.tex_ang,v.additive=E.additive;var L=d.frame_eqs(v),R=L.sides;R=Math.clamp(R,3,100),R=Math.floor(R);var S=L.rad,w=L.ang,M=2*L.x-1,U=-2*L.y+1,q=L.r,F=L.g,z=L.b,B=L.a,V=L.r2,I=L.g2,D=L.b2,C=L.a2,X=L.border_r,k=L.border_g,N=L.border_b,W=L.border_a;this.borderColor=[X,k,N,W*m];var O=L.thickoutline,Q=L.textured,j=L.tex_zoom,Y=L.tex_ang,K=L.additive,G=this.borderColor[3]>0,H=Math.abs(Q)>=1,J=Math.abs(O)>=1,Z=Math.abs(K)>=1;this.positions[0]=M,this.positions[1]=U,this.positions[2]=0,this.colors[0]=q,this.colors[1]=F,this.colors[2]=z,this.colors[3]=B*m,H&&(this.uvs[0]=.5,this.uvs[1]=.5);for(var $=.25*Math.PI,tt=1;tt<=R+1;tt++){var et=(tt-1)/R*2*Math.PI,it=et+w+$;if(this.positions[3*tt+0]=M+S*Math.cos(it)*this.aspecty,this.positions[3*tt+1]=U+S*Math.sin(it),this.positions[3*tt+2]=0,this.colors[4*tt+0]=V,this.colors[4*tt+1]=I,this.colors[4*tt+2]=D,this.colors[4*tt+3]=C*m,H){var rt=et+Y+$;this.uvs[2*tt+0]=.5+.5*Math.cos(rt)/j*this.aspecty,this.uvs[2*tt+1]=.5+.5*Math.sin(rt)/j}G&&(this.borderPositions[3*(tt-1)+0]=this.positions[3*tt+0],this.borderPositions[3*(tt-1)+1]=this.positions[3*tt+1],this.borderPositions[3*(tt-1)+2]=this.positions[3*tt+2])}this.mdVSShapeFrame=L,this.drawCustomShapeInstance(l,R,H,G,J,Z)}var st=g.mdVSUserKeysShapes[this.index],nt=n.default.pick(v,st);g.mdVSFrameMapShapes[this.index]=nt}}}},{key:"setupShapeBuffers",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.DYNAMIC_DRAW),this.gl.vertexAttribPointer(this.aPosLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.colors,this.gl.DYNAMIC_DRAW),this.gl.vertexAttribPointer(this.aColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aColorLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.uvVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.uvs,this.gl.DYNAMIC_DRAW),this.gl.vertexAttribPointer(this.aUvLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aUvLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.borderPositionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.borderPositions,this.gl.DYNAMIC_DRAW),this.gl.vertexAttribPointer(this.aBorderPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aBorderPosLoc)}},{key:"drawCustomShapeInstance",value:function(t,e,i,r,s,n){this.gl.useProgram(this.shaderProgram);var a=new Float32Array(this.positions.buffer,0,3*(e+2));this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,a),this.gl.vertexAttribPointer(this.aPosLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLocation);var o=new Float32Array(this.colors.buffer,0,4*(e+2));if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorVertexBuf),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,o),this.gl.vertexAttribPointer(this.aColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aColorLocation),i){var h=new Float32Array(this.uvs.buffer,0,2*(e+2));this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.uvVertexBuf),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,h),this.gl.vertexAttribPointer(this.aUvLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aUvLocation)}if(this.gl.uniform1f(this.texturedLoc,i?1:0),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.bindSampler(0,this.mainSampler),this.gl.uniform1i(this.textureLoc,0),n?this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE):this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_FAN,0,e+2),r){this.gl.useProgram(this.borderShaderProgram);var u=new Float32Array(this.borderPositions.buffer,0,3*(e+1));this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.borderPositionVertexBuf),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,u),this.gl.vertexAttribPointer(this.aBorderPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aBorderPosLoc),this.gl.uniform4fv(this.uBorderColorLoc,this.borderColor);for(var l=s?4:1,f=0;f<l;f++)0===f?this.gl.uniform2fv(this.thickOffsetLoc,[0,0]):1===f?this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,0]):2===f?this.gl.uniform2fv(this.thickOffsetLoc,[0,2/this.texsizeY]):3===f&&this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,2/this.texsizeY]),this.gl.drawArrays(this.gl.LINE_STRIP,0,e+1)}}}],[{key:"repairPerVertexEQs",value:function(t,e){return n.default.isEmpty(e)||n.default.forEach(e,function(e,i){t[i]=e}),t}}]),t}();e.default=u,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(2));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.default)(this,t),this.gl=e,this.positions=new Float32Array(72),this.aspectx=i.aspectx,this.aspecty=i.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader(),this.vertexBuf=this.gl.createBuffer()}return(0,s.default)(t,[{key:"updateGlobals",value:function(t){this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}},{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      in vec3 aPos;\n                                      void main(void) {\n                                        gl_Position = vec4(aPos, 1.0);\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      out vec4 fragColor;\n                                      uniform vec4 u_color;\n                                      void main(void) {\n                                        fragColor = u_color;\n                                      }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.aPosLoc=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.colorLoc=this.gl.getUniformLocation(this.shaderProgram,"u_color")}},{key:"addTriangle",value:function(t,e,i,r){this.positions[t+0]=e[0],this.positions[t+1]=e[1],this.positions[t+2]=e[2],this.positions[t+3]=i[0],this.positions[t+4]=i[1],this.positions[t+5]=i[2],this.positions[t+6]=r[0],this.positions[t+7]=r[1],this.positions[t+8]=r[2]}},{key:"generateBorder",value:function(t,e,i){if(e>0&&t[3]>0){var r=i/2,s=e/2+r,n=2*r,a=2*r,o=2*s,h=2*s,u=[-1+n,-1+h,0],l=[-1+n,1-h,0],f=[-1+o,1-h,0],c=[-1+o,-1+h,0];return this.addTriangle(0,c,l,u),this.addTriangle(9,c,f,l),u=[1-n,-1+h,0],l=[1-n,1-h,0],f=[1-o,1-h,0],c=[1-o,-1+h,0],this.addTriangle(18,u,l,c),this.addTriangle(27,l,f,c),u=[-1+n,-1+a,0],l=[-1+n,h-1,0],f=[1-n,h-1,0],c=[1-n,-1+a,0],this.addTriangle(36,c,l,u),this.addTriangle(45,c,f,l),u=[-1+n,1-a,0],l=[-1+n,1-h,0],f=[1-n,1-h,0],c=[1-n,1-a,0],this.addTriangle(54,u,l,c),this.addTriangle(63,l,f,c),!0}return!1}},{key:"drawBorder",value:function(t,e,i){this.generateBorder(t,e,i)&&(this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLoc),this.gl.uniform4fv(this.colorLoc,t),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLES,0,this.positions.length/3))}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(2));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e,i){(0,r.default)(this,t),this.gl=e,this.aspectx=i.aspectx,this.aspecty=i.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.generatePositions(),this.colors=new Float32Array([0,0,0,3/32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this.positionVertexBuf=this.gl.createBuffer(),this.colorVertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader()}return(0,s.default)(t,[{key:"updateGlobals",value:function(t){this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.generatePositions()}},{key:"generatePositions",value:function(){this.positions=new Float32Array([0,0,0,-.05*this.aspecty,0,0,0,-.05,0,.05*this.aspecty,0,0,0,.05,0,-.05*this.aspecty,0,0])}},{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      in vec3 aPos;\n                                      in vec4 aColor;\n                                      out vec4 vColor;\n                                      void main(void) {\n                                        vColor = aColor;\n                                        gl_Position = vec4(aPos, 1.0);\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      in vec4 vColor;\n                                      out vec4 fragColor;\n                                      void main(void) {\n                                        fragColor = vColor;\n                                      }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.aPosLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.aColorLocation=this.gl.getAttribLocation(this.shaderProgram,"aColor")}},{key:"drawDarkenCenter",value:function(t){0!==t.darken_center&&(this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.colors,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aColorLocation),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_FAN,0,this.positions.length/3))}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(2));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e,i){(0,r.default)(this,t),this.gl=e,this.maxX=64,this.maxY=48,this.positions=new Float32Array(this.maxX*this.maxY*2*3),this.texsizeX=i.texsizeX,this.texsizeY=i.texsizeY,this.mesh_width=i.mesh_width,this.mesh_height=i.mesh_height,this.positionVertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader()}return(0,s.default)(t,[{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.mesh_width=t.mesh_width,this.mesh_height=t.mesh_height}},{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      in vec3 aPos;\n                                      void main(void) {\n                                        gl_Position = vec4(aPos, 1.0);\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      out vec4 fragColor;\n                                      uniform vec4 u_color;\n                                      void main(void) {\n                                        fragColor = u_color;\n                                      }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.aPosLoc=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.colorLoc=this.gl.getUniformLocation(this.shaderProgram,"u_color")}},{key:"getMotionDir",value:function(t,e,i){var r=Math.floor(i*this.mesh_height),s=i*this.mesh_height-r,n=Math.floor(e*this.mesh_width),a=e*this.mesh_width-n,o=n+1,h=r+1,u=this.mesh_width+1,l=void 0,f=void 0;return l=t[2*(r*u+n)+0]*(1-a)*(1-s),f=t[2*(r*u+n)+1]*(1-a)*(1-s),l+=t[2*(r*u+o)+0]*a*(1-s),f+=t[2*(r*u+o)+1]*a*(1-s),l+=t[2*(h*u+n)+0]*(1-a)*s,f+=t[2*(h*u+n)+1]*(1-a)*s,[l+=t[2*(h*u+o)+0]*a*s,1-(f+=t[2*(h*u+o)+1]*a*s)]}},{key:"generateMotionVectors",value:function(t,e){var i=t.mv_a,r=Math.floor(t.mv_x),s=Math.floor(t.mv_y);if(i>.001&&r>0&&s>0){var n=t.mv_x-r,a=t.mv_y-s;r>this.maxX&&(r=this.maxX,n=0),s>this.maxY&&(s=this.maxY,a=0);var o=t.mv_dx,h=t.mv_dy,u=t.mv_l,l=1/this.texsizeX;this.numVecVerts=0;for(var f=0;f<s;f++){var c=(f+.25)/(s+a+.25-1);if((c-=h)>1e-4&&c<.9999)for(var m=0;m<r;m++){var g=(m+.25)/(r+n+.25-1);if((g+=o)>1e-4&&g<.9999){var d=this.getMotionDir(e,g,c),A=d[0],v=d[1],p=A-g,_=v-c;p*=u,_*=u;var x=Math.sqrt(p*p+_*_);x<l&&x>1e-8?(p*=x=l/x,_*=x):(p=l,p=l);var b=2*g-1,T=2*c-1,E=2*(A=g+p)-1,y=2*(v=c+_)-1;this.positions[3*this.numVecVerts+0]=b,this.positions[3*this.numVecVerts+1]=T,this.positions[3*this.numVecVerts+2]=0,this.positions[3*(this.numVecVerts+1)+0]=E,this.positions[3*(this.numVecVerts+1)+1]=y,this.positions[3*(this.numVecVerts+1)+2]=0,this.numVecVerts+=2}}}if(this.numVecVerts>0)return this.color=[t.mv_r,t.mv_g,t.mv_b,i],!0}return!1}},{key:"drawMotionVectors",value:function(t,e){this.generateMotionVectors(t,e)&&(this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLoc),this.gl.uniform4fv(this.colorLoc,this.color),this.gl.lineWidth(1),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.LINES,0,this.numVecVerts))}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(i(0)),s=o(i(1)),n=o(i(3)),a=o(i(2));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,i,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,r.default)(this,t),this.gl=e,this.noise=i,this.image=s,this.texsizeX=n.texsizeX,this.texsizeY=n.texsizeY,this.mesh_width=n.mesh_width,this.mesh_height=n.mesh_height,this.aspectx=n.aspectx,this.aspecty=n.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.buildPositions(),this.indexBuf=e.createBuffer(),this.positionVertexBuf=this.gl.createBuffer(),this.warpUvVertexBuf=this.gl.createBuffer(),this.warpColorVertexBuf=this.gl.createBuffer(),this.floatPrecision=a.default.getFragmentFloatPrecision(this.gl),this.createShader(),this.mainSampler=this.gl.createSampler(),this.mainSamplerFW=this.gl.createSampler(),this.mainSamplerFC=this.gl.createSampler(),this.mainSamplerPW=this.gl.createSampler(),this.mainSamplerPC=this.gl.createSampler(),e.samplerParameteri(this.mainSampler,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.samplerParameteri(this.mainSampler,e.TEXTURE_MAG_FILTER,e.LINEAR),e.samplerParameteri(this.mainSampler,e.TEXTURE_WRAP_S,e.REPEAT),e.samplerParameteri(this.mainSampler,e.TEXTURE_WRAP_T,e.REPEAT),e.samplerParameteri(this.mainSamplerFW,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.samplerParameteri(this.mainSamplerFW,e.TEXTURE_MAG_FILTER,e.LINEAR),e.samplerParameteri(this.mainSamplerFW,e.TEXTURE_WRAP_S,e.REPEAT),e.samplerParameteri(this.mainSamplerFW,e.TEXTURE_WRAP_T,e.REPEAT),e.samplerParameteri(this.mainSamplerFC,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.samplerParameteri(this.mainSamplerFC,e.TEXTURE_MAG_FILTER,e.LINEAR),e.samplerParameteri(this.mainSamplerFC,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.samplerParameteri(this.mainSamplerFC,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.samplerParameteri(this.mainSamplerPW,e.TEXTURE_MIN_FILTER,e.NEAREST_MIPMAP_NEAREST),e.samplerParameteri(this.mainSamplerPW,e.TEXTURE_MAG_FILTER,e.NEAREST),e.samplerParameteri(this.mainSamplerPW,e.TEXTURE_WRAP_S,e.REPEAT),e.samplerParameteri(this.mainSamplerPW,e.TEXTURE_WRAP_T,e.REPEAT),e.samplerParameteri(this.mainSamplerPC,e.TEXTURE_MIN_FILTER,e.NEAREST_MIPMAP_NEAREST),e.samplerParameteri(this.mainSamplerPC,e.TEXTURE_MAG_FILTER,e.NEAREST),e.samplerParameteri(this.mainSamplerPC,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.samplerParameteri(this.mainSamplerPC,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}return(0,s.default)(t,[{key:"buildPositions",value:function(){for(var t=this.mesh_width,e=this.mesh_height,i=t+1,r=e+1,s=2/t,n=2/e,a=[],o=0;o<r;o++)for(var h=o*n-1,u=0;u<i;u++){var l=u*s-1;a.push(l,-h,0)}for(var f=[],c=0;c<e;c++)for(var m=0;m<t;m++){var g=m+i*c,d=m+i*(c+1),A=m+1+i*(c+1),v=m+1+i*c;f.push(g,d,v),f.push(d,A,v)}this.vertices=new Float32Array(a),this.indices=new Uint16Array(f)}},{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.buildPositions()}},{key:"createShader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=void 0,i=void 0;if(0===t.length)e="ret = texture(sampler_main, uv).rgb * decay;",i="";else{var r=a.default.getShaderParts(t);i=r[0],e=r[1]}e=n.default.replace(e,/texture2D/g,"texture"),e=n.default.replace(e,/texture3D/g,"texture"),this.userTextures=a.default.getUserSamplers(i),this.shaderProgram=this.gl.createProgram();var s=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(s,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      const vec2 halfmad = vec2(0.5);\n                                      in vec2 aPos;\n                                      in vec2 aWarpUv;\n                                      in vec4 aWarpColor;\n                                      out vec2 uv;\n                                      out vec2 uv_orig;\n                                      out vec4 vColor;\n                                      void main(void) {\n                                        gl_Position = vec4(aPos, 0.0, 1.0);\n                                        uv_orig = aPos * halfmad + halfmad;\n                                        uv = aWarpUv;\n                                        vColor = aWarpColor;\n                                      }"),this.gl.compileShader(s);var o=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(o,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      precision mediump sampler3D;\n\n                                      in vec2 uv;\n                                      in vec2 uv_orig;\n                                      in vec4 vColor;\n                                      out vec4 fragColor;\n                                      uniform sampler2D sampler_main;\n                                      uniform sampler2D sampler_fw_main;\n                                      uniform sampler2D sampler_fc_main;\n                                      uniform sampler2D sampler_pw_main;\n                                      uniform sampler2D sampler_pc_main;\n                                      uniform sampler2D sampler_blur1;\n                                      uniform sampler2D sampler_blur2;\n                                      uniform sampler2D sampler_blur3;\n                                      uniform sampler2D sampler_noise_lq;\n                                      uniform sampler2D sampler_noise_lq_lite;\n                                      uniform sampler2D sampler_noise_mq;\n                                      uniform sampler2D sampler_noise_hq;\n                                      uniform sampler2D sampler_pw_noise_lq;\n                                      uniform sampler3D sampler_noisevol_lq;\n                                      uniform sampler3D sampler_noisevol_hq;\n                                      uniform float time;\n                                      uniform float decay;\n                                      uniform vec2 resolution;\n                                      uniform vec4 aspect;\n                                      uniform vec4 texsize;\n                                      uniform vec4 texsize_noise_lq;\n                                      uniform vec4 texsize_noise_mq;\n                                      uniform vec4 texsize_noise_hq;\n                                      uniform vec4 texsize_noise_lq_lite;\n                                      uniform vec4 texsize_noisevol_lq;\n                                      uniform vec4 texsize_noisevol_hq;\n\n                                      uniform float bass;\n                                      uniform float mid;\n                                      uniform float treb;\n                                      uniform float vol;\n                                      uniform float bass_att;\n                                      uniform float mid_att;\n                                      uniform float treb_att;\n                                      uniform float vol_att;\n\n                                      uniform float frame;\n                                      uniform float fps;\n\n                                      uniform vec4 _qa;\n                                      uniform vec4 _qb;\n                                      uniform vec4 _qc;\n                                      uniform vec4 _qd;\n                                      uniform vec4 _qe;\n                                      uniform vec4 _qf;\n                                      uniform vec4 _qg;\n                                      uniform vec4 _qh;\n\n                                      #define q1 _qa.x\n                                      #define q2 _qa.y\n                                      #define q3 _qa.z\n                                      #define q4 _qa.w\n                                      #define q5 _qb.x\n                                      #define q6 _qb.y\n                                      #define q7 _qb.z\n                                      #define q8 _qb.w\n                                      #define q9 _qc.x\n                                      #define q10 _qc.y\n                                      #define q11 _qc.z\n                                      #define q12 _qc.w\n                                      #define q13 _qd.x\n                                      #define q14 _qd.y\n                                      #define q15 _qd.z\n                                      #define q16 _qd.w\n                                      #define q17 _qe.x\n                                      #define q18 _qe.y\n                                      #define q19 _qe.z\n                                      #define q20 _qe.w\n                                      #define q21 _qf.x\n                                      #define q22 _qf.y\n                                      #define q23 _qf.z\n                                      #define q24 _qf.w\n                                      #define q25 _qg.x\n                                      #define q26 _qg.y\n                                      #define q27 _qg.z\n                                      #define q28 _qg.w\n                                      #define q29 _qh.x\n                                      #define q30 _qh.y\n                                      #define q31 _qh.z\n                                      #define q32 _qh.w\n\n                                      uniform vec4 slow_roam_cos;\n                                      uniform vec4 roam_cos;\n                                      uniform vec4 slow_roam_sin;\n                                      uniform vec4 roam_sin;\n\n                                      uniform float blur1_min;\n                                      uniform float blur1_max;\n                                      uniform float blur2_min;\n                                      uniform float blur2_max;\n                                      uniform float blur3_min;\n                                      uniform float blur3_max;\n\n                                      uniform float scale1;\n                                      uniform float scale2;\n                                      uniform float scale3;\n                                      uniform float bias1;\n                                      uniform float bias2;\n                                      uniform float bias3;\n\n                                      uniform vec4 rand_frame;\n                                      uniform vec4 rand_preset;\n\n                                      float PI = 3.14159265358979323846264;\n\n                                      "+i+"\n\n                                      void main(void) {\n                                        vec3 ret;\n                                        float rad = length(uv_orig - 0.5);\n                                        float ang = atan(uv_orig.x - 0.5, uv_orig.y - 0.5);\n\n                                        "+e+"\n\n                                        fragColor = vec4(ret, 1.0) * vColor;\n                                      }"),this.gl.compileShader(o),this.gl.attachShader(this.shaderProgram,s),this.gl.attachShader(this.shaderProgram,o),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.warpUvLocation=this.gl.getAttribLocation(this.shaderProgram,"aWarpUv"),this.warpColorLocation=this.gl.getAttribLocation(this.shaderProgram,"aWarpColor"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_main"),this.textureFWLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_fw_main"),this.textureFCLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_fc_main"),this.texturePWLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_pw_main"),this.texturePCLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_pc_main"),this.blurTexture1Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur1"),this.blurTexture2Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur2"),this.blurTexture3Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur3"),this.noiseLQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_lq"),this.noiseMQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_mq"),this.noiseHQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_hq"),this.noiseLQLiteLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_lq_lite"),this.noisePointLQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_pw_noise_lq"),this.noiseVolLQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noisevol_lq"),this.noiseVolHQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noisevol_hq"),this.decayLoc=this.gl.getUniformLocation(this.shaderProgram,"decay"),this.texsizeLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize"),this.texsizeNoiseLQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_lq"),this.texsizeNoiseMQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_mq"),this.texsizeNoiseHQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_hq"),this.texsizeNoiseLQLiteLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_lq_lite"),this.texsizeNoiseVolLQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noisevol_lq"),this.texsizeNoiseVolHQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noisevol_hq"),this.resolutionLoc=this.gl.getUniformLocation(this.shaderProgram,"resolution"),this.aspectLoc=this.gl.getUniformLocation(this.shaderProgram,"aspect"),this.bassLoc=this.gl.getUniformLocation(this.shaderProgram,"bass"),this.midLoc=this.gl.getUniformLocation(this.shaderProgram,"mid"),this.trebLoc=this.gl.getUniformLocation(this.shaderProgram,"treb"),this.volLoc=this.gl.getUniformLocation(this.shaderProgram,"vol"),this.bassAttLoc=this.gl.getUniformLocation(this.shaderProgram,"bass_att"),this.midAttLoc=this.gl.getUniformLocation(this.shaderProgram,"mid_att"),this.trebAttLoc=this.gl.getUniformLocation(this.shaderProgram,"treb_att"),this.volAttLoc=this.gl.getUniformLocation(this.shaderProgram,"vol_att"),this.timeLoc=this.gl.getUniformLocation(this.shaderProgram,"time"),this.frameLoc=this.gl.getUniformLocation(this.shaderProgram,"frame"),this.fpsLoc=this.gl.getUniformLocation(this.shaderProgram,"fps"),this.blur1MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur1_min"),this.blur1MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur1_max"),this.blur2MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur2_min"),this.blur2MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur2_max"),this.blur3MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur3_min"),this.blur3MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur3_max"),this.scale1Loc=this.gl.getUniformLocation(this.shaderProgram,"scale1"),this.scale2Loc=this.gl.getUniformLocation(this.shaderProgram,"scale2"),this.scale3Loc=this.gl.getUniformLocation(this.shaderProgram,"scale3"),this.bias1Loc=this.gl.getUniformLocation(this.shaderProgram,"bias1"),this.bias2Loc=this.gl.getUniformLocation(this.shaderProgram,"bias2"),this.bias3Loc=this.gl.getUniformLocation(this.shaderProgram,"bias3"),this.randPresetLoc=this.gl.getUniformLocation(this.shaderProgram,"rand_preset"),this.randFrameLoc=this.gl.getUniformLocation(this.shaderProgram,"rand_frame"),this.qaLoc=this.gl.getUniformLocation(this.shaderProgram,"_qa"),this.qbLoc=this.gl.getUniformLocation(this.shaderProgram,"_qb"),this.qcLoc=this.gl.getUniformLocation(this.shaderProgram,"_qc"),this.qdLoc=this.gl.getUniformLocation(this.shaderProgram,"_qd"),this.qeLoc=this.gl.getUniformLocation(this.shaderProgram,"_qe"),this.qfLoc=this.gl.getUniformLocation(this.shaderProgram,"_qf"),this.qgLoc=this.gl.getUniformLocation(this.shaderProgram,"_qg"),this.qhLoc=this.gl.getUniformLocation(this.shaderProgram,"_qh"),this.slowRoamCosLoc=this.gl.getUniformLocation(this.shaderProgram,"slow_roam_cos"),this.roamCosLoc=this.gl.getUniformLocation(this.shaderProgram,"roam_cos"),this.slowRoamSinLoc=this.gl.getUniformLocation(this.shaderProgram,"slow_roam_sin"),this.roamSinLoc=this.gl.getUniformLocation(this.shaderProgram,"roam_sin");for(var h=0;h<this.userTextures.length;h++){var u=this.userTextures[h];u.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_"+u.sampler)}}},{key:"updateShader",value:function(t){this.createShader(t)}},{key:"bindBlurVals",value:function(t,e){var i=t[0],r=t[1],s=t[2],n=e[0],a=e[1],o=e[2],h=n-i,u=i,l=a-r,f=r,c=o-s,m=s;this.gl.uniform1f(this.blur1MinLoc,i),this.gl.uniform1f(this.blur1MaxLoc,n),this.gl.uniform1f(this.blur2MinLoc,r),this.gl.uniform1f(this.blur2MaxLoc,a),this.gl.uniform1f(this.blur3MinLoc,s),this.gl.uniform1f(this.blur3MaxLoc,o),this.gl.uniform1f(this.scale1Loc,h),this.gl.uniform1f(this.scale2Loc,l),this.gl.uniform1f(this.scale3Loc,c),this.gl.uniform1f(this.bias1Loc,u),this.gl.uniform1f(this.bias2Loc,f),this.gl.uniform1f(this.bias3Loc,m)}},{key:"renderQuadTexture",value:function(t,e,i,r,s,n,a,o,h,u){this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuf),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.indices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertices,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.warpUvVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,h,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.warpUvLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.warpUvLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.warpColorVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,u,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.warpColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.warpColorLocation);var l=0!==o.wrap?this.gl.REPEAT:this.gl.CLAMP_TO_EDGE;this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_S,l),this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_T,l),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(0,this.mainSampler),this.gl.uniform1i(this.textureLoc,0),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(1,this.mainSamplerFW),this.gl.uniform1i(this.textureFWLoc,1),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(2,this.mainSamplerFC),this.gl.uniform1i(this.textureFCLoc,2),this.gl.activeTexture(this.gl.TEXTURE3),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(3,this.mainSamplerPW),this.gl.uniform1i(this.texturePWLoc,3),this.gl.activeTexture(this.gl.TEXTURE4),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(4,this.mainSamplerPC),this.gl.uniform1i(this.texturePCLoc,4),this.gl.activeTexture(this.gl.TEXTURE5),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(this.blurTexture1Loc,5),this.gl.activeTexture(this.gl.TEXTURE6),this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.uniform1i(this.blurTexture2Loc,6),this.gl.activeTexture(this.gl.TEXTURE7),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.uniform1i(this.blurTexture3Loc,7),this.gl.activeTexture(this.gl.TEXTURE8),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexLQ),this.gl.uniform1i(this.noiseLQLoc,8),this.gl.activeTexture(this.gl.TEXTURE9),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexMQ),this.gl.uniform1i(this.noiseMQLoc,9),this.gl.activeTexture(this.gl.TEXTURE10),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexHQ),this.gl.uniform1i(this.noiseHQLoc,10),this.gl.activeTexture(this.gl.TEXTURE11),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexLQLite),this.gl.uniform1i(this.noiseLQLiteLoc,11),this.gl.activeTexture(this.gl.TEXTURE12),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexLQ),this.gl.bindSampler(12,this.noise.noiseTexPointLQ),this.gl.uniform1i(this.noisePointLQLoc,12),this.gl.activeTexture(this.gl.TEXTURE13),this.gl.bindTexture(this.gl.TEXTURE_3D,this.noise.noiseTexVolLQ),this.gl.uniform1i(this.noiseVolLQLoc,13),this.gl.activeTexture(this.gl.TEXTURE14),this.gl.bindTexture(this.gl.TEXTURE_3D,this.noise.noiseTexVolHQ),this.gl.uniform1i(this.noiseVolHQLoc,14);for(var f=0;f<this.userTextures.length;f++){var c=this.userTextures[f];this.gl.activeTexture(this.gl.TEXTURE15+f),this.gl.bindTexture(this.gl.TEXTURE_2D,this.image.getTexture(c.sampler)),this.gl.uniform1i(c.textureLoc,15+f)}this.gl.uniform1f(this.decayLoc,o.decay),this.gl.uniform2fv(this.resolutionLoc,[this.texsizeX,this.texsizeY]),this.gl.uniform4fv(this.aspectLoc,[this.aspectx,this.aspecty,this.invAspectx,this.invAspecty]),this.gl.uniform4fv(this.texsizeLoc,[this.texsizeX,this.texsizeY,1/this.texsizeX,1/this.texsizeY]),this.gl.uniform4fv(this.texsizeNoiseLQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseMQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseHQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseLQLiteLoc,[32,32,1/32,1/32]),this.gl.uniform4fv(this.texsizeNoiseVolLQLoc,[32,32,1/32,1/32]),this.gl.uniform4fv(this.texsizeNoiseVolHQLoc,[32,32,1/32,1/32]),this.gl.uniform1f(this.bassLoc,o.bass),this.gl.uniform1f(this.midLoc,o.mid),this.gl.uniform1f(this.trebLoc,o.treb),this.gl.uniform1f(this.volLoc,(o.bass+o.mid+o.treb)/3),this.gl.uniform1f(this.bassAttLoc,o.bass_att),this.gl.uniform1f(this.midAttLoc,o.mid_att),this.gl.uniform1f(this.trebAttLoc,o.treb_att),this.gl.uniform1f(this.volAttLoc,(o.bass_att+o.mid_att+o.treb_att)/3),this.gl.uniform1f(this.timeLoc,o.time),this.gl.uniform1f(this.frameLoc,o.frame),this.gl.uniform1f(this.fpsLoc,o.fps),this.gl.uniform4fv(this.randPresetLoc,o.rand_preset),this.gl.uniform4fv(this.randFrameLoc,new Float32Array([Math.random(),Math.random(),Math.random(),Math.random()])),this.gl.uniform4fv(this.qaLoc,new Float32Array([o.q1||0,o.q2||0,o.q3||0,o.q4||0])),this.gl.uniform4fv(this.qbLoc,new Float32Array([o.q5||0,o.q6||0,o.q7||0,o.q8||0])),this.gl.uniform4fv(this.qcLoc,new Float32Array([o.q9||0,o.q10||0,o.q11||0,o.q12||0])),this.gl.uniform4fv(this.qdLoc,new Float32Array([o.q13||0,o.q14||0,o.q15||0,o.q16||0])),this.gl.uniform4fv(this.qeLoc,new Float32Array([o.q17||0,o.q18||0,o.q19||0,o.q20||0])),this.gl.uniform4fv(this.qfLoc,new Float32Array([o.q21||0,o.q22||0,o.q23||0,o.q24||0])),this.gl.uniform4fv(this.qgLoc,new Float32Array([o.q25||0,o.q26||0,o.q27||0,o.q28||0])),this.gl.uniform4fv(this.qhLoc,new Float32Array([o.q29||0,o.q30||0,o.q31||0,o.q32||0])),this.gl.uniform4fv(this.slowRoamCosLoc,[.5+.5*Math.cos(.005*o.time),.5+.5*Math.cos(.008*o.time),.5+.5*Math.cos(.013*o.time),.5+.5*Math.cos(.022*o.time)]),this.gl.uniform4fv(this.roamCosLoc,[.5+.5*Math.cos(.3*o.time),.5+.5*Math.cos(1.3*o.time),.5+.5*Math.cos(5*o.time),.5+.5*Math.cos(20*o.time)]),this.gl.uniform4fv(this.slowRoamSinLoc,[.5+.5*Math.sin(.005*o.time),.5+.5*Math.sin(.008*o.time),.5+.5*Math.sin(.013*o.time),.5+.5*Math.sin(.022*o.time)]),this.gl.uniform4fv(this.roamSinLoc,[.5+.5*Math.sin(.3*o.time),.5+.5*Math.sin(1.3*o.time),.5+.5*Math.sin(5*o.time),.5+.5*Math.sin(20*o.time)]),this.bindBlurVals(n,a),t?this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA):this.gl.disable(this.gl.BLEND),this.gl.drawElements(this.gl.TRIANGLES,this.indices.length,this.gl.UNSIGNED_SHORT,0),t||this.gl.enable(this.gl.BLEND)}}]),t}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(i(0)),s=o(i(1)),n=o(i(3)),a=o(i(2));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,i,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,r.default)(this,t),this.gl=e,this.noise=i,this.image=s,this.texsizeX=n.texsizeX,this.texsizeY=n.texsizeY,this.aspectx=n.aspectx,this.aspecty=n.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.buildPositions(),this.indexBuf=e.createBuffer(),this.positionVertexBuf=this.gl.createBuffer(),this.compColorVertexBuf=this.gl.createBuffer(),this.floatPrecision=a.default.getFragmentFloatPrecision(this.gl),this.createShader(),this.mainSampler=this.gl.createSampler(),this.mainSamplerFW=this.gl.createSampler(),this.mainSamplerFC=this.gl.createSampler(),this.mainSamplerPW=this.gl.createSampler(),this.mainSamplerPC=this.gl.createSampler(),e.samplerParameteri(this.mainSampler,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.samplerParameteri(this.mainSampler,e.TEXTURE_MAG_FILTER,e.LINEAR),e.samplerParameteri(this.mainSampler,e.TEXTURE_WRAP_S,e.REPEAT),e.samplerParameteri(this.mainSampler,e.TEXTURE_WRAP_T,e.REPEAT),e.samplerParameteri(this.mainSamplerFW,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.samplerParameteri(this.mainSamplerFW,e.TEXTURE_MAG_FILTER,e.LINEAR),e.samplerParameteri(this.mainSamplerFW,e.TEXTURE_WRAP_S,e.REPEAT),e.samplerParameteri(this.mainSamplerFW,e.TEXTURE_WRAP_T,e.REPEAT),e.samplerParameteri(this.mainSamplerFC,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.samplerParameteri(this.mainSamplerFC,e.TEXTURE_MAG_FILTER,e.LINEAR),e.samplerParameteri(this.mainSamplerFC,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.samplerParameteri(this.mainSamplerFC,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.samplerParameteri(this.mainSamplerPW,e.TEXTURE_MIN_FILTER,e.NEAREST_MIPMAP_NEAREST),e.samplerParameteri(this.mainSamplerPW,e.TEXTURE_MAG_FILTER,e.NEAREST),e.samplerParameteri(this.mainSamplerPW,e.TEXTURE_WRAP_S,e.REPEAT),e.samplerParameteri(this.mainSamplerPW,e.TEXTURE_WRAP_T,e.REPEAT),e.samplerParameteri(this.mainSamplerPC,e.TEXTURE_MIN_FILTER,e.NEAREST_MIPMAP_NEAREST),e.samplerParameteri(this.mainSamplerPC,e.TEXTURE_MAG_FILTER,e.NEAREST),e.samplerParameteri(this.mainSamplerPC,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.samplerParameteri(this.mainSamplerPC,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}return(0,s.default)(t,[{key:"buildPositions",value:function(){for(var t=[],e=0;e<25;e++)for(var i=e*(2/24)-1,r=0;r<33;r++){var s=r*(2/32)-1;t.push(s,-i,0)}for(var n=[],a=0;a<24;a++)for(var o=0;o<32;o++){var h=o+33*a,u=o+33*(a+1),l=o+1+33*(a+1),f=o+1+33*a;n.push(h,u,f),n.push(u,l,f)}this.vertices=new Float32Array(t),this.indices=new Uint16Array(n)}},{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.buildPositions()}},{key:"createShader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=void 0,i=void 0;if(0===t.length)e="float orient_horiz = mod(echo_orientation, 2.0);\n                        float orient_x = (orient_horiz != 0.0) ? -1.0 : 1.0;\n                        float orient_y = (echo_orientation >= 2.0) ? -1.0 : 1.0;\n                        vec2 uv_echo = ((uv - 0.5) *\n                                        (1.0 / echo_zoom) *\n                                        vec2(orient_x, orient_y)) + 0.5;\n\n                        ret = mix(texture(sampler_main, uv).rgb,\n                                  texture(sampler_main, uv_echo).rgb,\n                                  echo_alpha);\n\n                        ret *= gammaAdj;\n\n                        if(fShader >= 1.0) {\n                          ret *= hue_shader;\n                        } else if(fShader > 0.001) {\n                          ret *= (1.0 - fShader) + (fShader * hue_shader);\n                        }\n\n                        if(brighten != 0) ret = sqrt(ret);\n                        if(darken != 0) ret = ret*ret;\n                        if(solarize != 0) ret = ret * (1.0 - ret) * 4.0;\n                        if(invert != 0) ret = 1.0 - ret;",i="";else{var r=a.default.getShaderParts(t);i=r[0],e=r[1]}e=n.default.replace(e,/texture2D/g,"texture"),e=n.default.replace(e,/texture3D/g,"texture"),this.userTextures=a.default.getUserSamplers(i),this.shaderProgram=this.gl.createProgram();var s=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(s,"#version 300 es\n                                      const vec2 halfmad = vec2(0.5);\n                                      in vec2 aPos;\n                                      in vec4 aCompColor;\n                                      out vec2 vUv;\n                                      out vec4 vColor;\n                                      void main(void) {\n                                        gl_Position = vec4(aPos, 0.0, 1.0);\n                                        vUv = aPos * halfmad + halfmad;\n                                        vColor = aCompColor;\n                                      }"),this.gl.compileShader(s);var o=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(o,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      precision mediump sampler3D;\n\n                                      vec3 lum(vec3 v){\n                                          return vec3(dot(v, vec3(0.32,0.49,0.29)));\n                                      }\n\n                                      vec3 calc_hue(vec3 hue_base[ 4 ], vec2 uv) {\n                                          vec3 tA = mix( hue_base[0], hue_base[1], uv.x );\n                                          vec3 tB = mix( hue_base[2], hue_base[3], uv.x );\n                                          return mix( tA, tB, uv.y );\n                                      }\n\n                                      in vec2 vUv;\n                                      in vec4 vColor;\n                                      out vec4 fragColor;\n                                      uniform sampler2D sampler_main;\n                                      uniform sampler2D sampler_fw_main;\n                                      uniform sampler2D sampler_fc_main;\n                                      uniform sampler2D sampler_pw_main;\n                                      uniform sampler2D sampler_pc_main;\n                                      uniform sampler2D sampler_blur1;\n                                      uniform sampler2D sampler_blur2;\n                                      uniform sampler2D sampler_blur3;\n                                      uniform sampler2D sampler_noise_lq;\n                                      uniform sampler2D sampler_noise_lq_lite;\n                                      uniform sampler2D sampler_noise_mq;\n                                      uniform sampler2D sampler_noise_hq;\n                                      uniform sampler2D sampler_pw_noise_lq;\n                                      uniform sampler3D sampler_noisevol_lq;\n                                      uniform sampler3D sampler_noisevol_hq;\n\n                                      uniform float time;\n                                      uniform float gammaAdj;\n                                      uniform float echo_zoom;\n                                      uniform float echo_alpha;\n                                      uniform float echo_orientation;\n                                      uniform int invert;\n                                      uniform int brighten;\n                                      uniform int darken;\n                                      uniform int solarize;\n                                      uniform vec2 resolution;\n                                      uniform vec4 aspect;\n                                      uniform vec4 texsize;\n                                      uniform vec4 texsize_noise_lq;\n                                      uniform vec4 texsize_noise_mq;\n                                      uniform vec4 texsize_noise_hq;\n                                      uniform vec4 texsize_noise_lq_lite;\n                                      uniform vec4 texsize_noisevol_lq;\n                                      uniform vec4 texsize_noisevol_hq;\n\n                                      uniform float bass;\n                                      uniform float mid;\n                                      uniform float treb;\n                                      uniform float vol;\n                                      uniform float bass_att;\n                                      uniform float mid_att;\n                                      uniform float treb_att;\n                                      uniform float vol_att;\n\n                                      uniform float frame;\n                                      uniform float fps;\n\n                                      uniform vec4 _qa;\n                                      uniform vec4 _qb;\n                                      uniform vec4 _qc;\n                                      uniform vec4 _qd;\n                                      uniform vec4 _qe;\n                                      uniform vec4 _qf;\n                                      uniform vec4 _qg;\n                                      uniform vec4 _qh;\n\n                                      #define q1 _qa.x\n                                      #define q2 _qa.y\n                                      #define q3 _qa.z\n                                      #define q4 _qa.w\n                                      #define q5 _qb.x\n                                      #define q6 _qb.y\n                                      #define q7 _qb.z\n                                      #define q8 _qb.w\n                                      #define q9 _qc.x\n                                      #define q10 _qc.y\n                                      #define q11 _qc.z\n                                      #define q12 _qc.w\n                                      #define q13 _qd.x\n                                      #define q14 _qd.y\n                                      #define q15 _qd.z\n                                      #define q16 _qd.w\n                                      #define q17 _qe.x\n                                      #define q18 _qe.y\n                                      #define q19 _qe.z\n                                      #define q20 _qe.w\n                                      #define q21 _qf.x\n                                      #define q22 _qf.y\n                                      #define q23 _qf.z\n                                      #define q24 _qf.w\n                                      #define q25 _qg.x\n                                      #define q26 _qg.y\n                                      #define q27 _qg.z\n                                      #define q28 _qg.w\n                                      #define q29 _qh.x\n                                      #define q30 _qh.y\n                                      #define q31 _qh.z\n                                      #define q32 _qh.w\n\n                                      uniform vec4 slow_roam_cos;\n                                      uniform vec4 roam_cos;\n                                      uniform vec4 slow_roam_sin;\n                                      uniform vec4 roam_sin;\n\n                                      uniform float blur1_min;\n                                      uniform float blur1_max;\n                                      uniform float blur2_min;\n                                      uniform float blur2_max;\n                                      uniform float blur3_min;\n                                      uniform float blur3_max;\n\n                                      uniform float scale1;\n                                      uniform float scale2;\n                                      uniform float scale3;\n                                      uniform float bias1;\n                                      uniform float bias2;\n                                      uniform float bias3;\n\n                                      uniform vec4 rand_frame;\n                                      uniform vec4 rand_preset;\n\n                                      uniform vec3 hue_base[ 4 ];\n                                      uniform float fShader;\n\n                                      float PI = 3.14159265358979323846264;\n\n                                      "+i+"\n\n                                      void main(void) {\n                                        vec3 ret;\n                                        vec2 uv = vUv;\n                                        vec2 uv_orig = vUv;\n                                        uv.y = 1.0 - uv.y;\n                                        uv_orig.y = 1.0 - uv_orig.y;\n                                        float rad = length(uv - 0.5);\n                                        float ang = atan(uv.x - 0.5, uv.y - 0.5);\n                                        vec3 hue_shader = calc_hue(hue_base, uv);\n\n                                        "+e+"\n\n                                        fragColor = vec4(ret, 1.0) * vColor;\n                                      }"),this.gl.compileShader(o),this.gl.attachShader(this.shaderProgram,s),this.gl.attachShader(this.shaderProgram,o),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.compColorLocation=this.gl.getAttribLocation(this.shaderProgram,"aCompColor"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_main"),this.textureFWLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_fw_main"),this.textureFCLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_fc_main"),this.texturePWLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_pw_main"),this.texturePCLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_pc_main"),this.blurTexture1Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur1"),this.blurTexture2Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur2"),this.blurTexture3Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur3"),this.noiseLQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_lq"),this.noiseMQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_mq"),this.noiseHQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_hq"),this.noiseLQLiteLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_lq_lite"),this.noisePointLQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_pw_noise_lq"),this.noiseVolLQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noisevol_lq"),this.noiseVolHQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noisevol_hq"),this.timeLoc=this.gl.getUniformLocation(this.shaderProgram,"time"),this.gammaAdjLoc=this.gl.getUniformLocation(this.shaderProgram,"gammaAdj"),this.echoZoomLoc=this.gl.getUniformLocation(this.shaderProgram,"echo_zoom"),this.echoAlphaLoc=this.gl.getUniformLocation(this.shaderProgram,"echo_alpha"),this.echoOrientationLoc=this.gl.getUniformLocation(this.shaderProgram,"echo_orientation"),this.invertLoc=this.gl.getUniformLocation(this.shaderProgram,"invert"),this.brightenLoc=this.gl.getUniformLocation(this.shaderProgram,"brighten"),this.darkenLoc=this.gl.getUniformLocation(this.shaderProgram,"darken"),this.solarizeLoc=this.gl.getUniformLocation(this.shaderProgram,"solarize"),this.texsizeLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize"),this.texsizeNoiseLQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_lq"),this.texsizeNoiseMQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_mq"),this.texsizeNoiseHQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_hq"),this.texsizeNoiseLQLiteLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_lq_lite"),this.texsizeNoiseVolLQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noisevol_lq"),this.texsizeNoiseVolHQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noisevol_hq"),this.resolutionLoc=this.gl.getUniformLocation(this.shaderProgram,"resolution"),this.aspectLoc=this.gl.getUniformLocation(this.shaderProgram,"aspect"),this.bassLoc=this.gl.getUniformLocation(this.shaderProgram,"bass"),this.midLoc=this.gl.getUniformLocation(this.shaderProgram,"mid"),this.trebLoc=this.gl.getUniformLocation(this.shaderProgram,"treb"),this.volLoc=this.gl.getUniformLocation(this.shaderProgram,"vol"),this.bassAttLoc=this.gl.getUniformLocation(this.shaderProgram,"bass_att"),this.midAttLoc=this.gl.getUniformLocation(this.shaderProgram,"mid_att"),this.trebAttLoc=this.gl.getUniformLocation(this.shaderProgram,"treb_att"),this.volAttLoc=this.gl.getUniformLocation(this.shaderProgram,"vol_att"),this.frameLoc=this.gl.getUniformLocation(this.shaderProgram,"frame"),this.fpsLoc=this.gl.getUniformLocation(this.shaderProgram,"fps"),this.blur1MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur1_min"),this.blur1MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur1_max"),this.blur2MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur2_min"),this.blur2MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur2_max"),this.blur3MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur3_min"),this.blur3MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur3_max"),this.scale1Loc=this.gl.getUniformLocation(this.shaderProgram,"scale1"),this.scale2Loc=this.gl.getUniformLocation(this.shaderProgram,"scale2"),this.scale3Loc=this.gl.getUniformLocation(this.shaderProgram,"scale3"),this.bias1Loc=this.gl.getUniformLocation(this.shaderProgram,"bias1"),this.bias2Loc=this.gl.getUniformLocation(this.shaderProgram,"bias2"),this.bias3Loc=this.gl.getUniformLocation(this.shaderProgram,"bias3"),this.randPresetLoc=this.gl.getUniformLocation(this.shaderProgram,"rand_preset"),this.randFrameLoc=this.gl.getUniformLocation(this.shaderProgram,"rand_frame"),this.hueBaseLoc=this.gl.getUniformLocation(this.shaderProgram,"hue_base[0]"),this.fShaderLoc=this.gl.getUniformLocation(this.shaderProgram,"fShader"),this.qaLoc=this.gl.getUniformLocation(this.shaderProgram,"_qa"),this.qbLoc=this.gl.getUniformLocation(this.shaderProgram,"_qb"),this.qcLoc=this.gl.getUniformLocation(this.shaderProgram,"_qc"),this.qdLoc=this.gl.getUniformLocation(this.shaderProgram,"_qd"),this.qeLoc=this.gl.getUniformLocation(this.shaderProgram,"_qe"),this.qfLoc=this.gl.getUniformLocation(this.shaderProgram,"_qf"),this.qgLoc=this.gl.getUniformLocation(this.shaderProgram,"_qg"),this.qhLoc=this.gl.getUniformLocation(this.shaderProgram,"_qh"),this.slowRoamCosLoc=this.gl.getUniformLocation(this.shaderProgram,"slow_roam_cos"),this.roamCosLoc=this.gl.getUniformLocation(this.shaderProgram,"roam_cos"),this.slowRoamSinLoc=this.gl.getUniformLocation(this.shaderProgram,"slow_roam_sin"),this.roamSinLoc=this.gl.getUniformLocation(this.shaderProgram,"roam_sin");for(var h=0;h<this.userTextures.length;h++){var u=this.userTextures[h];u.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_"+u.sampler)}}},{key:"updateShader",value:function(t){this.createShader(t)}},{key:"bindBlurVals",value:function(t,e){var i=t[0],r=t[1],s=t[2],n=e[0],a=e[1],o=e[2],h=n-i,u=i,l=a-r,f=r,c=o-s,m=s;this.gl.uniform1f(this.blur1MinLoc,i),this.gl.uniform1f(this.blur1MaxLoc,n),this.gl.uniform1f(this.blur2MinLoc,r),this.gl.uniform1f(this.blur2MaxLoc,a),this.gl.uniform1f(this.blur3MinLoc,s),this.gl.uniform1f(this.blur3MaxLoc,o),this.gl.uniform1f(this.scale1Loc,h),this.gl.uniform1f(this.scale2Loc,l),this.gl.uniform1f(this.scale3Loc,c),this.gl.uniform1f(this.bias1Loc,u),this.gl.uniform1f(this.bias2Loc,f),this.gl.uniform1f(this.bias3Loc,m)}},{key:"generateHueBase",value:function(t){this.hue_base=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1]);for(var e=0;e<4;e++){this.hue_base[3*e+0]=.6+.3*Math.sin(30*t.time*.0143+3+21*e+t.rand_start[3]),this.hue_base[3*e+1]=.6+.3*Math.sin(30*t.time*.0107+1+13*e+t.rand_start[1]),this.hue_base[3*e+2]=.6+.3*Math.sin(30*t.time*.0129+6+9*e+t.rand_start[2]);for(var i=Math.max(this.hue_base[3*e],this.hue_base[3*e+1],this.hue_base[3*e+2]),r=0;r<3;r++)this.hue_base[3*e+r]=this.hue_base[3*e+r]/i,this.hue_base[3*e+r]=.5+.5*this.hue_base[3*e+r]}}},{key:"renderQuadTexture",value:function(t,e,i,r,s,n,a,o,h){this.generateHueBase(o),this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuf),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.indices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertices,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.compColorVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,h,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.compColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.compColorLocation);var u=0!==o.wrap?this.gl.REPEAT:this.gl.CLAMP_TO_EDGE;this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_S,u),this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_T,u),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(0,this.mainSampler),this.gl.uniform1i(this.textureLoc,0),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(1,this.mainSamplerFW),this.gl.uniform1i(this.textureFWLoc,1),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(2,this.mainSamplerFC),this.gl.uniform1i(this.textureFCLoc,2),this.gl.activeTexture(this.gl.TEXTURE3),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(3,this.mainSamplerPW),this.gl.uniform1i(this.texturePWLoc,3),this.gl.activeTexture(this.gl.TEXTURE4),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(4,this.mainSamplerPC),this.gl.uniform1i(this.texturePCLoc,4),this.gl.activeTexture(this.gl.TEXTURE5),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(this.blurTexture1Loc,5),this.gl.activeTexture(this.gl.TEXTURE6),this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.uniform1i(this.blurTexture2Loc,6),this.gl.activeTexture(this.gl.TEXTURE7),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.uniform1i(this.blurTexture3Loc,7),this.gl.activeTexture(this.gl.TEXTURE8),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexLQ),this.gl.uniform1i(this.noiseLQLoc,8),this.gl.activeTexture(this.gl.TEXTURE9),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexMQ),this.gl.uniform1i(this.noiseMQLoc,9),this.gl.activeTexture(this.gl.TEXTURE10),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexHQ),this.gl.uniform1i(this.noiseHQLoc,10),this.gl.activeTexture(this.gl.TEXTURE11),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexLQLite),this.gl.uniform1i(this.noiseLQLiteLoc,11),this.gl.activeTexture(this.gl.TEXTURE12),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexLQ),this.gl.bindSampler(12,this.noise.noiseTexPointLQ),this.gl.uniform1i(this.noisePointLQLoc,12),this.gl.activeTexture(this.gl.TEXTURE13),this.gl.bindTexture(this.gl.TEXTURE_3D,this.noise.noiseTexVolLQ),this.gl.uniform1i(this.noiseVolLQLoc,13),this.gl.activeTexture(this.gl.TEXTURE14),this.gl.bindTexture(this.gl.TEXTURE_3D,this.noise.noiseTexVolHQ),this.gl.uniform1i(this.noiseVolHQLoc,14);for(var l=0;l<this.userTextures.length;l++){var f=this.userTextures[l];this.gl.activeTexture(this.gl.TEXTURE15+l),this.gl.bindTexture(this.gl.TEXTURE_2D,this.image.getTexture(f.sampler)),this.gl.uniform1i(f.textureLoc,15+l)}this.gl.uniform1f(this.timeLoc,o.time),this.gl.uniform1f(this.gammaAdjLoc,o.gammaadj),this.gl.uniform1f(this.echoZoomLoc,o.echo_zoom),this.gl.uniform1f(this.echoAlphaLoc,o.echo_alpha),this.gl.uniform1f(this.echoOrientationLoc,o.echo_orient),this.gl.uniform1i(this.invertLoc,o.invert),this.gl.uniform1i(this.brightenLoc,o.brighten),this.gl.uniform1i(this.darkenLoc,o.darken),this.gl.uniform1i(this.solarizeLoc,o.solarize),this.gl.uniform2fv(this.resolutionLoc,[this.texsizeX,this.texsizeY]),this.gl.uniform4fv(this.aspectLoc,[this.aspectx,this.aspecty,this.invAspectx,this.invAspecty]),this.gl.uniform4fv(this.texsizeLoc,new Float32Array([this.texsizeX,this.texsizeY,1/this.texsizeX,1/this.texsizeY])),this.gl.uniform4fv(this.texsizeNoiseLQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseMQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseHQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseLQLiteLoc,[32,32,1/32,1/32]),this.gl.uniform4fv(this.texsizeNoiseVolLQLoc,[32,32,1/32,1/32]),this.gl.uniform4fv(this.texsizeNoiseVolHQLoc,[32,32,1/32,1/32]),this.gl.uniform1f(this.bassLoc,o.bass),this.gl.uniform1f(this.midLoc,o.mid),this.gl.uniform1f(this.trebLoc,o.treb),this.gl.uniform1f(this.volLoc,(o.bass+o.mid+o.treb)/3),this.gl.uniform1f(this.bassAttLoc,o.bass_att),this.gl.uniform1f(this.midAttLoc,o.mid_att),this.gl.uniform1f(this.trebAttLoc,o.treb_att),this.gl.uniform1f(this.volAttLoc,(o.bass_att+o.mid_att+o.treb_att)/3),this.gl.uniform1f(this.frameLoc,o.frame),this.gl.uniform1f(this.fpsLoc,o.fps),this.gl.uniform3fv(this.hueBaseLoc,this.hue_base),this.gl.uniform4fv(this.randPresetLoc,o.rand_preset),this.gl.uniform4fv(this.randFrameLoc,new Float32Array([Math.random(),Math.random(),Math.random(),Math.random()])),this.gl.uniform1f(this.fShaderLoc,o.fshader),this.gl.uniform4fv(this.qaLoc,new Float32Array([o.q1||0,o.q2||0,o.q3||0,o.q4||0])),this.gl.uniform4fv(this.qbLoc,new Float32Array([o.q5||0,o.q6||0,o.q7||0,o.q8||0])),this.gl.uniform4fv(this.qcLoc,new Float32Array([o.q9||0,o.q10||0,o.q11||0,o.q12||0])),this.gl.uniform4fv(this.qdLoc,new Float32Array([o.q13||0,o.q14||0,o.q15||0,o.q16||0])),this.gl.uniform4fv(this.qeLoc,new Float32Array([o.q17||0,o.q18||0,o.q19||0,o.q20||0])),this.gl.uniform4fv(this.qfLoc,new Float32Array([o.q21||0,o.q22||0,o.q23||0,o.q24||0])),this.gl.uniform4fv(this.qgLoc,new Float32Array([o.q25||0,o.q26||0,o.q27||0,o.q28||0])),this.gl.uniform4fv(this.qhLoc,new Float32Array([o.q29||0,o.q30||0,o.q31||0,o.q32||0])),this.gl.uniform4fv(this.slowRoamCosLoc,[.5+.5*Math.cos(.005*o.time),.5+.5*Math.cos(.008*o.time),.5+.5*Math.cos(.013*o.time),.5+.5*Math.cos(.022*o.time)]),this.gl.uniform4fv(this.roamCosLoc,[.5+.5*Math.cos(.3*o.time),.5+.5*Math.cos(1.3*o.time),.5+.5*Math.cos(5*o.time),.5+.5*Math.cos(20*o.time)]),this.gl.uniform4fv(this.slowRoamSinLoc,[.5+.5*Math.sin(.005*o.time),.5+.5*Math.sin(.008*o.time),.5+.5*Math.sin(.013*o.time),.5+.5*Math.sin(.022*o.time)]),this.gl.uniform4fv(this.roamSinLoc,[.5+.5*Math.sin(.3*o.time),.5+.5*Math.sin(1.3*o.time),.5+.5*Math.sin(5*o.time),.5+.5*Math.sin(20*o.time)]),this.bindBlurVals(n,a),t?this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA):this.gl.disable(this.gl.BLEND),this.gl.drawElements(this.gl.TRIANGLES,this.indices.length,this.gl.UNSIGNED_SHORT,0),t||this.gl.enable(this.gl.BLEND)}}]),t}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(2));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e,i){(0,r.default)(this,t),this.gl=e,this.textureRatio=i.textureRatio,this.texsizeX=i.texsizeX,this.texsizeY=i.texsizeY,this.positions=new Float32Array([-1,-1,1,-1,-1,1,1,1]),this.vertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.useFXAA()?this.createFXAAShader():this.createShader()}return(0,s.default)(t,[{key:"useFXAA",value:function(){return this.textureRatio<=1}},{key:"updateGlobals",value:function(t){this.textureRatio=t.textureRatio,this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.gl.deleteProgram(this.shaderProgram),this.useFXAA()?this.createFXAAShader():this.createShader()}},{key:"createFXAAShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n       const vec2 halfmad = vec2(0.5);\n       in vec2 aPos;\n       out vec2 v_rgbM;\n       out vec2 v_rgbNW;\n       out vec2 v_rgbNE;\n       out vec2 v_rgbSW;\n       out vec2 v_rgbSE;\n       uniform vec4 texsize;\n       void main(void) {\n         gl_Position = vec4(aPos, 0.0, 1.0);\n\n         v_rgbM = aPos * halfmad + halfmad;\n         v_rgbNW = v_rgbM + (vec2(-1.0, -1.0) * texsize.zx);\n         v_rgbNE = v_rgbM + (vec2(1.0, -1.0) * texsize.zx);\n         v_rgbSW = v_rgbM + (vec2(-1.0, 1.0) * texsize.zx);\n         v_rgbSE = v_rgbM + (vec2(1.0, 1.0) * texsize.zx);\n       }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n       precision "+this.floatPrecision+" float;\n       precision highp int;\n       precision mediump sampler2D;\n\n       in vec2 v_rgbM;\n       in vec2 v_rgbNW;\n       in vec2 v_rgbNE;\n       in vec2 v_rgbSW;\n       in vec2 v_rgbSE;\n       out vec4 fragColor;\n       uniform vec4 texsize;\n       uniform sampler2D uTexture;\n\n       #ifndef FXAA_REDUCE_MIN\n         #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n       #endif\n       #ifndef FXAA_REDUCE_MUL\n         #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n       #endif\n       #ifndef FXAA_SPAN_MAX\n         #define FXAA_SPAN_MAX     8.0\n       #endif\n\n       void main(void) {\n         vec4 color;\n         vec3 rgbNW = textureLod(uTexture, v_rgbNW, 0.0).xyz;\n         vec3 rgbNE = textureLod(uTexture, v_rgbNE, 0.0).xyz;\n         vec3 rgbSW = textureLod(uTexture, v_rgbSW, 0.0).xyz;\n         vec3 rgbSE = textureLod(uTexture, v_rgbSE, 0.0).xyz;\n         vec3 rgbM  = textureLod(uTexture, v_rgbM, 0.0).xyz;\n         vec3 luma = vec3(0.299, 0.587, 0.114);\n         float lumaNW = dot(rgbNW, luma);\n         float lumaNE = dot(rgbNE, luma);\n         float lumaSW = dot(rgbSW, luma);\n         float lumaSE = dot(rgbSE, luma);\n         float lumaM  = dot(rgbM,  luma);\n         float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n         float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n         mediump vec2 dir;\n         dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n         dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n         float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                               (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n         float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n         dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n                   max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                   dir * rcpDirMin)) * texsize.zw;\n\n         vec3 rgbA = 0.5 * (\n             textureLod(uTexture, v_rgbM + dir * (1.0 / 3.0 - 0.5), 0.0).xyz +\n             textureLod(uTexture, v_rgbM + dir * (2.0 / 3.0 - 0.5), 0.0).xyz);\n         vec3 rgbB = rgbA * 0.5 + 0.25 * (\n             textureLod(uTexture, v_rgbM + dir * -0.5, 0.0).xyz +\n             textureLod(uTexture, v_rgbM + dir * 0.5, 0.0).xyz);\n\n         float lumaB = dot(rgbB, luma);\n         if ((lumaB < lumaMin) || (lumaB > lumaMax))\n           color = vec4(rgbA, 1.0);\n         else\n           color = vec4(rgbB, 1.0);\n\n         fragColor = color;\n       }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"uTexture"),this.texsizeLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize")}},{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n       const vec2 halfmad = vec2(0.5);\n       in vec2 aPos;\n       out vec2 uv;\n       void main(void) {\n         gl_Position = vec4(aPos, 0.0, 1.0);\n         uv = aPos * halfmad + halfmad;\n       }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n       precision "+this.floatPrecision+" float;\n       precision highp int;\n       precision mediump sampler2D;\n\n       in vec2 uv;\n       out vec4 fragColor;\n       uniform sampler2D uTexture;\n\n       void main(void) {\n         fragColor = vec4(texture(uTexture, uv).rgb, 1.0);\n       }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"uTexture")}},{key:"renderQuadTexture",value:function(t){this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(this.textureLoc,0),this.useFXAA()&&this.gl.uniform4fv(this.texsizeLoc,new Float32Array([this.texsizeX,this.texsizeY,1/this.texsizeX,1/this.texsizeY])),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(i(0)),s=o(i(1)),n=o(i(53)),a=o(i(54));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,i,s){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,r.default)(this,t),this.blurLevel=e,this.blurRatios=i,this.gl=s,this.texsizeX=o.texsizeX,this.texsizeY=o.texsizeY,this.anisoExt=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.blurHorizontalFrameBuffer=this.gl.createFramebuffer(),this.blurVerticalFrameBuffer=this.gl.createFramebuffer(),this.blurHorizontalTexture=this.gl.createTexture(),this.blurVerticalTexture=this.gl.createTexture(),this.setupFrameBufferTextures(),this.blurHorizontal=new a.default(s,this.blurLevel,o),this.blurVertical=new n.default(s,this.blurLevel,o)}return(0,s.default)(t,[{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.setupFrameBufferTextures()}},{key:"getTextureSize",value:function(t){var e=Math.max(this.texsizeX*t,16);e=16*Math.floor((e+3)/16);var i=Math.max(this.texsizeY*t,16);return[e,i=4*Math.floor((i+3)/4)]}},{key:"setupFrameBufferTextures",value:function(){var t=this.blurLevel>0?this.blurRatios[this.blurLevel-1]:[1,1],e=this.blurRatios[this.blurLevel],i=this.getTextureSize(t[1]),r=this.getTextureSize(e[0]);this.bindFrameBufferTexture(this.blurHorizontalFrameBuffer,this.blurHorizontalTexture,r);var s=r,n=this.getTextureSize(e[1]);this.bindFrameBufferTexture(this.blurVerticalFrameBuffer,this.blurVerticalTexture,n),this.horizontalTexsizes=[i,r],this.verticalTexsizes=[s,n]}},{key:"bindFrambufferAndSetViewport",value:function(t,e){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),this.gl.viewport(0,0,e[0],e[1])}},{key:"bindFrameBufferTexture",value:function(t,e,i){if(this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,i[0],i[1],0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array(i[0]*i[1]*4)),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.anisoExt){var r=this.gl.getParameter(this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.gl.texParameterf(this.gl.TEXTURE_2D,this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,r)}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,e,0)}},{key:"renderBlurTexture",value:function(t,e,i,r){this.bindFrambufferAndSetViewport(this.blurHorizontalFrameBuffer,this.horizontalTexsizes[1]),this.blurHorizontal.renderQuadTexture(t,e,i,r,this.horizontalTexsizes[0]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.blurHorizontalTexture),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.bindFrambufferAndSetViewport(this.blurVerticalFrameBuffer,this.verticalTexsizes[1]),this.blurVertical.renderQuadTexture(this.blurHorizontalTexture,e,this.verticalTexsizes[0]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.blurVerticalTexture),this.gl.generateMipmap(this.gl.TEXTURE_2D)}}]),t}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(i(0)),s=o(i(1)),n=o(i(3)),a=o(i(2));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,i){(0,r.default)(this,t),this.gl=e,this.blurLevel=i;var s=[4,3.8,3.5,2.9,1.9,1.2,.7,.3],n=s[0]+s[1]+s[2]+s[3],o=s[4]+s[5]+s[6]+s[7],h=0+(s[2]+s[3])/n*2,u=2+(s[6]+s[7])/o*2;this.wds=new Float32Array([n,o,h,u]),this.wDiv=1/(2*(n+o)),this.positions=new Float32Array([-1,-1,1,-1,-1,1,1,1]),this.vertexBuf=this.gl.createBuffer(),this.floatPrecision=a.default.getFragmentFloatPrecision(this.gl),this.createShader()}return(0,s.default)(t,[{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      const vec2 halfmad = vec2(0.5);\n                                      in vec2 aPos;\n                                      out vec2 uv;\n                                      void main(void) {\n                                        gl_Position = vec4(aPos, 0.0, 1.0);\n                                        uv = aPos * halfmad + halfmad;\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n       precision "+this.floatPrecision+" float;\n       precision highp int;\n       precision mediump sampler2D;\n\n       in vec2 uv;\n       out vec4 fragColor;\n       uniform sampler2D uTexture;\n       uniform vec4 texsize;\n       uniform float ed1;\n       uniform float ed2;\n       uniform float ed3;\n       uniform vec4 wds;\n       uniform float wdiv;\n\n       void main(void) {\n         float w1 = wds[0];\n         float w2 = wds[1];\n         float d1 = wds[2];\n         float d2 = wds[3];\n\n         vec2 uv2 = uv.xy - texsize.zw * vec2(0.5, 0.5);\n\n         vec3 blur =\n           ( texture(uTexture, uv2 + vec2(0.0, d1 * texsize.w) ).xyz\n           + texture(uTexture, uv2 + vec2(0.0,-d1 * texsize.w) ).xyz) * w1 +\n           ( texture(uTexture, uv2 + vec2(0.0, d2 * texsize.w) ).xyz\n           + texture(uTexture, uv2 + vec2(0.0,-d2 * texsize.w) ).xyz) * w2;\n\n         blur.xyz *= wdiv;\n\n         float t = min(min(uv.x, uv.y), 1.0 - max(uv.x, uv.y));\n         t = sqrt(t);\n         t = ed1 + ed2 * clamp(t * ed3, 0.0, 1.0);\n         blur.xyz *= t;\n\n         fragColor = vec4(blur, 1.0);\n       }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"uTexture"),this.texsizeLocation=this.gl.getUniformLocation(this.shaderProgram,"texsize"),this.ed1Loc=this.gl.getUniformLocation(this.shaderProgram,"ed1"),this.ed2Loc=this.gl.getUniformLocation(this.shaderProgram,"ed2"),this.ed3Loc=this.gl.getUniformLocation(this.shaderProgram,"ed3"),this.wdsLocation=this.gl.getUniformLocation(this.shaderProgram,"wds"),this.wdivLoc=this.gl.getUniformLocation(this.shaderProgram,"wdiv")}},{key:"renderQuadTexture",value:function(t,e,i){this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(this.textureLoc,0);var r=0===this.blurLevel?n.default.get(e,"b1ed",.25):0;this.gl.uniform4fv(this.texsizeLocation,[i[0],i[1],1/i[0],1/i[1]]),this.gl.uniform1f(this.ed1Loc,1-r),this.gl.uniform1f(this.ed2Loc,r),this.gl.uniform1f(this.ed3Loc,5),this.gl.uniform4fv(this.wdsLocation,this.wds),this.gl.uniform1f(this.wdivLoc,this.wDiv),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}}]),t}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(2));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e,i){(0,r.default)(this,t),this.gl=e,this.blurLevel=i;var s=[4,3.8,3.5,2.9,1.9,1.2,.7,.3],a=s[0]+s[1],o=s[2]+s[3],h=s[4]+s[5],u=s[6]+s[7],l=0+2*s[1]/a,f=2+2*s[3]/o,c=4+2*s[5]/h,m=6+2*s[7]/u;this.ws=new Float32Array([a,o,h,u]),this.ds=new Float32Array([l,f,c,m]),this.wDiv=.5/(a+o+h+u),this.positions=new Float32Array([-1,-1,1,-1,-1,1,1,1]),this.vertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader()}return(0,s.default)(t,[{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      const vec2 halfmad = vec2(0.5);\n                                      in vec2 aPos;\n                                      out vec2 uv;\n                                      void main(void) {\n                                        gl_Position = vec4(aPos, 0.0, 1.0);\n                                        uv = aPos * halfmad + halfmad;\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n       precision "+this.floatPrecision+" float;\n       precision highp int;\n       precision mediump sampler2D;\n\n       in vec2 uv;\n       out vec4 fragColor;\n       uniform sampler2D uTexture;\n       uniform vec4 texsize;\n       uniform float scale;\n       uniform float bias;\n       uniform vec4 ws;\n       uniform vec4 ds;\n       uniform float wdiv;\n\n       void main(void) {\n         float w1 = ws[0];\n         float w2 = ws[1];\n         float w3 = ws[2];\n         float w4 = ws[3];\n         float d1 = ds[0];\n         float d2 = ds[1];\n         float d3 = ds[2];\n         float d4 = ds[3];\n\n         vec2 uv2 = uv.xy + texsize.zw * vec2(0.5, 0.5);\n\n         vec3 blur =\n           ( texture(uTexture, uv2 + vec2( d1 * texsize.z,0.0) ).xyz\n           + texture(uTexture, uv2 + vec2(-d1 * texsize.z,0.0) ).xyz) * w1 +\n           ( texture(uTexture, uv2 + vec2( d2 * texsize.z,0.0) ).xyz\n           + texture(uTexture, uv2 + vec2(-d2 * texsize.z,0.0) ).xyz) * w2 +\n           ( texture(uTexture, uv2 + vec2( d3 * texsize.z,0.0) ).xyz\n           + texture(uTexture, uv2 + vec2(-d3 * texsize.z,0.0) ).xyz) * w3 +\n           ( texture(uTexture, uv2 + vec2( d4 * texsize.z,0.0) ).xyz\n           + texture(uTexture, uv2 + vec2(-d4 * texsize.z,0.0) ).xyz) * w4;\n\n         blur.xyz *= wdiv;\n         blur.xyz = blur.xyz * scale + bias;\n\n         fragColor = vec4(blur, 1.0);\n       }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"uTexture"),this.texsizeLocation=this.gl.getUniformLocation(this.shaderProgram,"texsize"),this.scaleLoc=this.gl.getUniformLocation(this.shaderProgram,"scale"),this.biasLoc=this.gl.getUniformLocation(this.shaderProgram,"bias"),this.wsLoc=this.gl.getUniformLocation(this.shaderProgram,"ws"),this.dsLocation=this.gl.getUniformLocation(this.shaderProgram,"ds"),this.wdivLoc=this.gl.getUniformLocation(this.shaderProgram,"wdiv")}},{key:"getScaleAndBias",value:function(t,e){var i=[1,1,1],r=[0,0,0],s=void 0,n=void 0;return i[0]=1/(e[0]-t[0]),r[0]=-t[0]*i[0],s=(t[1]-t[0])/(e[0]-t[0]),n=(e[1]-t[0])/(e[0]-t[0]),i[1]=1/(n-s),r[1]=-s*i[1],s=(t[2]-t[1])/(e[1]-t[1]),n=(e[2]-t[1])/(e[1]-t[1]),i[2]=1/(n-s),r[2]=-s*i[2],{scale:i[this.blurLevel],bias:r[this.blurLevel]}}},{key:"renderQuadTexture",value:function(t,e,i,r,s){this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(this.textureLoc,0);var n=this.getScaleAndBias(i,r),a=n.scale,o=n.bias;this.gl.uniform4fv(this.texsizeLocation,[s[0],s[1],1/s[0],1/s[1]]),this.gl.uniform1f(this.scaleLoc,a),this.gl.uniform1f(this.biasLoc,o),this.gl.uniform4fv(this.wsLoc,this.ws),this.gl.uniform4fv(this.dsLocation,this.ds),this.gl.uniform1f(this.wdivLoc,this.wDiv),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),s=n(i(1));function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e){(0,r.default)(this,t),this.gl=e,this.anisoExt=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.noiseTexLQ=this.gl.createTexture(),this.noiseTexLQLite=this.gl.createTexture(),this.noiseTexMQ=this.gl.createTexture(),this.noiseTexHQ=this.gl.createTexture(),this.noiseTexVolLQ=this.gl.createTexture(),this.noiseTexVolHQ=this.gl.createTexture(),this.nTexArrLQ=t.createNoiseTex(256,1),this.nTexArrLQLite=t.createNoiseTex(32,1),this.nTexArrMQ=t.createNoiseTex(256,4),this.nTexArrHQ=t.createNoiseTex(256,8),this.nTexArrVolLQ=t.createNoiseVolTex(32,1),this.nTexArrVolHQ=t.createNoiseVolTex(32,4),this.bindTexture(this.noiseTexLQ,this.nTexArrLQ,256,256),this.bindTexture(this.noiseTexLQLite,this.nTexArrLQLite,32,32),this.bindTexture(this.noiseTexMQ,this.nTexArrMQ,256,256),this.bindTexture(this.noiseTexHQ,this.nTexArrHQ,256,256),this.bindTexture3D(this.noiseTexVolLQ,this.nTexArrVolLQ,32,32,32),this.bindTexture3D(this.noiseTexVolHQ,this.nTexArrVolHQ,32,32,32),this.noiseTexPointLQ=this.gl.createSampler(),e.samplerParameteri(this.noiseTexPointLQ,e.TEXTURE_MIN_FILTER,e.NEAREST_MIPMAP_NEAREST),e.samplerParameteri(this.noiseTexPointLQ,e.TEXTURE_MAG_FILTER,e.NEAREST),e.samplerParameteri(this.noiseTexPointLQ,e.TEXTURE_WRAP_S,e.REPEAT),e.samplerParameteri(this.noiseTexPointLQ,e.TEXTURE_WRAP_T,e.REPEAT)}return(0,s.default)(t,[{key:"bindTexture",value:function(t,e,i,r){if(this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,i,r,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.anisoExt){var s=this.gl.getParameter(this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.gl.texParameterf(this.gl.TEXTURE_2D,this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,s)}}},{key:"bindTexture3D",value:function(t,e,i,r,s){if(this.gl.bindTexture(this.gl.TEXTURE_3D,t),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage3D(this.gl.TEXTURE_3D,0,this.gl.RGBA,i,r,s,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),this.gl.generateMipmap(this.gl.TEXTURE_3D),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.anisoExt){var n=this.gl.getParameter(this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.gl.texParameterf(this.gl.TEXTURE_3D,this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,n)}}}],[{key:"fCubicInterpolate",value:function(t,e,i,r,s){var n=s*s,a=r-i-t+e;return a*(s*n)+(t-e-a)*n+(i-t)*s+e}},{key:"dwCubicInterpolate",value:function(e,i,r,s,n){for(var a=[],o=0;o<4;o++){var h=t.fCubicInterpolate(e[o]/255,i[o]/255,r[o]/255,s[o]/255,n);h=Math.clamp(h,0,1),a[o]=255*h}return a}},{key:"createNoiseVolTex",value:function(e,i){for(var r=e*e*e,s=new Uint8Array(4*r),n=i>1?216:256,a=.5*n,o=0;o<r;o++)s[4*o+0]=Math.floor(Math.random()*n+a),s[4*o+1]=Math.floor(Math.random()*n+a),s[4*o+2]=Math.floor(Math.random()*n+a),s[4*o+3]=Math.floor(Math.random()*n+a);var h=e*e,u=e;if(i>1){for(var l=0;l<e;l+=i)for(var f=0;f<e;f+=i)for(var c=0;c<e;c++)if(c%i!=0){for(var m=Math.floor(c/i)*i+e,g=l*h+f*u,d=[],A=[],v=[],p=[],_=0;_<4;_++)d[_]=s[4*g+(m-i)%e*4+_],A[_]=s[4*g+m%e*4+_],v[_]=s[4*g+(m+i)%e*4+_],p[_]=s[4*g+(m+2*i)%e*4+_];for(var x=c%i/i,b=t.dwCubicInterpolate(d,A,v,p,x),T=0;T<4;T++)s[l*h*4+f*u*4+(4*c+T)]=b[T]}for(var E=0;E<e;E+=i)for(var y=0;y<e;y++)for(var P=0;P<e;P++)if(P%i!=0){for(var L=Math.floor(P/i)*i+e,R=E*h,S=[],w=[],M=[],U=[],q=0;q<4;q++){var F=4*y+4*R+q;S[q]=s[(L-i)%e*u*4+F],w[q]=s[L%e*u*4+F],M[q]=s[(L+i)%e*u*4+F],U[q]=s[(L+2*i)%e*u*4+F]}for(var z=P%i/i,B=t.dwCubicInterpolate(S,w,M,U,z),V=0;V<4;V++)s[P*u*4+(4*y+4*R+V)]=B[V]}for(var I=0;I<e;I++)for(var D=0;D<e;D++)for(var C=0;C<e;C++)if(C%i!=0){for(var X=D*u,k=Math.floor(C/i)*i+e,N=[],W=[],O=[],Q=[],j=0;j<4;j++){var Y=4*I+4*X+j;N[j]=s[(k-i)%e*h*4+Y],W[j]=s[k%e*h*4+Y],O[j]=s[(k+i)%e*h*4+Y],Q[j]=s[(k+2*i)%e*h*4+Y]}for(var K=D%i/i,G=t.dwCubicInterpolate(N,W,O,Q,K),H=0;H<4;H++)s[C*h*4+(4*I+4*X+H)]=G[H]}}return s}},{key:"createNoiseTex",value:function(e,i){for(var r=e*e,s=new Uint8Array(4*r),n=i>1?216:256,a=.5*n,o=0;o<r;o++)s[4*o+0]=Math.floor(Math.random()*n+a),s[4*o+1]=Math.floor(Math.random()*n+a),s[4*o+2]=Math.floor(Math.random()*n+a),s[4*o+3]=Math.floor(Math.random()*n+a);if(i>1){for(var h=0;h<e;h+=i)for(var u=0;u<e;u++)if(u%i!=0){for(var l=Math.floor(u/i)*i+e,f=h*e,c=[],m=[],g=[],d=[],A=0;A<4;A++)c[A]=s[4*f+(l-i)%e*4+A],m[A]=s[4*f+l%e*4+A],g[A]=s[4*f+(l+i)%e*4+A],d[A]=s[4*f+(l+2*i)%e*4+A];for(var v=u%i/i,p=t.dwCubicInterpolate(c,m,g,d,v),_=0;_<4;_++)s[h*e*4+4*u+_]=p[_]}for(var x=0;x<e;x++)for(var b=0;b<e;b++)if(b%i!=0){for(var T=Math.floor(b/i)*i+e,E=[],y=[],P=[],L=[],R=0;R<4;R++)E[R]=s[(T-i)%e*e*4+4*x+R],y[R]=s[T%e*e*4+4*x+R],P[R]=s[(T+i)%e*e*4+4*x+R],L[R]=s[(T+2*i)%e*e*4+4*x+R];for(var S=b%i/i,w=t.dwCubicInterpolate(E,y,P,L,S),M=0;M<4;M++)s[b*e*4+4*x+M]=w[M]}}return s}}]),t}();e.default=a,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(3));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){var i=this;(0,r.default)(this,t),this.gl=e,this.anisoExt=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.samplers={},this.clouds2Image=new Image,this.clouds2Image.onload=function(){i.samplers.clouds2=i.gl.createTexture(),i.bindTexture(i.samplers.clouds2,i.clouds2Image,128,128)},this.clouds2Image.src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4RP+RXhpZgAASUkqAAgAAAAJAA8BAgAGAAAAegAAABABAgAVAAAAgAAAABIBAwABAAAAAQAAABoBBQABAAAAoAAAABsBBQABAAAAqAAAACgBAwABAAAAAgAAADIBAgAUAAAAsAAAABMCAwABAAAAAQAAAGmHBAABAAAAxAAAAGYFAABDYW5vbgBDYW5vbiBQb3dlclNob3QgUzExMAAAAAAAAAAAAAAAAEgAAAABAAAASAAAAAEAAAAyMDAyOjAxOjE5IDE3OjMzOjIwABsAmoIFAAEAAABWAwAAnYIFAAEAAABeAwAAAJAHAAQAAAAwMjEwA5ACABQAAAAOAgAABJACABQAAAAiAgAAAZEHAAQAAAABAgMAApEFAAEAAAA+AwAAAZIKAAEAAABGAwAAApIFAAEAAABOAwAABJIKAAEAAABmAwAABZIFAAEAAABuAwAABpIFAAEAAAB2AwAAB5IDAAEAAAAFAAAACZIDAAEAAAAAAAAACpIFAAEAAAB+AwAAfJIHAJoBAACGAwAAhpIHAAgBAAA2AgAAAKAHAAQAAAAwMTAwAaADAAEAAAABAAAAAqAEAAEAAACAAAAAA6AEAAEAAACAAAAABaAEAAEAAAAwBQAADqIFAAEAAAAgBQAAD6IFAAEAAAAoBQAAEKIDAAEAAAACAAAAF6IDAAEAAAACAAAAAKMHAAEAAAADAAAAAAAAADIwMDI6MDE6MTkgMTc6MzM6MjAAMjAwMjowMToxOSAxNzozMzoyMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAACoBAAAgAAAAuAAAACAAAAABAAAAgAIAAEgAAAAKAAAA/////wMAAACK+AIAAAABAL8BAADoAwAArQAAACAAAAAMAAEAAwAmAAAAHAQAAAIAAwAEAAAAaAQAAAMAAwAEAAAAcAQAAAQAAwAaAAAAeAQAAAAAAwAGAAAArAQAAAAAAwAEAAAAuAQAAAYAAgAgAAAAwAQAAAcAAgAYAAAA4AQAAAgABAABAAAAkc4UAAkAAgAgAAAA+AQAABAABAABAAAAAAAJAQ0AAwAEAAAAGAUAAAAAAABMAAIAAAAFAAAAAAAAAAQAAAABAAAAAQAAAAAAAAAAAAAAAwABAAEwAAD/////WgGtACAAYgC4AP//AAAAAAAAAAAAAP//SABABkAGAgCtANMAngAAAAAAAAAAADQAAACPAEYBtQAqAfT/AgABAAEAAAAAAAAAAAAEMAAAAAAAAAAAvwEAALgAJwEAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAElNRzpQb3dlclNob3QgUzExMCBKUEVHAAAAAAAAAAAARmlybXdhcmUgVmVyc2lvbiAxLjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAMgAuQC5AABqGADOAAAAgE8SAJsAAAAEAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAEQAwABAAAAQAYAAAIQAwABAAAAsAQAAAAAAAAGAAMBAwABAAAABgAAABoBBQABAAAAtAUAABsBBQABAAAAvAUAACgBAwABAAAAAgAAAAECBAABAAAA9AUAAAICBAABAAAAuA0AAAAAAAC0AAAAAQAAALQAAAABAAAAaM5qp6ps7vXbS52etpVdo/tuYZ2wtrDFXnrx1HK+braKpineV1+3VFWVteo72Poc/9j/2wCEAAkGBggGBQkIBwgKCQkLDRYPDQwMDRwTFRAWIR0jIiEcIB8kKTQsJCcxJx4fLT0tMTY3Ojo6Iio/RD44QjM3OTYBCQkJDAoMFAwMFA8KCgoPGhoKChoaTxoaGhoaT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT//AABEIAHgAoAMBIQACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AOdCcU4R11HMSLHTxFTAXy6PLxQIUJTglIDo9KtbWzjScNvnK/gtao1FkycjaO1ebWvOWvyR307RjZfM5zXoraacTW3DtkyD1PrWathui39q66cmoK+60OacU5O2xA8ZQlT2qBkrdfmYsiZMUwpxVCImXNRMntTERlaaRg0CN5Y8iniOszUlWOniOgQhj5o2UwDZS7KBFmAuoCnIAq69wUjIHPHWuaok5HTBtIqrbzXCMyAEDqCarPvGV6Yqlbb+Xch337kBTOd1RNHxgCrc+xKgNWAPxyD2qCWMAY7g81UJ83yJlGxCy4qJlzWqMyMpTClAjoxCUbDCniP2rK5qOVKkEdMA8ummPmgA2Vd0m1S4vMTIXjUEtjtUzdotrdLQcFeSXQfcQqJ2y/GaZL5fkhE5Y9TXPFt2Zu7K6IUinVWVW+XvjvSNCsceScsa0k1067kRT69NisY8mnC2YoWA4qL2KtcglyjcVVdd78daqnK3zImr/IheFgTkdKiZK6ou6MJKxGyUwrTJOxmjaS2WYqwjLHbnp9KBaeeB5MbZxzXLGVlfotzpcdbdXsQiKniOtSBfLppjoTE0NMdPiYxElSRmiSurAnZiSMTzmmKSDmpUdCpS1NvT0TUoHEjpGQcYC8n3qM6MJdxgYuF46VyyfI2ui6nQlzJPq+hDPo0qcKNz/wB0U54Es7co/wAzkcgdAamU01ZbtjUWnrsjDn+dzxiqpjYHK1aZDHJGQmM9ahe2zk+lbU5WZlOOhWZKjKV1nOddYTPLpptjztbcB2NTBXibaSUOOma4IWt+h2y3/Uj8rmlEdbJmLQpTjpTNlNCYnl00x1RI0x00x4oARd6tmPIPtW1o+uf2fGd+GORlcdffNZVaaqRt1NKc+R36HQxWsWoqbmGQ/MMkg4rL1bSdi5UV5fM4ys9LHfZNXXU599Lkd+FNMbSzGPmHNb85lyFaS32HgUx8pGcqK2g72M5aGY8fPSomSvRRwndafZfYtRCzL8rHFaPiPTTHKlxHGEjKhTj1ryKU/wB4uzR6dSPuPujF2YIzTxHxXamtuxyNPfuIY+KYY6okDHg4pHQIMsQKLhYhV0dtq8mr6aQ8loZRy390DNZVKqgr92aQpczKcd8+nXefLHAwVI6028nt7mTzIY/KJ5IB4qI3UuZO6fxIuSTjy21WzLmjXs9rKFidgM/dzxXTJeRECC5ZN5XPWscVTTlePxM0oS0s9kUriaIEiIKAPzrFup/3uBzmopU3fUqc0isTEQWftVWZ0dPlWuqNNr0RhKafqzOlh6mq7x12RZytHqssMcwSfy0wwyDuxRq2oCew8gxjdx1HT3rx6Uby9GenUdkc/wCSpPzdaV4WVeFJru226nLv8iFVc/eXFKYsCqi7omSIjHzS3EKSRZBJbHNOWwRMp4WjO/O0Z4NWUubuGParnafSsXFS0ZonYRo/Pwzcmk8gL0FbQgkjOUncfFK9sSU4JpkkzO+7Jz9atRV7mbk7WHpczAcOT9aUqzgu3Ud6lxSd1oylJvRkMgDZJJzVSTK9KqKJbIGJqJlzWiViG7nfW1/ZK8XJUDqT0q9q08V2sRiL5HAG35SD3Bryaalzps9KduWyKt1pjWoXzG2uRnkcCs+8ee2YKJUbIzx0Iq/bXemiRPs7IY15Ey7m+TA5BrPuNUDIyCMDnhs81rz3SsZ8tmXbFDe2DTKVzHwyk8n6Vl3944Zo04A7jvT9pp5oOTX1Mp5GVsnmtG21aEQKkikFRj604SFKJOmpWrHAYr9RUjMGXKcg9xW0WmYyTREwNN281qZkqphQRwacCMYPHvUPUpCPGhXORmqU0fNEXqEkV2j9qjKVoQa+GAALE47VPDezRYUOdo7V5CkelY0pb+eayOJt4PG1uSKxpEkQkkmp0T9StX8hnm5GCM1GUBzVXsIj+deFYge1NMTueuapyJURr2jMvTmqclq4PK4ohMJRIhGwNadgLolUjDMvcVtz217GfLc2PsuSQQdw7Uw2pU/MCK6FU6eWhg4afmWLeKFkZJcg9mFRzac8MSyMRhumKnns7PZvQOS6utLblaRMLyR9KhkhVVBDZzV21TFeysVXWoiK1MjttV8O/YWyXVgegFZRsTu4FeHdp2e63PWSvqupZtrbadpHFPnst4xgVDlqUkUX03ax7VEbNd3ByapSbFYDYKw4PPpTv7LdT0wRVq703J0XkBtlU7Sy7qje1yMMtJpoaaZWbTCZOB+FdVo+n/ZrRXaEh/pwacptxEo2ZZfRBLmQNskY8g1lXmm3VsS4IZaaxDvZ9NifZK35mUZbp7odD6jGK3jcotogmgUrWsp3tZ2sTGO+nqZr3Flco6JEEdc7eetLDoElxEH81Vz0FbQrOEby9530MZUlJ+7ppqOOgRxDMrqcdumaqz6Xa55YJnphqaxE5PRadgdGKWr17nd+cl4VFzGHAq0NEspRuRNp9K5vYxm3e6b2ZvzuK027CroNsPvLz6iql7oICFkOQO1RPCuMbp3a3Q41ruzWj2MG604xZJrInQoSVHPrXPB3NZEYlm6bM0gup0+SQttPXmt42W25DuRTW7ht6qXX1qxZSSSttZcqPWrjJPfXuiWrbGgFiADHBxW9p1z5dv8AvW3J2B7VbUeXuQnK/kM+0SyTt5GSg/ic8VUv7xpodrDn26Gs5wj0+LqXGT67dDFWLEhfkGo5nklyrE4qlC9vwJcrFRbJVl3GtO1njhTqQR61u4StYyU1civ7sSLtAJ981kSLnPJrelHlRhVlzM7yLTdTtJuu9Qe3NdBbGUorMFJxz2NcFPnUrWO2XK4lsdKCARg13bmBSurCGU4aMtn0qjJ4Xt3YnP0GK4pYbmk+X3bGyq2WvvFKTw5IpIRAR61Fc+Gttvvfn1GOlYeynHVq1uprzxfzKcCW1mdroXU8YIqQR2KA7AxPUgDGKiz3TKutjPnjic74jtB9TzT4p58Bc7yOm6tItrfoQ0mWEubtZf367l7DtUqq1w24gKg6kDpW0FFrm7Gc207dynKqqzAoOehFVmhLdFJ/CumKtuYN9gGnzuPlibmoXs5VJBXkH1qlVjtdEezlvYimtJEXLow/CqErIDWkZp7WZEotbnrsTkjrmphz1rGDutdToloxaK0EMkU9VGSKRDIQd4A9MVm+ZS0+F7selvPoNDuHw3T2oJWUlWH50r3Vn1HtqjG1LSmVS6DdzxxWQ+nTSTcghjXBKPs3Z/I6IvmV/vK7aWYptsp2jua0LG3tllLQZkK8dO9C95227g9FfcmuFnnUrtyF9BUthHhfLkjO0n14zXToo2WhiruV2JqFtFGNyxoSPUVztzrdzBJhdoVewFZJ8zs3dLY0a5dVu9yCTxLKUPyDd2NZE+tXDyF84J74rSMEiJSbKFxqFxMpDyuQe2azpN3dj+dbRlbYzkr7nvCJkYxsP95eDUqxyA584t7EVnTi+j5fLoaSa66+ZOM45orqMgooAYwqNhis5DQ0yMBio2Zm7ZrNu+5VrDNizPsdFI9CKjNrDCuEiCZ6kcVlKEd7fMtSe34DY2jV8YKknvzTLqUQcs+PwqJuyuVHU5TWtVeaX5coq/dGaxpLxpUw4zjvRFKwSepAF85SUGcdRVeaJh/DiqvZ2JsZ86sDz0qBo2xu/hq0yLHvy9KeK2pkvcdRWogpM0AIaYwqJAhNq1FcPKoHlIHHesZNqPu6vsWtXrou5HuK5YLzjjNZ1/c3YiIUZX+8vauec36LqbRivV9DNivriYlWOdo6HmrxleWIBgDx3HSpaugvZmDqFuWYgwKSPQVlsjxIym3BUgjmoXa+xT7lSOzd3PkAq3YZpby8vVASeNendBzWukt+nUz22Jo7S2v4A3lFGxzg1Rm0l4m+UMVPqKlSa03Q2k9T/9n4qqwQ2C6FUcJKhVwpbQ1vCsihOUlK0km1lS0VoSE2qiF4TrpDJE0aZJK5EgBF7pQGeoyWHrHyLxlrwklpeaZbWWmyFkkIa43/2P/bAEMAAgEBAQEBAgEBAQICAgICBAMCAgICBQQEAwQGBQYGBgUGBgYHCQgGBwkHBgYICwgJCgoKCgoGCAsMCwoMCQoKCv/bAEMBAgICAgICBQMDBQoHBgcKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCv/AABEIAIAAgAMBIgACEQEDEQH/xAAeAAACAwEAAwEBAAAAAAAAAAAGBwQFCAMBAgkACv/EADcQAAEDAwMDAgUDAgYCAwAAAAECAwQFBhEAEiEHMUETUQgiMmFxFIGRFaEjQlKxwdEW8ReCov/EABsBAAICAwEAAAAAAAAAAAAAAAUGAwQBAgcA/8QAMREAAgEDAwMCBQMDBQAAAAAAAQIDAAQRBRIhMUFRE3EiYYGRwaHR4QYU8BUjMnKx/9oADAMBAAIRAxEAPwDNEamJCR8v9tT4dJ3Zwn+2rSHStzaVBvOrSDShnBTpvDYpbIBqsi0QKRn0+QO2uwpJQQCjRFEpR8D+2uj1LIXjb/bWwfmtNvFDqaWE/LsHfXZFNB/y6uVU75uUjj7a6NwMfMEfjWd3Fa0f/DB0mtK7KpIum8KgUxqQ+0pmE2EqMlzOQFA/5MgZ/J1q2L1glUxsPtIbbitNpW80EgbwSO+PGsWWjUqhRZy/0Tqkh1OFgH78aaKLzm0i28SnlLddYwk+wGdJH9QafJd3QLtkdh4802aNeRwWxCjBHU+aA/iosex//ktysdPnN8SpAOymM/M1IUo7/wD6k8jS8uTpxPthCJL3yuJSFKGOwPY50wavS7gnU3+vro7i4QXkyA3naoc86FrhnVGqpQl1SvTI5QVZzycHR6zkmiiSMvkLwSevtQe7WJ5HcLyeRS/q0BHqLc9NIKjyB50Pz6cEkkj+2j2qUlDRWfrJSQEgdjqqRbKKkVMJe2uBO5KSngn20SW9t1OC1DjaTsMhaBKhBCWt23A841QVGnBaiQ3n86O67TGWigR1bsg7hjkHPnVFNiJSgpIyc8DRBDxVRhjigmVAAP041CcaW2rcgYI9tE82n5PCedVkqAUkgJ1uQDUXfFaZplIUMsqb2kHke2rGNSylf0g8+2j2rWvRZtbjvxXY7EV14tuymdxzknCiD9hnge+oU+110+WtoLS4hKylDiBwoe/+2gkVysgB80akhZCQao4lMCk528jXRykKJ3bfxq8jUopABT31KXSRn6NS7sVFjihNVM+Y5T24zr1FPIVt26I3aUoEkA9+2uCqaUuDKdShs1oQM0bVvpPAtizaDUKLKVIVUYaZcxTrQSpl4jBQPOE/7k6rK1QUU213PUmJVLeWG4zTSgoff8Ht/Op1239WbjjNqqMgKDLKW0hCQkAJAHYceNC8aprVNbW+nKErG7nxnnGlyG3vJcvIckHP8f4KNyz20QCxjqP4rlFq98KoZs5ptxmKuQQ4kZBK/PPtjx21U3NbopREMhKlgfOQex9taAhdK3uofT7/AMo6eUh2PBElXqOyn0bFKT9XJOQRuHccg6BKn0RvByUUyqI+pxbZWnCchSQcZyOMZxzqs97E5IwFweR3z86nS0dFByWyOD2x8qULduuOOfIwVcZOBquqaEUV9t1EMBQz3HjTz6c9OpUibLl1aKGIsMelIekfKncoHAB8nj9tK/qfDpiqu9Hp3KWyQCR3++q7XStcel4FSiAiLf5pTVmEhcl1aOQok8e+h2bTVBZJGD99HAYnQZKxCYSXHRt3LQFAZ+x17XBbjT0VpLURKNqcFwJ5Ufvpms9VUuEfvQC609gpZaWMqAcnjzxqslQwBx+2jGr0ZyI6WHmsKx/OqaXTu4KfxjxpgBDDNBDuU1t2HUKReHSW0yqB6D9NEhh+Q0jIWvcFBC/bgkhX3I8al1mQ5ULdj0gUeKw2zIW6hbKDuJICeSSf9I0c/Bn0Pi3xcL1o1iSmP6chKz6qcjaPlPB78Ej99D9etp63K1OtySfUMSU4zuAwCUqIz++Nc70q8huB6SHLJz9yaeNQt3hbe3Rhj7AUJMUc8fJru5S0+n9HI99EcOkFxO5ScY9hr2k0hIbPy+PbTCX3UEA2mg1ym7gfl51Hk0rCdwbOilVLUkkFGvC6SVEkI/IOrAkAqBlNBbkJQQQnODxqK7TFIPKNGTtFZS4d+AAMnOvU2dPqEN6bAhuuMxwPWdbbJSjPbJ8aw9xFEMk4FeSOSQ4UZqNY/V26LLpj1qR5CjT5K8uhP1oJKclJJ4+ka2DZLVgdROlbVDtKII9wohsKeDxG8Mn/AD4BI2naPPdWsxdOennSm511K27kulcCqlgKpUpxQ9FSwPpV7A++ovTq+Lw6IdUGJcSWmQuG56DjbUrc082T9IUONvn/AI0rana2msB1tjtlX4vG79x2/wDaYLO4udM2mcZjbjzinj1f6PXNEtfDtIYjts8+nETj1FEY3qz3JwNZJvGw566u4n0FbiTu419Ird6o2r18oaWnIiYr8mKlT0dXdteSCArGCMAY/wCNKq8ehtl2tMcl1LY8+SpSGkjsOcE/9aRrbULm0maKZfiHamiW1huI1dDxWGHOmU9tkPyIpSM5STqGKHBTIEea2VJB5GtFXzCob812AkIbUjgADHGgWo9OY7Sf1jrjYDhJQpRxxpktbidjlxig08MSjC81nbqPSKe3Wj/Twop9IbwrsFew0HzaeE8lPfTav+22WqissELUSd2DxjQRVKQGx8qPyddMsJA1qgz2pDvEK3LH519dunnRiPZfXiDc8OoxUU1x8IdUy6NqwrIBx3wSM6B/jNsG2aZ1fdlW5LbWJ0Rtx5pAyW1425J7HIAOmjYxrN8yqTb9UoEanKXT0h+ey8lTrxGcKScZRn2PnzpWdXKVKYvqo0559+U7EfLSJMiOW3HAnspSTnx57Ec65F/TyYuid3IGDjx710nV2zAo28Z/X2pVU+2JMJrZIVk9xrg6xDkLWww8lS0n5kA8jRo7NtiAwpF0SVNEK+YIQdwGq9u16ImOzWqO8l1qWne24MHI/wCD9jpvhugGEakEDrzS/Lb7gXYYJ+VCS6c5HUHkJ+dJyCR2OudJpEya86zGirce27m/TTnGOSSPbV7dM2FRkw0uOMqEuQWfkeSVIUMd0jkdxqM4HqK8qR6oZ9MEOlRxgeQdXBcJIp2HmqZt3jcFhxShvufX6ZWQuS84SlZJaSOMZ9tMzpz8RVmUmy5do120UuNPJBSyklG5eACSR3yB2++ll1F6rW69WZKItHTIUUFDD7rpGxefqwO478atrNtyFeVoR6o84gPeotC1NEDJB4PbQie3W/X02PGc9aKRTf2R3gVUXJRH59xuVSgRzGZcXuQ2CcIB8DXWHClMOIdlLKlA5yfHPfRk1bbkOElp9e5aBtzjwO2qmpNMxspTjPuPGjVnZpGB5FCLq7eQkY4o+HXyRYtowaBY4ALMlt5ySpeVhSQNwPH0nAI9hka6TPiakXWt2Rcqn23HUkrDaApJXwMjz7/zpRyWSpzcPOplOghLaHZLSi2VYCgNYk0PT2G5kyx79+awurXoOA3HjtVjWqgqq1FdVUVqbWCGyDhQOPOhK6KnV3VoVJdWG0AhAHkaNJUQrpbcVLSAVnd6iOVHuMaFrnp0tpKv1BJUgYIOpLeKFTtA6cVFNNKRknrzQLV5sV1agWjz/mPfQjVYSFLUWxx4zorqsBwun5cA6qJEEkH7edGIY1iHw0NkdpDzWvLB+KW9rXr0OpN1x55tbXpTQtsbkoOAQkqBwQBweccadHTfrT0wrFz1K5ruuWfOcl00x4s2SylTsde0JCl+OEgpBHP2GsvVG0ajCfUw7CIKDjKRqw6eyKjb9cbdMcPNKc2vMujhSc9jri6Tw+myrhdwwSPFdSaNyyk84OaPut/WO1oTkuzG6PFmul8LYrDBO5SMHIVu5UVcfg9u+l1Gvup0+lLRb0v/AA8ENtvEkNk8naNEd4dNl1J1+tNx0oU4srS0Owz4GfGltMo1VgTDGfWpKEqzwO+orW8WIARtgit5oC+d65BoaqIqqpSprkle71crKlHg50fdVevFq31ZdPt+NbyoU+PT249RloUNstaCT6pAAwo55P2Gh1+lSnt7CmS5nJScarUWstThbciFWOT8vYaIJqWcFjyPzVVrME4A4oErdLE1tamV5JOQfY6pqZeN22Sp1mkVd5lLowtKF8HTjh2HBfaSEIBJByPbQ/cnRhLzS5cTJOSSlQ7a2ttYEUmCaxNp5kTIFD1rfEHekScluoTjKaUseo2/yQnzg+NNinTqPdba36FN9cJA9RJGFJJ5wRpNW/02nTa81SGYpLrrwQkbfJONao6f/C3UunPTxd5Sn1LefdQlUb0+R3IP8aY7bW0jnRC3/LigdxpfqRMwHSl2/RH23Ni2SD7EauaRa1RlUaRLjxS4iMAp7YeQCcZx5AP8Z0aVyg0RgNvSZxafWfodSBzjjj+PxrzRK43aFX/Rwq9CccqLKmlNMvhRJIKcKT7j799GG1ZJIvhI3ePahY0x1k+LO3zS+juvtOBpvCcqHJAONV931CVP+R2GhWVY3oRjb/Gn51R6ET0Uin1i0LUHomIgyW2RvWF4PJH1DPck+4xxxpS3ZR61Zlddi16gNtnaU+m4nKT9xrW3vYL0BoSN3jIzxWJbSazOJQdv1xSlrFLbSokg5OqWRBSXDuIH50dVKmVCrOLMOEpz8J7aoa9Z1w0Vaf6tRZLBcA9NLjJG7PI/9aPRyDAVjzQhkJOQOK+lfxU/DzTVXM2enFkf4D6C4+7FbKxu85OcD8AaTUH4erjaeLrNGcSsKwpBbP8AbWtOiV5zKnVG00SptyUrOFpS8FA/YjPGnW3QrdrITOcpLaXQQTubwQR7++uKLok12zehIBz0I4x8iD+mK6h/qKQKokQnjrnmsCu9MJ8ajpZqNLWktpwoKTpe3TZtDZlrUI+1e3JCm+M6+md1dN7VuuCqPPpTW8NkNrQkAg447ayz1t6Ff0FMh5qlrKjnZhPnGhGqaZe6RIDL8St0I/Pir9nfW98pAGCOx/FZFbpkB2oKQ5BbbU2rAUrhK/tqxj2pa8qQp+tPMw1hISyMEpd57HGcHnPtgak3h0/uKbP/AEkeI6CFH6UEYOqef0lvNcb1XZDoWk7kJUrnOtreSHgsRXnVyOBXpd67Jst8xKdHMtfqAKLY+VQ8lKh3/OuUe2oVxRjPpAzv5LDn1t/Y++ulF6e1y9YZtp9paKgw5hlwpJ9XOePznU/p70tvqgXO8K3EfZEMFBTggLXgkDH7dtEi9hM2w4WqoFzGu5cmudk9B4NWvmImcoRGluBTkoJ4SnI5/OtnMdO2rdZgVKt1mNJgtsJERQQPTkYCRtxyO2SSeTu1nqk3TETV4dKVFTGUtwpkGQsJSnHPCjxp41S9alWbWVY1syI7UVhLf6mXJeAbYHOTvP8AqHAAz286llsrV1TEmfwKhW5uFZspj8mqjq58PfTe6KC7Vo8KNGU2hS1ORlggr5OMDkcax3UulMFfUVuO5MUhppe5DxPbHOONa2u2NVKBSlMUCVNkMuR0plPvpAaWvn6M4OPzpL1C3pcOovOymwXSFbVBOdufI/71pY288UpEDllPT81m5nieMGVQDUTqj1OrNm2221bF3PrdRGLLxaePJ5899DvTLqJROq9VpznVGC++mG2WnGwCQ8rOAT5z7/jXpUbcW+46mpI3kqyk9+NelvvtWe4h2nx0ZQ4CpJT3HnTFp2n3CpvHXnnoaDXt/AW2k8ccdRTerNsdGbepiq7SbPZSQz6qmxFUSkHt4IHP99KK7OtdlxnltsUKS4VEpfadOAMdsfcHVldvVKtVOkriQ3VRy4r/ABdijhQHYY8aUldil1TinkBSl87jotpmj78tdkk/9iaGX+rCMhbYAD2FfTe1PgzqHT+7UXJatwF6M1IC22ivDm0HI5Hn99Puh0+RTssKqLzzeMpTJBKk/bJ1CtaWzMbJizUOBBIWE5BB/BAP76vmySnn++hul6faxH14iefnkfT5e+aLXl1O/wDtv2+VedVdx04TlMtoajFS1FCvXZ3ZSe+PY41aaj1GK7LjlEd703ByheOx0VuohNAVxmqcTbJAaD698P3TisQZDDVDbZfeOQ+ngpP/AFoJY+Du3xUkzKrLalsDOWcFOD+f402Y9MqzVLdaqNS9V8kltxJIIGOBqPGl1OBGcDzO9RPClL57HQKXR9JkZXaDZx24+4HFEEvrxAVWTPv+M1k7qf03c6UXG5Kt+2W3S0slmSpsgd+/PfA/31VT+rw5XV7Tgxqi9HLzsh5IWXMA4wk8Jz/61qfqf0ypfUSkqnMtgzWo69iSTySOBrOVT+Fy8H6k2xVqTIbS4fmf2ZShOlG+0xrOUqyZU9CBnj+KN214J1BBwR1FI+5axbN0SRL9L0pTqgXGkNYQhWPA0QWv0pvrqJRAqgz5amow/wAJv1fkGMnsfHJ0Vv8ASGj9La+5Vbzt+XLisglpLUc7XecABXj8nTHoTFTdsaIbcguUlh0BSWW1J3ZcAyFecD/nWbRTI/pxnbjz+1YuJPTTe4z7UtbWoF2XPOYtepy1L/TIUpwOOhKUJQMq559j/Oqu+qXW4tYcRS6bMQzKQENMrQcqTjgcDkeR9tN+2enl4Wncypj8OO+AMu5SpaCnIzyPOrvrrU6bS7f/AFKKm1FfWgpSoqSTvxnA9iNMM+orZlSoDADH17mg8Nm90DklST+nYVmdfQq/6q4hX9CDKXRu3PvISEjPcjOf7Z1X3T0BlW/SHKtU7jhD0nQhxDIUoJ9yTjxnwNBV/dYep9r3K8+xXpYCuEoWtQBTnjH2Ol31P+IPqddDCI8utO7UIx6bR2p/cDv++rKanqbspVlA9v3qBtPsVBDBif8APFMWtWPSqdTnahIuultpwfSbmv8ApKUARhQye2Of20lbs6o2bDkriqrsJWxW0rbVuSr99ANzXLXZ29dSlur+XlS3CdLyvRW1rWsOg55I76MWupyoT6jbvpihtxp8LD4Bj61/RJHoRq8ZmNWFvJWyrcxIjultxP7juNXdEoJouRFqT7rSvqTJXuOffOvaIT6YBJOBxnU9ogpwBjVbTrSDAkxyMc9/5q7NcSOSvbxXtr9r9r920ZqrXhYBSQdQJjQIJx+dTVup7ajSNqknPtqCcAx1lTg5qllPvxcltwj8agSnqpIQSEuqB7nB51dqYjlRLo75BP2xquu+ZckWnoNqw0StqgH2lOYUUeQPzoHM/pRM7E4HYDJ+1EEw7hRxnueB96rabFcqrkmPJa9UNoBLK+x+bng9+NU9woj0+Utb1vtObAMteiR6ae+5I8du+plWqFah0t5VKbEV1xW4uuIO5IA4Bz986z71mvbqpRbmTUaqX429sNhyO4r03BnIWOfIxn8aA3N9CsigDnyen3olFayFDk0665W4Eq1v69HlyC00raWmlBSkKzwSPtwceQdYw+L3rDWLhqggJQ41FiI2RcnBWc/MtQAABJ8eO2tAWXcl2/p3WX3S4pwpVuWySl3I/wD1pQ9erfrM2c+0i3I8sFBcQtMTkI7c7e3PvoZNcPHcCQjj371aiCPGUB5rLNfviqyKYiTU2VrbQdiXHBnIz21CqNq1WpwUzaPDMhtxsLCmkZwD747aOLwgXNHt522avZjQiLWHEEp+dsDcBt9uSM/jVFRLZ6vWBSZF2dNHZSIzzKm5jbRStSRzwUkHgZznHfVxLkyLxgH9DVdo1j6nIpK31QaoylfqMEEDCgBoHl0OU7HVUm2VpS3wpvGc8d9ak6WVGL1IdnW51Ht6NMmuO+ozMGGHMEYKSBhJAPIOO5OfGqC//h1doNVcnUOnThGUopKS0HAoc9iO/wDHjUqak0bGNxz+lQtbK3xrX//Z",this.emptyImage=new Image,this.emptyImage.onload=function(){i.samplers.empty=i.gl.createTexture(),i.bindTexture(i.samplers.empty,i.emptyImage,1,1)},this.emptyImage.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs="}return(0,s.default)(t,[{key:"bindTexture",value:function(t,e,i,r){if(this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,i,r,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.anisoExt){var s=this.gl.getParameter(this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.gl.texParameterf(this.gl.TEXTURE_2D,this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,s)}}},{key:"loadExtraImages",value:function(t){var e=this;n.default.forEach(t,function(t,i){var r=t.data,s=t.width,n=t.height;if(!e.samplers[i]){var a=new Image;a.onload=function(){e.samplers[i]=e.gl.createTexture(),e.bindTexture(e.samplers[i],a,s,n)},a.src=r}})}},{key:"getTexture",value:function(t){return this.samplers[t]||this.samplers.clouds2}}]),t}();e.default=o,t.exports=e.default}])})},134:function(t,e){t.exports={baseVals:{rating:0,gammaadj:1.9,echo_zoom:1.16936,wave_mode:7,modwavealphabyvolume:1,wave_a:0,wave_scale:1.015009,wave_smoothing:.522,modwavealphastart:.83,modwavealphaend:1.31,warpscale:3.138,zoom:1.009006,warp:536e-6,wave_r:.5,wave_g:.5,wave_b:.5,mv_a:0},shapes:[{baseVals:{enabled:0}},{baseVals:{enabled:0}},{baseVals:{enabled:0}},{baseVals:{enabled:0}}],waves:[{baseVals:{enabled:0}},{baseVals:{enabled:0}},{baseVals:{enabled:0}},{baseVals:{enabled:0}}],init_eqs_str:"m.bass_thresh = 0;\nm.dx_residual = 0;\nm.dy_residual = 0;",frame_eqs_str:"m.wave_r=(0.85+(0.25*Math.sin(((0.437*m.time)+1)))); m.wave_g=(0.85+(0.25*Math.sin(((0.544*m.time)+2)))); m.wave_b=(0.85+(0.25*Math.sin(((0.751*m.time)+3)))); m.rot=(m.rot+(0.010*((0.60*Math.sin((0.381*m.time)))+(0.40*Math.sin((0.579*m.time)))))); m.cx=(m.cx+(0.210*((0.60*Math.sin((0.374*m.time)))+(0.40*Math.sin((0.294*m.time)))))); m.cy=(m.cy+(0.210*((0.60*Math.sin((0.393*m.time)))+(0.40*Math.sin((0.223*m.time)))))); m.dx=(m.dx+(0.003*((0.60*Math.sin((0.234*m.time)))+(0.40*Math.sin((0.277*m.time)))))); m.dy=(m.dy+(0.003*((0.60*Math.sin((0.284*m.time)))+(0.40*Math.sin((0.247*m.time)))))); m.decay=(m.decay-(0.01*equal(mod(m.frame,6), 0))); m.dx=(m.dx+m.dx_residual); m.dy=(m.dy+m.dy_residual); m.bass_thresh=((above(m.bass_att, m.bass_thresh)*2)+((1-above(m.bass_att, m.bass_thresh))*(((m.bass_thresh-1.3)*0.96)+1.3))); m.dx_residual=(((equal(m.bass_thresh, 2.13)*0.016)*Math.sin((m.time*7)))+((1-equal(m.bass_thresh, 2.13))*m.dx_residual)); m.dy_residual=(((equal(m.bass_thresh, 2.13)*0.012)*Math.sin((m.time*9)))+((1-equal(m.bass_thresh, 2.13))*m.dy_residual)); m.wave_x=(m.wave_x-(m.dx_residual*7)); m.wave_y=(m.wave_y-(m.dy_residual*7)); m.wave_mystery=(m.time*0.03); m.zoom=(m.zoom+(0.005*((0.60*Math.sin(((0.1934*m.time)+3)))+(0.40*Math.sin(((0.307*m.time)+9)))))); m.zoom=(m.zoom+(Math.max(0, (m.bass_att-1.1))*0.4));\n\t\tm.rkeys = [];",pixel_eqs_str:"",pixel_eqs:"",warp:"shader_body\n{\n  vec3 ret_1;\n  ret_1 = texture (sampler_main, uv).xyz;\n  ret_1 = (ret_1 + ((ret_1 - \n    ((texture (sampler_blur2, uv).xyz * scale2) + bias2)\n  ) * 0.3));\n  ret_1 = (ret_1 * 0.9);\n  ret_1 = (ret_1 + ((\n    ((texture (sampler_noise_lq, ((\n      (uv_orig * texsize.xy)\n     * \n      (texsize_noise_lq.zw * 0.4)\n    ) + rand_frame.xy)).xyz - 0.5) / 256.0)\n   * 122.0) * clamp (\n    (treb_att - 1.0)\n  , 0.0, 1.0)));\n  ret_1 = mix (ret_1, vec3(dot (ret_1, vec3(0.32, 0.49, 0.29))), vec3(0.2, 0.2, 0.2));\n  vec4 tmpvar_2;\n  tmpvar_2.w = 1.0;\n  tmpvar_2.xyz = ret_1;\n  ret = tmpvar_2.xyz;\n}\n\n",comp:"shader_body\n{\n  vec3 ret_1;\n  ret_1 = (texture (sampler_main, uv).xyz + ((\n    (texture (sampler_blur1, uv).xyz * scale1)\n   + bias1) * 0.4));\n  vec3 tmpvar_2;\n  tmpvar_2 = pow (ret_1, vec3(0.5, 0.8, 1.7));\n  ret_1 = tmpvar_2;\n  vec4 tmpvar_3;\n  tmpvar_3.w = 1.0;\n  tmpvar_3.xyz = tmpvar_2;\n  ret = tmpvar_3.xyz;\n}\n\n"}}});
//# sourceMappingURL=butterchurn-340cb74b2a4a30401fc6.js.map